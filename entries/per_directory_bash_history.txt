Per-directory bash history
# pubdate 2008-01-30
# pubtime 21:37:31
# tags bash,productivity
<p>I've been thinking about how a specific bash history for each directory could improve productivity, and unlike what I feared it was actually pretty easy to find a solution on the net.
<!--break--><br />
Quote from an <a href="http://www.debian-administration.org/articles/543#comment_17">anonymous reply on debian-administration.org</a></p>
<p><cite><br />
So I use the following bash function:</p>
<code lang="bash"><![CDATA[
#
# Usage: mycd <path>
#
#  Replacement for builtin 'cd', wh ich keeps a separate bash-history
#   for every directory.
function mycd()
{
   history -w # write current history  file
   builtin cd "$@"  # do actual c d
   local HISTDIR="$HOME/.dir_bash_history$PWD" # use& nbsp;nested folders for history
   if  [ ! -d "$HISTDIR" ]&n bsp;; then # create folder if neede d
      mkdir -p "$HISTDIR"
   fi
   export HISTFILE="$HISTDIR/bash_history.txt" # set& nbsp;new history file
   history -c  # clear memory
   history -r #read from current histfile
}
]]></code><p>
and then set it up with the following in my bashrc:</p>
<code lang="bash"><![CDATA[
shopt -s histappend
alias cd="mycd"
export HISTFILE="$HOME/.dir_bash_history$PWD/bash_history.txt"
]]></code><p></cite></p>
<p>Great stuff.  It would be nice to be able to use both the global and the directory-specific history by combining with an extra modifier key .<br />
( eg arrowup/pageup/c^r for global and alt+arrowup/alt+pageup/alt+c^r for the directory-specific one )</p>
<p>If I ever come up with / find something to do this I'll let you know...</p>
