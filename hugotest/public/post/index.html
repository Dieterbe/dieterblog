<!DOCTYPE html>

<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Dieter&#39;s blog</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<!--[if lt IE 9]>
	<script src="http://localhost:1313//js/html5.js"></script>
	<![endif]-->
    
    <link href="http://localhost:1313//index.xml" rel="alternate" type="application/rss+xml" title="Dieter&#39;s blog" />

    <link rel='stylesheet' id='twentyfourteen-lato-css'  href='//fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />

    <link rel='stylesheet' id='genericons-css' href='http://localhost:1313//genericons/genericons.css' type='text/css' media='all' />
	<link rel='stylesheet' id='twentyfourteen-style-css' href='http://localhost:1313//css/style.css' type='text/css' media='all' />
	
	<script type='text/javascript' src='http://localhost:1313//js/jquery/jquery.js'></script>
	<script type='text/javascript' src='http://localhost:1313//js/jquery/jquery-migrate.min.js'></script>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="home blog masthead-fixed list-view full-width grid">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<div class="header-main">
			<h1 class="site-title"><a href="http://localhost:1313//index.html" rel="home">Dieter&#39;s blog</a></h1>

			<div class="search-toggle">
				<a href="#search-container" class="screen-reader-text">Search</a>
			</div>

			<nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
				<button class="menu-toggle">Primary Menu</button>
				<a class="screen-reader-text skip-link" href="#content">Skip to content</a>
				<div class="nav-menu">
					<ul>
						
						<li class="page_item"> 
							<a href="/">blog</a>
						</li>
						
						<li class="page_item"> 
							<a href="/about/">about</a>
						</li>
						
						<li class="page_item"> 
							<a href="/talks/">talks</a>
						</li>
						
						<li class="page_item"> 
							<a href="https://twitter.com/Dieter_be">tweets</a>
						</li>
						
						<li class="page_item"> 
							<a href="https://github.com/Dieterbe">Github</a>
						</li>
						
					</ul>
				</div>
			</nav>
		</div>

		<div id="search-container" class="search-box-wrapper hide">
			<div class="search-box">
                <script type="text/javascript">
    function site_search(obj) {
    	var host = window.location.host;
        obj.q.value = "site:" + host + " " + obj.ss_q.value;
    }
</script>

<aside id="search-3" class="widget widget_search">
	<form role="search" class="search-form" action="//www.google.com/search" method="get" onSubmit="site_search(this)">

	<input name="q" type="hidden" />
	    <label>
	        <span class="screen-reader-text">Search for:</span>
	        <input name="ss_q" type="text" placeholder="Search ..." class="search-field" />
	    </label>
	    <input type="submit" value="Search" class="search-submit" />
	</form>
</aside>
			</div>
		</div>
	</header>

	<div id="main" class="site-main">


<div id="main-content" class="main-content">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

			<header class="archive-header">
				<h1 class="archive-title">Content tagged "Posts"</h1>
			</header>

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/practical-fault-detection-on-timeseries-part-2/">Practical fault detection on timeseries part 2: first macros and templates</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/practical-fault-detection-on-timeseries-part-2/" rel="bookmark">
					<time class="entry-date" datetime="2015-04-27 09:05:02 -0400 EDT">
						April 27, 2015
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>In the <a href="/practical-fault-detection-alerting-dont-need-to-be-data-scientist.html">previous fault detection article</a>, we saw how we can cover a lot of ground in fault detection with simple methods and technology that is available today.</p>

<p>It had an example of a simple but effective approach to find sudden spikes (peaks and drops) within fluctuating time series.</p>

<p>This post explains the continuation of that work and provides you the means to implement this yourself with minimal effort.</p>

<p>I&rsquo;m sharing with you:</p>

<ul>

<li><a href="http://bosun.org">Bosun</a> macros which detect our most common not-trivially-detectable symptoms of problems</li>

<li>Bosun notification template which provides a decent amount of information</li>

<li><a href="http://www.grafana.org">Grafana</a> and <a href="http://vimeo.github.io/graph-explorer/">Graph-Explorer</a> dashboards and integration for further troubleshooting</li>

</ul>

<p>We reuse this stuff for a variety of cases where the data behaves similarly and I suspect that you will be able to apply this to a bunch of your monitoring targets as well.</p>

<h2>Target use case</h2>

<p>As in the previous article, we focus on the specific category of timeseries metrics driven by user activity.</p>

<p>Those series are expected to fluctuate in at least some kind of (usually daily) pattern, but is expected to have a certain smoothness to it. Think web requests per second or uploads per minute.   There are a few characteristics that are considered faulty or at least worth our attention:</p>

<table>

<tr>

  <td><img src="/files/practical-alerting-timeseries-good.png"/></td>

  <td><img src="/files/practical-alerting-timeseries-bad-spikes.png"/></td>

  <td><img src="/files/practical-alerting-timeseries-bad-erratic.png"/></td>

  <td><img src="/files/practical-alerting-timeseries-bad-timeseries-median-drop.png"/></td>

</tr>

<tr>

  <td><b style="color: green;">looks good</b><br/>consistent pattern<br/>consistent smoothness</td>

  <td><b style="color: red;">sudden deviation (spike)</b><br/>Almost always something broke or choked.<br/>could also be pointing up. ~ peaks and valleys</td>

  <td><b style="color: red;">increased erraticness</b><br/>Sometimes natural<br/>often result of performance issues</td>

  <td><b style="color: red;">lower values than usual</b> (in the third cycle)<br/>Often caused by changes in code or config, sometimes innocent.  But best to alert operator in any case [*]</td>

</tr>

</table>

<p><br/></p>

<p>[*] Note that some regular patterns can look like this as well. For example weekend traffic lower than weekdays, etc.  We see this a lot.</p>

<p><br/>The illustrations don&rsquo;t portray this for simplicity.   But the alerting logic below supports this just fine by comparing to same day last week instead of yesterday, etc.</p>

<h2>Introducing the new approach</h2>

<p>The <a href="/practical-fault-detection-alerting-dont-need-to-be-data-scientist.html">previous article</a> demonstrated using graphite to compute standard deviation.</p>

<p>This let us alert on the erraticness of the series in general and as a particularly interesting side-effect, on spikes up and down.</p>

<p>The new approach is more refined and concrete by leveraging some of bosun&rsquo;s and Grafana&rsquo;s strengths.  We can&rsquo;t always detect the last case above via erraticness checking (a lower amount may be introduced gradually, not via a sudden drop) so now we monitor for that as well, covering all cases above.</p>

<p>We use</p>

<ul>

<li>Bosun macros which encapsulate all the querying and processing</li>

<li>Bosun template for notifications</li>

<li>A generic Grafana dashboard which aids in troubleshooting</li>

</ul>

<p>We can then leverage this for various use cases, as long as the expectations of the data are as outlined above.</p>

<p>We use this for web traffic, volume of log messages, uploads, telemetry traffic, etc.</p>

<p>For each case we simply define the graphite queries and some parameters and leverage the existing mentioned Bosun and Grafana configuration.</p>

<p><br/></p>

<p><p></p>

<p>The best way to introduce this is probably by showing how a notification looks like:</p>

<p><br/></p>

<p><center></p>

<p><a href="/files/practical-alerting-dm-notification.png"><img height="600px" src="/files/practical-alerting-dm-notification.png"/></a></p>

<p><br/></p>

<p>(image redacted to hide confidential information</p>

<p><br/>the numbers are not accurate and for demonstration purposes only)</p>

<p></center></p>

<p><p></p>

<p>As you can tell by the sections, we look at some global data (for example &ldquo;all web traffic&rdquo;, &ldquo;all log messages&rdquo;, etc), and also</p>

<p>by data segregated by a particular dimension (for example web traffic by country, log messages by key, etc)</p>

<p><br/></p>

<p>To cover all problematic cases outlined above, we do 3 different checks:</p>

<p>(note, everything is parametrized so you can tune it, see further down)</p>

<ul>

<li>Global volume: comparing the median value of the last 60 minutes or so against the corresponding 60 minutes last week and expressing it as a "strength ratio".  Anything below a given threshold such as 0.8 is alerted on</li>

<li>Global erraticness. To find all forms of erraticness (increased deviation), we use a refined formula.  See details below.  A graph of the input data is included so you can visually verify the series</li>

<li>On the segregated data: compare current (hour or so) median against median derived from the corresponding hours during the past few weeks, and only allow a certain amount of standard deviations difference</li>

</ul>

<p>If any, or multiple of these conditions are in warning or critical state, we get 1 alert that gives us all the information we need.</p>

<p><br/></p>

<p>Note the various links to GE (Graph-Explorer) and Grafana for timeshifts.</p>

<p>The Graph-Explorer links are just standard GEQL queries, I usually use this if i want to be easily manage what I&rsquo;m viewing (compare against other countries, adjust time interval, etc) because that&rsquo;s what GE is really good at.</p>

<p>The timeshift view is a Grafana dashboard that takes in a Graphite expression as a template variable, and can hence be set via a GET parameter by using the url  <pre><a href="http://grafana/#/dashboard/db/templatetimeshift?var-patt=expression">http://grafana/#/dashboard/db/templatetimeshift?var-patt=expression</a></pre></p>

<p>It shows the current past week as red dots, and the past weeks before that as timeshifts in various shades of blue representing the age of the data. (darker is older).</p>

<p><br/></p>

<p><br/></p>

<p><a href="/files/practical-alerting-screenshot-template-timeshift.png"><img width="50%" src="/files/practical-alerting-screenshot-template-timeshift.png" /></a></p>

<p><br/></p>

<p>This allows us to easily spot when traffic becomes too low, overly erratic, etc as this example shows:</p>

<p><br/></p>

<p><br/></p>

<p><a href="/files/practical-alerting-timeshift-use.png"><img width="50%" src="/files/practical-alerting-timeshift-use.png" /></a></p>

<p><br/></p>

<h2>Getting started</h2>

<p>Note: I Won&rsquo;t explain the details of the bosun configuration.  Familiarity with bosun is assumed.  The <a href="http://bosun.org/">bosun documentation</a> is pretty complete.</p>

<p><br/></p>

<p><br/></p>

<p><a href="https://gist.github.com/Dieterbe/d1892fa0b4454b892216">Gist with bosun macro, template, example use, and Grafana dashboard definition</a>.  Load the bosun stuff in your bosun.conf and import the dashboard in Grafana.</p>

<p><br/></p>

<p><br/></p>

<p>The pieces fit together like so:</p>

<ul>

<li>The alert is where we define the graphite queries, the name of the dimension segregated by (used in template), how long the periods are, what the various thresholds are and the expressions to be fed into Grafana and Graph-Explorer.

<br/>

It also lets you set an importance which controls the sorting of the segregated entries in the notification (see screenshot).  By default it is based on the historical median of the values but you could override this.  For example for a particular alert we maintain a lookup table with custom importance values.</li>

<li>The macros are split in two:

<ol>

<li>dm-load loads all the initial data based on your queries and computes a bunch of the numbers.</li>

<li>dm-logic does some final computations and evaluates the warning and critical state expressions.</li>

</ol>

They are split so that your alerting rule can leverage the returned tags from the queries in dm-load to use a lookup table to set the importance variable or other thresholds, such as s_min_med_diff on a case-by-case basis, before calling dm-logic.

<br/>

We warn if one or more segregated items didn't meet their median requirements, and if erraticness exceeds its threshold (note that the latter can be disabled).

<br>Critical is when more than the specified number of segregated items didn't meet their median requirements, the global volume didn't meet the strength ratio, or if erraticness is enabled and above the critical threshold.

</li>

<li>The template is evaluated and generates the notification like shown above</li>

<li>Links to Grafana (timeshift) and GE are generated in the notification to make it easy to start troubleshooting</li>

</ul>

<h2>Erraticness formula refinements</h2>

<p><img style="float: right; margin: 45px;" width="30%" src="/files/practical-alerting-notes-cleaned-small.jpg" /></p>

<p>You may notice that the formula has changed to</p>

<pre>

(deviation-now * median-historical) / ( (deviation-historical * median-now) + 0.01)

</pre>

<ul>

<li>Current deviation is compared to an automatically chosen historical deviation value (so no more need to manually set this)</li>

<li>Accounts for difference in volume: for example if traffic at any point is much higher, we can also expect the deviation to be higher.  With the previous formula we would have cases where in the past the numbers were very low, and naturally the deviation then was low and not a reasonable standard to be held against when traffic is higher, resulting in trigger happy alerting with false positives.

<br/>Now we give a fair weight to the deviation ratio by making it inversely proportional to the median ratio</li>

<li>The + 0.01 is to avoid division by zero</li>

</ul>

<!--

streak covers cases where values are very low so that stdev is in the same order (like low volume logs) and we can't properly use the erraticness or x-deviations. for example logs with very little traffic, datapoints representing healthy traffic can look like (1, 2, 0, 3, 1, ..)

although i think the ratio of medians (median_now/median_then) should work just as well as streak



<img src="/files/practical-alerting-low-values-zeroes.png" />

<img src="/files/practical-alerting-low-values-low.png" />

-->

<h2>Still far from perfect</h2>

<p>While this has been very helpful to us, I want to highlight a few things that could be improved.</p>

<ul>

<li>With these alerts, you'll find yourself wanting to iteratively fine tune the various parameters and validate the result of your changes by comparing the status-over-time timeline before and after the change.  While Bosun already makes iterative development easier and lets you <a href="http://bosun.org/public/ss_rule_timeline.png">run test rules against old data and look at a the status over time</a>, the interface could be improved by

<ol>

<li><a href="https://github.com/bosun-monitor/bosun/issues/636">showing timeseries (with event markers where relevant) alongside the status visualization</a>, so you have context to interpret the status timeline</li>

<li>routinely building <a href="https://github.com/grafana/grafana/pull/1569">a knowledge base of time ranges annotated with a given state for a given alerting concern, which would help in validating the generated status timeline, both visually and in code.  We could compute percentage of issues found, missed, etc</a>. "unit tests for alerting" my boss called it.</li>

</ol>

</li>

<li>Template could be prettier.  In particular the plots often don't render very well.  We're looking into closer Grafana-Bosun integration so I think that will be resolved at some point.</li>

<li><a href="https://github.com/bosun-monitor/bosun/issues/719">Current logic doesn't take past outages into account. "just taking enough periods in graphiteBand()" helps alleviate it mostly, but it's not very robust</a></li>

<li>See that drop in the screenshot a bit higher up? That one was preceded by a code deploy event in anthracite which made some changes where a drop in traffic was actually expected.  Would love to be able to mark stuff like this in deploys (like putting in the commit message something like "expect 20-50 drop" and have the monitoring system leverage that.</li>

</ul>

<h2>In conclusion</h2>

<p>I know many people are struggling with poor alerting rules (static thresholds?)</p>

<p><br/>As I explained in the previous article I fondly believe that the commonly cited solutions (anomaly detection via machine learning) are a very difficult endeavor and results can be achieved much quicker and more simpler.</p>

<p><br/>While this only focuses on one class of timeseries (it won&rsquo;t work on diskspace metrics for example) I found this class to be in the most dire need of better fault detection.  Hopefully this is useful to you. Good luck and let me know how it goes!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/practical-fault-detection-alerting-dont-need-to-be-data-scientist/">Practical fault detection &amp; alerting.  You don&#39;t need to be a data scientist</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/practical-fault-detection-alerting-dont-need-to-be-data-scientist/" rel="bookmark">
					<time class="entry-date" datetime="2015-01-29 09:08:02 -0400 -0400">
						January 29, 2015
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><br/></p>

<p>As we try to retain visibility into our increasingly complicated applications and infrastructure, we&rsquo;re building out more advanced monitoring systems.</p>

<p>Specifically, a lot of work is being done on alerting via fault and anomaly detection.</p>

<p>This post covers some common notions around these new approaches, debunks some of the myths that ask for over-complicated solutions, and provides some practical pointers that any programmer or sysadmin can implement that don&rsquo;t require becoming a data scientist.</p>

<p><br/></p>

<p><br/></p>

<h2>It's not all about math</h2>

<p>

I've seen smart people who are good programmers decide to tackle anomaly detection on their timeseries metrics.

(anomaly detection is about building algorithms which spot "unusual" values in data, via statistical frameworks).  This is a good reason to brush up on statistics, so you can apply some of those concepts.

But ironically, in doing so, they often seem to think that they are now only allowed to implement algebraic mathematical formulas. No more if/else, only standard deviations of numbers.  No more for loops, only moving averages. And so on.

<br/>When going from thresholds to something (<i>anything</i>) more advanced, suddenly people only want to work with mathematical formula's.  Meanwhile we have entire Turing-complete programming languages available, which allow us to execute any logic, as simple or as rich as we can imagine.  Using only math massively reduces our options in implementing an algorithm. 

<br/>

<br/>For example I've seen several presentations in which authors demonstrate how they try to fine-tune moving average algorithms and try to get a robust base signal to check against but which is also not affected too much by previous outliers, which raise the moving average and might mask subsequent spikes).  

<br/>

<img src="http://dieter.plaetinck.be/files/fault-detection-moving-average.png">

from <a href="https://speakerdeck.com/astanway/a-deep-dive-into-monitoring-with-skyline">A Deep Dive into Monitoring with Skyline</a>

<br/>

<br/>

But you can't optimize both, because a mathematical formula at any given point can't make the distinction between past data that represents "good times" versus "faulty times".

<br/>However: we wrap the output of any such algorithm with some code that decides what is a fault (or "anomaly" as labeled here) and alerts against it, so why would we hold ourselves back in feeding this useful information back into the algorithm?

<br/>I.e. <b>assist the math with logic</b> by writing some code to make it work better for us:  In this example, we could modify the code to just retain the old moving average from before the time-frame we consider to be faulty.  That way, when the anomaly passes, we resume "where we left off".  For timeseries that exhibit seasonality and a trend, we need to do a bit more, but the idea stays the same.   Restricting ourselves to only math and statistics cripples our ability to detect actual <b>faults</b> (problems).

</p>

<p>

Another example: During his <a href="https://coderanger.net/talks/echo/">Monitorama talk</a>, Noah Kantrowitz made the interesting and thought provoking observation that Nagios flap detection is basically a low-pass filter.  A few people suggested re-implementing flap detection as a low-pass filter.  This seems backwards to me because reducing the problem to a pure mathematical formula loses information.  The current code has the high-resolution view of above/below threshold and can visualize as such.  Why throw that away and limit your visibility?

</p>

<h2>Unsupervised machine learning... let's not get ahead of ourselves.</h2>

<p><a href="https://codeascraft.com/2013/06/11/introducing-kale/">Etsy&rsquo;s Kale</a> has ambitious goals: you configure a set of algorithms, and those algorithms get applied to <b>all</b> of your timeseries.  Out of that should come insights into what&rsquo;s going wrong.  The premise is that the found anomalies are relevant and indicative of faults that require our attention.</p>

<p><br/>I have quite a variety amongst my metrics.  For example diskspace metrics exhibit a sawtooth pattern (due to constant growth and periodic cleanup),</p>

<p>crontabs cause (by definition) periodic spikes in activity, user activity causes a fairly smooth graph which is characterized by its daily pattern and often some seasonality and a long-term trend.</p>

<p><br/></p>

<p><br/></p>

<p><img width="70%" src="http://dieter.plaetinck.be//files/anomaly-detection-cases.png"></p>

<p><br/></p>

<p><br/>Because they look differently, anomalies and faults look different too.  In fact, within each category there are multiple problematic scenarios. (e.g. user activity based timeseries should not suddenly drop, but also not be significantly lower than other days, even if the signal stays smooth and follows the daily rhythm)</p>

<p><br/></p>

<p><br/>I have a hard time believing that running the same algorithms on all of that data, and doing minimal configuration on them, will produce meaningful results. At least I expect a very low signal/noise ratio.  Unfortunately, of the people who I&rsquo;ve asked about their experiences with Kale/Skyline, the only cases where it&rsquo;s been useful is where skyline input has been restricted to a certain category of metrics - it&rsquo;s up to you do this filtering (perhaps via carbon-relay rules), potentially running multiple skyline instances - and sufficient time is required hand-selecting the appropriate algorithms to match the data.  This reduces the utility.</p>

<p><br/>&ldquo;Minimal configuration&rdquo; sounds great but this doesn&rsquo;t seem to work.</p>

<p><br/></p>

<p>Instead, something like <a href="http://bosun.org/">Bosun</a> (see further down) where you can visualize your series, experiment with algorithms and see the results in place on current and historical data, to manage alerting rules seems more practical.</p>

<p><br/></p>

<p><br/>Some companies (all proprietary) take it a step further and pay tens of engineers to work on algorithms that inspect all of your series, classify them into categories, &ldquo;learn&rdquo; them and automatically configure algorithms that will do anomaly detection, so it can alert anytime something looks unusual (though not necessarily faulty).</p>

<p>This probably works fairly well, but has a high cost, still can&rsquo;t know everything there is to know about your timeseries, is of no help of your timeseries is behaving faulty from the start and still alerts on anomalous, but irrelevant outliers.</p>

<p><br/></p>

<p><br/></p>

<p>I&rsquo;m <b>suggesting we don&rsquo;t need to make it that fancy</b> and we can do much better by <b>injecting some domain knowledge</b> into our monitoring system:</p>

<ul>

<li>using minimal work of classifying metrics via metric meta-data or rules that parse metric id's, we can automatically infer knowledge of how the series is supposed to behave (e.g. assume that disk_mb_used looks like sawtooth, frontend_requests_per_s daily seasonal, etc) and apply fitting processing accordingly.

<br/>Any sysadmin or programmer can do this, it's a bit of work but should make a hands-off automatic system such as Kale more accurate.

<br/>Of course, adopting <a href="http://metrics20.org/">metrics 2.0</a> will help with this as well. Another problem with machine learning is they would have to infer how metrics relate against each other, whereas with metric metadata this can easily be inferred (e.g.: what are the metrics for different machines in the same cluster, etc)</li>

<li>hooking into service/configuration management: you probably already have a service, tool, or file that knows how your infrastructure looks like and which services run where.  We know where user-facing apps run, where crontabs run, where we store log files, where and when we run cleanup jobs.  We know in what ratios traffic is balanced across which nodes, and so on.  Alerting systems can leverage this information to apply better suited fault detection rules.  And you don't need a large machine learning infrastructure for it. (as an aside: I have a lot more ideas on cloud-monitoring integration)</li>

<li>Many scientists are working on algorithms that find cause and effect when different series exhibit anomalies, so they can send more useful alerts.  But again here, a simple model of the infrastructure gives you service dependencies in a much easier way.</li>

<li>hook into your event tracking. If you have something like <a href="https://github.com/Dieterbe/anthracite/">anthracite</a> that lists upcoming press releases, then your monitoring system knows not to alert if suddenly traffic is a bit higher.  In fact, you might want to alert if your announcement did not create a sudden increase in traffic.  If you have a large scale infrastructure, you might go as far as tagging upcoming maintenance windows with metadata so the monitoring knows which services or hosts will be affected (and which shouldn't).

</ul>

<p><br/></p>

<p>Anomaly detection is useful if you don&rsquo;t know what you&rsquo;re looking for, or providing an extra watching eye on your log data.  Which is why it&rsquo;s commonly used for detecting fraud in security logs and such.</p>

<p>For operational metrics of which admins know what they mean, should and should not look like, and how they relate to each other, we can build more simple and more effective solutions.</p>

<h2>The trap of complex event processing... no need to abandon familiar tools</h2>

<p>On your quest into better alerting, you soon read and hear about real-time stream processing, and CEP (complex event processing) systems.</p>

<p>It&rsquo;s not hard to be convinced on their merits:  who wouldn&rsquo;t want real-time as-soon-as-the-data-arrives-you-can-execute-logic-and-fire-alerts?</p>

<p><br/>They also come with a fairly extensive and flexible language that lets you program or compose monitoring rules using your domain knowledge.</p>

<p>I believe I&rsquo;ve heard of <a href="https://storm.apache.org/">storm</a> for monitoring, but <a href="http://riemann.io/">Riemann</a> is the best known of these tools that focus on open source monitoring.</p>

<p>It is a nice, powerful tool and probably the easiest of the CEP tools to adopt.  It can also produce very useful dashboards.</p>

<p>However, these tools come with their own API or language, and programming against real-time streams is quite a paradigm shift which can be hard to justify.  And while their architecture and domain specificity works well for large scale situations, these benefits aren&rsquo;t worth it for most (medium and small) shops I know:  it&rsquo;s a lot easier (albeit less efficient) to just query a datastore over and over and program in the language you&rsquo;re used to.  With a decent timeseries store (or one written to hold the most recent data in memory such as <a href="https://github.com/dgryski/carbonmem">carbonmem</a>) this is not an issue, and the difference in timeliness of alerts becomes negligible!</p>

<h2>An example: finding spikes</h2>

<p>Like many places, we were stuck with static thresholds, which don&rsquo;t cover some common failure scenarios.</p>

<p>So I started asking myself some questions:</p>

<p><br></p>

<p><br></p>

<p><center></p>

<pre><code>&lt;i&gt;which behavioral categories of timeseries do we have, what kind of issues can arise in each category,

    &lt;br/&gt;how does that look like in the data, and what's the simplest way I can detect each scenario?&lt;/i&gt;
</code></pre>

<p></center></p>

<p><br/></p>

<p>Our most important data falls within the user-driven category from above where various timeseries from across the stack are driven by, and reflect user activity.  And within this category, the most common problem (at least in my experience) is spikes in the data.  I.e. a sudden drop in requests/s or a sudden spike in response time.  As it turned out, this is much easier to detect than one might think:</p>

<p><br/></p>

<p><img style="float:left; margin:15px;" src="http://dieter.plaetinck.be/files/poor-mans-fault-detection.png"></p>

<p><br/></p>

<p>In this example I just track the standard deviation of a moving window of 10 points.  <a href="http://en.wikipedia.org/wiki/Standard_deviation">Standard deviation</a> is simply a measure of how much numerical values differ from each other.  Any sudden spike bumps the standard deviation.   We can then simply set a threshold on the deviation.  Fairly trivial to set up, but has been highly effective for us.</p>

<p><br/></p>

<p><br/>You do need to manually declare what is an acceptable standard deviation value to be compared against, which you will typically deduce from previous data.  This can be annoying until you build an interface to speed up, or a tool to automate this step.</p>

<p><br/>In fact, it&rsquo;s trivial to collect previous deviation data (e.g. from the same time of the day, yesterday, or the same time of the week, last week) and automatically use that to guide a threshold.  (<a href="http://bosun.org/">Bosun</a> - see the following section - has &ldquo;band&rdquo; and &ldquo;graphiteBand&rdquo; functions to assist with this).  This is susceptible to previous outliers, but you can easily select multiple previous timeframes to minimize this issue in practice.</p>

<p><br/></p>

<p><a href="https://groups.google.com/forum/#!topic/it-telemetry/Zb2H4DP6qtk">it-telemetry thread</a></p>

<p><br></p>

<p><br></p>

<p>So without requiring fancy anomaly detection, machine learning, advanced math, or event processing, we are able to reliably detect faults using simple, familiar tools.  Some basic statistical concepts (standard deviation, moving average, etc) are a must, but nothing that requires getting a PhD.  In this case I&rsquo;ve been using <a href="http://graphite.readthedocs.org/en/0.9.10/functions.html#graphite.render.functions.stdev">Graphite&rsquo;s stdev function</a> and <a href="http://vimeo.github.io/graph-explorer/">Graph-Explorer&rsquo;s</a> alerting feature to manage these kinds of rules, but it doesn&rsquo;t allow for a very practical iterative workflow, so the non-trivial rules will be going into <a href="http://bosun.org/">Bosun</a>.</p>

<p><br/>BTW, you can also <a href="http://obfuscurity.com/2012/05/Polling-Graphite-with-Nagios">use a script to query Graphite from a Nagios check and do your logic</a></p>

<p><br/></p>

<p><br/></p>

<p><br/></p>

<!--

divideSeries(stdev(avg(keepLastValue(collectd.dfvimeopweb*.cpu.*.cpu.idle)),10),avg(keepLastValue(collectd.dfvimeopweb*.cpu.*.cpu.idle)))



why keepLastValue?

* sumSeries -> none counts as 0, so you can experience big drops which would trigger anomaly detection or failover

* averageSeries -> effectively ignores none values, so your accuracy can drop a lot in light of none values.



of course this masks when your monitoring breaks, so you still need something else to detect anomalies in the "out-of-date-ness" of your points.

-->

<h2>Workflow is key.  A closer look at bosun</h2>

<p>One of the reasons we&rsquo;ve been chasing self-learning algorithms is that we have lost faith in the feasibility of a more direct approach.  We can no longer imagine building and maintaining alerting rules because we have no system that provides powerful alerting, helps us keep oversight and streamlines the process of maintaining and iteratively developing alerting.</p>

<p><br/>I recently discovered <a href="http://bosun.org/">bosun</a>, an alerting frontend (&ldquo;IDE&rdquo;) by Stack Exchange, <a href="https://www.usenix.org/conference/lisa14/conference-program/presentation/brandt">presented at Lisa14</a>.  I highly recommend watching the video.  They have identified various issues that made alerting a pain, and built a solution that makes human-controlled alerting much more doable.  We&rsquo;ve been using it for a month now with good results (I also gave it support for Graphite).</p>

<p>I&rsquo;ll explain its merits, and it&rsquo;ll also become apparent how this ties into some of the things I brought up above:</p>

<p><img style="float:left; margin:35px;" src="http://bosun.org/public/ss_rule_timeline.png" width="15%"></p>

<ul>

<li>in each rule you can query any data you need from any of your datasources (currently graphite, openTSDB, and elasticsearch).  You can call various <a href="http://bosun.org/configuration.html">functions, boolean logic, and math</a>.  Although it doesn't expose you a full programming language, the bosun language as it stands is fairly complete, and can be extended to cover

new needs.  You choose your own alerting granularity (it can automatically instantiate alerts for every host/service/$your_dimension/... it finds within your metrics, but you can also trivially aggregate across dimensions, or both).  This makes it easy to create advanced alerts that cover a lot of ground, making sure you don't get overloaded by multiple smaller alerts.  And you can incorporate data of other entities within the system, to simply make better alerting decisions.</li>

<li>you can define your own templates for alert emails, which can contain any html code.  You can trivially plot graphs, build tables, use colors and so on.  Clear, context-rich alerts which contain all information you need!</li>

<li>As alluded to, the bosun authors spent a lot of time <a href="https://www.usenix.org/conference/lisa14/conference-program/presentation/brandt">thinking about, and solving</a> the workflow of alerting.  As you work on advanced fault detection and alerting rules you need to be able to see the value of all data (including intermediate computations) and visualize it.  Over time, you will iteratively adjust the rules to become better and more precise.  Bosun supports all of this.  You can execute your rules on historical data and see exactly how the rule performs over time, by displaying the status in a timeline view and providing intermediate values.  And finally, you can see how the alert emails will be rendered <i>as you work on the rule and the templates</i></li>

</ul>

<p>The <a href="http://bosun.org/examples.html">examples</a> section gives you an idea of the things you can do.</p>

<p><br/>I haven&rsquo;t seen anything solve a pragmatic alerting workflow like bosun (hence their name &ldquo;alerting IDE&rdquo;), and its ability to not hold you back as you work on your alerts is refreshing. Furthermore, the built-in processing functions are very <b>complimentary to graphite</b>:</p>

<p>Graphite has a decent API which works well at aggregating and transforming one or more series into one new series; the bosun language is great at reducing series to single numbers, providing boolean logic, and so on, which you need to declare alerting expressions.  This makes them a great combination.</p>

<p><br/>Of course Bosun isn&rsquo;t perfect either.  Plenty of things can be done to make it (and alerting in general) better.  But it does exemplify many of my points, and it&rsquo;s a nice leap forward in our monitoring toolkit.</p>

<h2>Conclusion</h2>

<p>Many of us aren&rsquo;t ready for some of the new technologies, and some of the technology isn&rsquo;t - and perhaps never will be - ready for us.</p>

<p>As an end-user investigating your options, it&rsquo;s easy to get lured in a direction that promotes over-complication and stimulates your inner scientist but just isn&rsquo;t realistic.</p>

<p><br/>Taking a step back, it becomes apparent we <b>can</b> setup automated fault detection.  But instead of using machine learning, use metadata, instead of trying to come up with all-encompassing holy grail of math, use several rules of code that you prototype and iterate over, then reuse for similar cases.  Instead of requiring a paradigm shift, use a language you&rsquo;re familiar with.  Especially by polishing up the workflow, we can make many &ldquo;manual&rdquo; tasks much easier and quicker.  I believe we can keep polishing up the workflow, distilling common patterns into macros or functions that can be reused, leveraging metric metadata and other sources of truth to configure fault detection, and perhaps even introducing &ldquo;metrics coverage&rdquo;, akin to &ldquo;code coverage&rdquo;: verify how much, and which of the metrics are adequately represented in alerting rules, so we can easily spot which metrics have yet to be included in alerting rules.  I think there&rsquo;s a lot of things we can do to make fault detection work better for us, but we have to look in the right direction.</p>

<h2>PS: leveraging metrics 2.0 for anomaly detection</h2>

<p>In my last <a href="https://www.usenix.org/conference/lisa14/conference-program/presentation/plaetinck">metrics 2.0 talk, at LISA14</a> I explored a few ideas on leveraging metrics 2.0 metadata for alerting and fault detection, such as automatically discovering error metrics across the stack, getting high level insights via tags, correlation, etc. If you&rsquo;re interested, it&rsquo;s in the video from 24:55 until 29:40</p>

<p><br/></p>

<p><br/></p>

<p><center></p>

<p><img src="http://dieter.plaetinck.be/files/metrics20-alerting.png" width="50%"></p>

<p></center></p>

<!--

It's not about alerts anyway.



alerts are an immensely crude approach to raising operator awareness.

They are basically boolean: either they interrupt your workflow or they don't.  There's no in between.

Yes, you can just check your alert emails "once in a while", but then realize that after an email or text is sent,

there is no way to update them with new information.  Which is really limiting once you start thinking about it.

Updates have to be provided via new "alerts", or they are available in the monitoring interface but there's no way to tell

by just glancing at your alert overview.  You might be looking at very out of date information.

-> only sent alerts for critical things.

-->

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/it-telemetry-google-group-collaboration-operational-insights/">IT-Telemetry Google group.  Trying to foster more collaboration around operational insights.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/it-telemetry-google-group-collaboration-operational-insights/" rel="bookmark">
					<time class="entry-date" datetime="2014-12-06 16:01:02 -0400 -0400">
						December 6, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>The discipline of collecting infrastructure &amp; application performance metrics, aggregation, storage, visualizations and alerting has many terms associated with it&hellip;  Telemetry. Insights engineering.  Operational visibility.</p>

<p>I&rsquo;ve seen a bunch of people present their work in advancing the state of the art in this domain:</p>

<p><br/>from <a href="http://mabrek.github.io/">Anton Lebedevich&rsquo;s statistics for monitoring series</a>, <a href="https://vimeo.com/95069158">Toufic Boubez&rsquo; talks on anomaly detection</a> and Twitter&rsquo;s work on <a href="https://blog.twitter.com/2014/breakout-detection-in-the-wild">detecting mean shifts</a> to projects such as <a href="http://flapjack.io/">flapjack</a> (which aims to offload the alerting responsibility from your monitoring apps), the <a href="http://metrics20.org/">metrics 2.0 standardization effort</a> or <a href="https://codeascraft.com/2013/06/11/introducing-kale/">Etsy&rsquo;s Kale stack</a> which tries to bring interesting changes in timeseries to your attention with minimal configuration.</p>

<p><br/></p>

<p><br/></p>

<p>Much of this work is being shared via conference talks and blog posts, especially around anomaly and fault detection, and I couldn&rsquo;t find a location for collaboration, quicker feedback and discussions on more abstract (algorithmic/mathematical) topics or those that cross project boundaries.  So I created the <a href="https://groups.google.com/forum/#!forum/it-telemetry">IT-telemetry</a> Google group.  If I missed something existing, let me know.  I can shut this down and point to whatever already exists.  Either way I hope this kind of avenue proves useful to people working on these kinds of problems.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/a-real-whisper-to-influxdb-program/">A real whisper-to-InfluxDB program.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/a-real-whisper-to-influxdb-program/" rel="bookmark">
					<time class="entry-date" datetime="2014-09-30 08:37:48 -0400 EDT">
						September 30, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>The <a href="/graphite-influxdb-intermezzo-migrating-old-data-and-a-more-powerful-carbon-relay.html">whisper-to-influxdb migration script</a> I posted earlier is pretty bad.  A shell script, without concurrency, and an undiagnosed performance issue.</p>

<p>I hinted that one could write a Go program using the unofficial <a href="https://github.com/kisielk/whisper-go">whisper-go</a> bindings and the <a href="https://github.com/influxdb/influxdb/tree/master/client">influxdb Go client library</a>.</p>

<p>That&rsquo;s what I did now, it&rsquo;s at <a href="https://github.com/vimeo/whisper-to-influxdb">github.com/vimeo/whisper-to-influxdb</a>.</p>

<p>It uses configurable amounts of workers for both whisper fetches and InfluxDB commits,</p>

<p>but it&rsquo;s still a bit naive in the sense that it commits to InfluxDB one serie at a time, irrespective of how many records are in it.</p>

<p>My series, and hence my commits have at most 60k records, and presumably InfluxDB could handle a lot more per commit, so we might leverage better batching later.  Either way, this way I can consistently commit about 100k series every 2.5 hours (or 10/s), where each serie has a few thousand points on average, with peaks up to 60k points. I usually play with 1 to 30 InfluxDB workers.</p>

<p>Even though I&rsquo;ve hit a few <a href="https://github.com/influxdb/influxdb/issues/985">InfluxDB</a> <a href="https://github.com/influxdb/influxdb/issues/970">issues</a>, this tool has enabled me to fill in gaps after outages and to do a restore from whisper after a complete database wipe.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/influxdb-as-graphite-backend-part2/">InfluxDB as a graphite backend, part 2</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/influxdb-as-graphite-backend-part2/" rel="bookmark">
					<time class="entry-date" datetime="2014-09-24 07:56:01 -0400 EDT">
						September 24, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><br></p>

<p><br/>Updated oct 1, 2014 with a new <i>Disk space efficiency</i> section which fixes some mistakes and adds more clarity.</p>

<p><br/></p>

<p><p></p>

<p>The <i>Graphite + InfluxDB</i> series continues.</p>

<ul>

<li>In part 1, <a href="/on-graphite-whisper-and-influxdb.html">"On Graphite, Whisper and InfluxDB"</a> I described the problems of Graphite's whisper and ceres, why I disagree with common graphite clustering advice as being the right path forward, what a great timeseries storage system would mean to me, why InfluxDB - despite being the youngest project - is my main interest right now, and introduced my approach for combining both and leveraging their respective strengths: InfluxDB as an ingestion and storage backend (and at some point, realtime processing and pub-sub) and graphite for its renown data processing-on-retrieval functionality.

Furthermore, I introduced some tooling: <a href="https://github.com/graphite-ng/carbon-relay-ng">carbon-relay-ng</a> to easily route streams of carbon data (metrics datapoints) to storage backends, allowing me to send production data to Carbon+whisper as well as InfluxDB in parallel, <a href="https://github.com/brutasse/graphite-api">graphite-api</a>, the simpler Graphite API server, with <a href="https://github.com/vimeo/graphite-influxdb">graphite-influxdb</a> to fetch data from InfluxDB.

</li>

<li>Not Graphite related, but I wrote <a href="https://github.com/Dieterbe/influx-cli">influx-cli</a> which I introduced <a href="/influx-cli_a_commandline_interface_to_influxdb.html">here</a>.  It allows to easily interface with InfluxDB and measure the duration of operations, which will become useful for this article.</li>

<li>In the <a href="graphite-influxdb-intermezzo-migrating-old-data-and-a-more-powerful-carbon-relay.html">Graphite &amp; Influxdb intermezzo</a> I shared a script to import whisper data into InfluxDB and noted some write performance issues I was seeing, but the better part of the article described the various improvements done to <a href="https://github.com/graphite-ng/carbon-relay-ng">carbon-relay-ng</a>, which is becoming an increasingly versatile and useful tool.</li>

<li>In <a href="/using-influxdb-as-graphite-backend-part2.html">part 2</a>, which you are reading now, I'm going to describe recent progress, share more info about my setup, testing results, state of affairs, and ideas for future work</li>

</ul>

<h4>Progress made</h4>

<ul>

<li>InfluxDB saw two major releases:

<ul>

<li>0.7 (and followups), which was mostly about some needed features and bug fixes</li>

<li>0.8 was all about bringing some major refactorings in the hands of early adopters/testers: support for multiple storage engines, configurable shard spaces, rollups and retention schemes. There was some other useful stuff like speed and robustness improvements for the graphite input plugin (by yours truly) and various things like regex filtering for 'list series'.  Note that a bunch of older bugs remained open throughout this release (most notably the broken <a href="https://github.com/influxdb/influxdb/issues/334">derivative aggregator</a>), and a bunch of new ones appeared. Maybe this is why the release was mostly in the dark.  In this context, it's not so bad, because we let graphite-api do all the processing, but if you want to query InfluxDB directly you might hit some roadblocks.</li>

<li>An older fix, but worth mentioning: series names can now also contain any character, which means you can easily use <a href="http://metrics20.org/">metrics2.0</a> identifiers.  This is a welcome relief after having struggled with Graphite's restrictions on metric keys.</li>

</ul>

<p></li></p>

<p><li><a href="http://graphite-api.readthedocs.org">graphite-api</a> received various bug fixes and support for templating, statsd instrumentation and caching.</p>

<p><br/>Much of this was driven by graphite-influxdb: the caching allows us to cache metadata and the statsd integration gives us insights into the performance of the steps it goes through of building a graph (getting metadata from InfluxDB, querying InfluxDB, interacting with cache, post processing data, etc).</li></p>

<p><li>the progress on InfluxDB and graphite-api in turn enabled <a href="https://github.com/vimeo/graphite-influxdb">graphite-influxdb</a> to become faster and simpler (note: graphite-influxdb requires InfluxDB 0.8).  Furthermore you can now configure series resolutions (but different retentions per serie is on the roadmap, see <i>State of affairs and what&rsquo;s coming</i>), and of course it also got a bunch of bugfixes.</li></p>

<p></ul></p>

<p>Because of all these improvements, all involved components are now ready for serious use.</p>

<h4>Putting it all together, with docker</h4>

<p><a href="https://www.docker.com/">Docker</a> probably needs no introduction, it&rsquo;s a nifty tool to build an environment with given software installed, and allows to easily deploy it and run it in isolation.</p>

<p><a href="https://github.com/vimeo/graphite-api-influxdb-docker">graphite-api-influxdb-docker</a> is a very creatively named project that generates the - also very creatively named - docker image <a href="https://registry.hub.docker.com/u/vimeo/graphite-api-influxdb/">graphite-api-influxdb</a>, which contains graphite-api and graphite-influxdb, making it easy to hook in a customized configuration and get it up and running quickly.  This is the recommended way to set this up, and this is what we run in production.</p>

<h4>The setup</h4>

<ul>

<li>a server running InfluxDB and graphite-api with graphite-influxdb via the docker approach described above:

<pre>

dell PowerEdge R610

24 x Intel(R) Xeon(R) X5660  @ 2.80GHz

96GB RAM

perc raid h700

6x600GB seagate 10k rpm drives in raid10 = 1.6 TB, Adaptive Read Ahead, Write Back, 64 kB blocks, no read caching

no sharding/shard spaces, compiled from git just before 0.8, using LevelDB (not rocksdb, which is now the default)

LevelDB max-open-files = 10000 (lsof shows about 30k open files total for the InfluxDB process), LRU 4096m, everything else is default I think.

</pre>

</li>

<li>a server running graphite-web, carbon, and whisper:

<pre>

dell PowerEdge R710

16 x Intel(R) Xeon(R) E5640  @ 2.67GHz

96GB RAM

perc raid h700

8x150GB seagate 15k rm in raid5 = 952 GB, Read Ahead, Write Back, 64 kB blocks, no read caching

MAX_UPDATES_PER_SECOND = 1000  # to sequentialize writes

</pre>

</li>

<li>a relay server running carbon-relay-ng that sends the same production load into both.  (about 2500 metrics/s, or 150k minutely)</li>

</ul>

<p>As you can tell, on both machines RAM is vastly over provisioned, and they have lots of cpu available (the difference in cores should be negligible), but the difference in RAID level is important to note: RAID 5 comes with a write penalty. Even though the whisper machine has more, and faster disks, it probably has a disadvantage for writes.  Maybe.  Haven&rsquo;t done raid stuff in a long time, and I haven&rsquo;t it measured it out.</p>

<p><br/><b>Clearly you&rsquo;ll need to take the results with a grain of salt, as unfortunately I do not have 2 systems available with the same configuration and their baseline (raw) performance is unknown.</b>.</p>

<p><br/>Note: no InfluxDB clustering, see <i>State of affairs and what&rsquo;s coming</i>.</p>

<h4>The empirical validation &amp; migration</h4>

<p>Once everything was setup and I could confidently send 100% of traffic to InfluxDB via carbon-relay-ng, it was trivial to run our dashboards with a flag deciding which server to go to.</p>

<p>This way I have literally been running our graphite dashboards next to each other, allowing us to compare both stacks on:</p>

<ul>

<li>visual differences: after a bunch of work and bug fixing, we got to a point where both dashboards looked almost exactly the same.  (note that graphite-api's implementation of certain functions can behave slightly different, see for example this <a href="https://github.com/brutasse/graphite-api/issues/66">divideSeries bug</a>)</li>

<li>speed differences by simply refreshing both pages and watching the PNGs load, with some assistance from firebug's network requests profiler.  The difference here was big: graphs served up by graphite-api + InfluxDB loaded considerably faster.  A page with 40 graphs or so would load in a few seconds instead of 20-30 seconds (on both first, as well as subsequent hits).  This is for our default, 6-hour timeframe views.  When cranking the timeframes up to a couple of weeks, graphite-api + InfluxDB was still faster.</li>

</ul>

<p>Soon enough my colleagues started asking to make graphite-api + InfluxDB the default, as it was much faster in all common cases.  I flipped the switch and everybody has been happy.</p>

<p><br/></p>

<p><br/></p>

<p>When loading a page with many dashboards, the InfluxDB machine will occasionally spike up to 500% cpu, though I rarely get to see any iowait (!), even after syncing the block cache (i just realized it&rsquo;ll probably still use the cache for reads after sync?)</p>

<p><br/>The carbon/whisper machine, on the other hand, is always fighting iowait, which could be caused by the raid 5 write amplification but the random io due to the whisper format probably has more to do with it.  Via the MAX_UPDATES_PER_SECOND I&rsquo;ve tried to linearize writes, with mixed success.  But I&rsquo;ve never gone to deep into it.  So basically <b>comparing write performance would be unfair in these circumstances, I am only comparing reads in these tests</b>.  Despite the different storage setups, the Linux block cache should make things fair for reads.   Whisper&rsquo;s iowait will handicap the reads, but I always did successive runs with fully loaded PNGs to make sure the block cache was warm for reads.</p>

<h4>A "slightly more professional" benchmark</h4>

<p>I could have stopped here, but the validation above was not very scientific.  I wanted to do a somewhat more formal benchmark, to measure read speeds (though I did not have much time so it had to be quick and easy).</p>

<p><br/>I wanted to compare InfluxDB vs whisper, and specifically how performance scales as you play with parameters such as number of series, points per series, and time range fetched (i.e. amount of points).  I <a href="https://groups.google.com/forum/#!topic/influxdb/0VeUQCqzgVg">posted the benchmark on the InfluxDB mailing list</a>.  Look there for all information. I just want to reiterate the conclusion here:  I was surprised.  Because of the results above, I had assumed that InfluxDB would perform reads noticeably quicker than whisper but this is not the case.  (maybe because whisper reads are nicely sequential - it&rsquo;s mostly writes that suffer from the whisper format)</p>

<p><br/>This very much contrasts my earlier findings where the graphite-api+InfluxDB powered dashboards clearly take the lead.  I have yet to figure out why this is.  Maybe something to do with the performance of graphite-web vs graphite-api itself, gunicorn vs apache, worker configuration, or maybe InfluxDB only starts outperforming whisper as concurrency increases.  Some more investigation is definitely needed!</p>

<h4>Future benchmarks</h4>

<p>The simple benchmark above was very simple to execute, as it only requires influx-cli and whisper-fetch (so you can easily check for yourself), but clearly there is a need to test more realistic scenarios with concurrent reads, and doing some write benchmarks would be nice too.</p>

<p><br/>We should also look into cpu and memory usage.  I have had the luxury of being able to completely ignore memory usage, but others seem to notice excessive InfluxDB memory usage.</p>

<p><br/>conclusion: many tests and benchmarks should happen, but I don&rsquo;t really have time to conduct them.  Hopefully other people in the community will take this on.</p>

<h4>Disk space efficiency</h4>

<p>Last time I checked, using LevelDB I was pretty close to 24B per record (which makes sense because time, seq_no and value are all 64bit values, and each record has those 3 fields).  (this was with snappy compression enabled, so it didn&rsquo;t seem to give much benefit).</p>

<p><br/>Whisper seems to consume 12 Bytes per record - a 32bit timestamp and a 64bit float value - making it considerably more storage efficient than InfluxDB/levelDB for now.</p>

<p><br/>Some notes on this though:</p>

<ul>

<li>whisper explicitly encodes None values, with InfluxDB those are implied (and require no space).  We have some clusters of metrics that have very sparse data, so whisper gives us a lot of overhead here, but this is different for everyone.  (note: Ceres should also be better at handling sparse data)</li>

<li>Whisper and Influxdb both explictly encode the timestamp for every record.  Influxdb uses 64bit so you can do very high resolution (up to microseconds), whisper is limited to per-second data.  Ceres AFAIK doesn't explicitly encode the timestamp at every record, which should also give it a space advantage.</li>

<li>I've been using a data format in InfluxDB where every record is timestamp-sequence_number-value.  It currently works best overall, and so that's how the graphite ingestion plugin stores it and the graphite-influxdb plugin queries for it.  But it exacerbates the overhead of the timestamp and sequence number.

<br/>We could technically use a row format where we use more variables as part of the record, storing them as columns instead of separate series, which would improve this dynamic (but currently comes with a big tradeoff in performance characteristics - see the <a href="https://github.com/influxdb/influxdb/issues/582">column indexes</a> ticket).

<br/>Another thing is that we could technically come up with a storage format for InfluxDB that is optimized for even-spaced metrics, it wouldn't need sequence numbers, and timestamps could be implicit instead of explicit, saving a lot of space.  We could even go further and introduce types (int, etc) for values which would consume even less space.

</ul>

<p><br/></p>

<p>It would be great if somebody with more Ceres experience could chip in here, as - in the context of space efficiency - it looks like a neat little format.</p>

<p>Also, I&rsquo;m probably not making proper use of the compression features that InfluxDB&rsquo;s storage engines support.  This also requires some more looking into.</p>

<h4>State of affairs and what's coming</h4>

<ul>

<li>InfluxDB typically performs pretty well, but not in all cases.  More validation is needed. It wouldn't surprise me at this point if tools like hbase/Cassandra/riak clearly outperform InfluxDB, as long as we keep in mind that InfluxDB is a young project.  A year, or two, from now, it'll probably perform much better. (and then again, it's not all about raw performance.  InfluxDB's has other strengths)</li>

<li>A long time goal which is now a reality:  <b>You can use any Graphite dashboard on top of InfluxDB, as long as the data is stored in a graphite-compatible format.</b>.  Again, the easiest to get running is via <a href="https://github.com/vimeo/graphite-api-influxdb-docker">graphite-api-influxdb-docker</a>.  There are two issues to be mentioned, though:

<ul>

<li>graphite-influxdb needs to query InfluxDB for metadata, and this <a href="https://github.com/influxdb/influxdb/issues/884">can be slow</a>.  If you have millions of metrics, it can take tens of seconds before querying for the data even starts.  I am trying to work with the InfluxDB people on a solution.</li>

<li><a href="https://github.com/brutasse/graphite-api/issues/57">graphite-api doesn't work with metric id's that have equals signs in them</a>.</li>

</ul>

<p><li>With the 0.8 release out the door, the shard spaces/rollups/retention intervals feature will start stabilizing, so we can start supporting multiple retention intervals per metric</li></p>

<p><li>Because InfluxDB clustering is <a href="https://github.com/influxdb/influxdb/pull/903">undergoing major changes</a>, and because clustering is not a high priority for me, I haven&rsquo;t needed to worry about this.  I&rsquo;ll probably only start looking at clustering somewhere in 2015 because I have more pressing issues.</li></p>

<p><li>Once the new clustering system and the storage subsystem have matured (sounds like a v1.0 ~ v1.2 to me) we&rsquo;ll get more speed improvements and robustness.  Most of the integration work is done, it&rsquo;s just a matter of doing smaller improvements, bug fixes and waiting for InfluxDB to become better.  Maintaining this stack aside, I personally will start focusing more on:</p>

<pre><code>&lt;ul&gt;

&lt;li&gt;per-second resolution in our data feeds, and potentially storage&lt;/li&gt;

&lt;li&gt;realtime (but basic) anomaly detection, realtime graphs for some key timeseries.  Adrian Cockcroft had an inspirational piece in his &lt;a href=&quot;https://vimeo.com/95064249&quot;&gt;Monitorama keynote&lt;/a&gt; about how alerts from timeseries should trigger within seconds.&lt;/li&gt;

&lt;li&gt;Mozilla's awesome &lt;a href=&quot;http://hekad.readthedocs.org&quot;&gt;heka&lt;/a&gt; project (this &lt;a href=&quot;https://vimeo.com/98689689&quot;&gt;heka video&lt;/a&gt; is great), which should help a lot with the above.  Also looking at &lt;a href=&quot;http://codeascraft.com/2013/06/11/introducing-kale/&quot;&gt;Etsy's kale stack&lt;/a&gt; for anomaly detection&lt;/li&gt;

&lt;li&gt;metrics 2.0 and making sure metrics 2.0 works well with InfluxDB.  Up to now I find the series / columns as a data model too limiting and arbitrary, it could be so much more powerful, ditto for the query language.&lt;/li&gt;
</code></pre>

<p></ul></p>

<p></li></p>

<p><li>Can we do anything else to make InfluxDB (+graphite) faster? Yes!</p>

<ul>

<li>Long term, of course, InfluxDB should have powerful enough processing functions and query syntax, so that we don't even need a graphite layer anymore.</li>

<li>A storage engine optimized for fixed intervals would probably help, timestamps and sequence numbers currently consume 2/3 of the record... and there's no reason to explicitly store either one in this use case.  I've even rarely seen people make use of the sequence number in any other InfluxDB use case.  See all the remarks in the <i>Disk space efficiency</i> section above.  Finally we could have InfluxDB have fill in None values without it doing "group by" (timeframe consolidation), which would shave off runtime overhead.</li>

<li>Then of course, there are projects to replace graphite-web/graphite-api with a Go codebase: <a href="https://github.com/graphite-ng/graphite-ng">graphite-ng</a> and <a href="https://github.com/dgryski/carbonapi">carbonapi</a>.  the latter is more production ready, but depends on some custom tooling and io using protobufs.  But it performs an order of magnitude better than the python api server!  I haven't touched graphite-ng in a while, but hopefully at some point I can take it up again</li>

</ul>

<p><li>Another thing to keep in mind when switching to graphite-api + InfluxDB: you loose the graphite composer.  I have a few people relying on this, so I can either patch it to talk to graphite-api (meh), separate it out (meh) or replace it with a nicer dashboard like tessera, grafana or descartes.  (or Graph-Explorer, but it can be a bit too much of a paradigm shift).</li></p>

<p><li>some more InfluxDB stuff I&rsquo;m looking forward to:</p>

<ul>

<li>binary protocol and result streaming (faster communication and responses!) (the latter might not get implemented though)</li>

<li>"list series" speed improvements (if metadata querying gets fast enough, we won't need ES anymore for metrics2.0 index)</li>

<li><a href="https://github.com/influxdb/influxdb/pull/635">InfluxDB instrumentation</a> so we actually start getting an idea of what's going on in the system, a lot of the testing and troubleshooting is still in the dark.</li>

</ul>

<p></li></p>

<p><li>Tracking exceptions in graphite-api is <a href="https://github.com/brutasse/graphite-api/search?q=exception&type=Issues&utf8=%E2%9C%93">much harder than it should be</a>.  Currently there&rsquo;s no way to display exceptions to the user (in the http response) or to even log them.  So sometimes you&rsquo;ll get http 500 responses and don&rsquo;t know why.  You can use the <a href="http://graphite-api.readthedocs.org/en/latest/configuration.html#extra-sections">sentry integration</a> which works all right, but is clunky.  Hopefully this will be addressed soon.</li></p>

<p></ul></p>

<h4>Conclusion</h4>

<p>The graphite-influxdb stack works and is ready for general consumption.  It&rsquo;s easy to install and operate, and performs well.</p>

<p>It is expected that InfluxDB will over time mature and ultimately meet all my <a href="/on-graphite-whisper-and-influxdb.html">requirements of the ideal backend</a>.  It definitely has a long way to go.  More benchmarks and tests are needed.  Keep in mind that we&rsquo;re not doing large volumes of metrics. For small/medium shops this solution should work well, but on larger scales you will definitely run into issues.  You might conclude that InfluxDB is not for you (yet) (there are alternative projects, after all).</p>

<p><br/></p>

<p><br/></p>

<p>Finally, a closing thought:</p>

<p><br/><i>Having graphs and dashboards that look nice and load fast is a good thing to have, but keep in mind that graphs and dashboards should be a last resort.  It&rsquo;s a solution if all else fails.  The fewer graphs you need, the better you&rsquo;re doing.</p>

<p><br/>How can you avoid needing graphs?  Automatic alerting on your data.</p>

<p><br/></p>

<p><br/>I see graphs as a temporary measure: they provide headroom while you develop an understanding of the operational behavior of your infrastructure, conceive a model of it, and implement the alerting you need to do troubleshooting and capacity planning.  Of course, this process consumes more resources (time and otherwise), and these expenses are not always justifiable, but I think this is the ideal case we should be working towards.</i></p>

<p><br/></p>

<p><br/></p>

<p>Either way, good luck and have fun!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/graphite-influxdb-intermezzo-migrating-old-data-and-a-more-powerful-carbon-relay/">Graphite &amp; Influxdb intermezzo: migrating old data and a more powerful carbon relay</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/graphite-influxdb-intermezzo-migrating-old-data-and-a-more-powerful-carbon-relay/" rel="bookmark">
					<time class="entry-date" datetime="2014-09-20 15:18:32 -0400 EDT">
						September 20, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h4>Migrating data from whisper into InfluxDB</h4>

<p><i>&ldquo;How do i migrate whisper data to influxdb&rdquo;</i> is a question that comes up regularly, and I&rsquo;ve always replied it should be easy to write a tool</p>

<p>to do this.  I personally had no need for this, until a recent small influxdb outage where I wanted to sync data from our backup server (running graphite + whisper) to influxdb, so I wrote a script:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>

<span style="color: #408080; font-style: italic"># whisper dir without trailing slash.</span>

<span style="color: #19177C">wsp_dir</span><span style="color: #666666">=</span>/opt/graphite/storage/whisper

<span style="color: #19177C">start</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>date -d <span style="color: #BA2121">&#39;sep 17 6am&#39;</span> +%s<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">end</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>date -d <span style="color: #BA2121">&#39;sep 17 12pm&#39;</span> +%s<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">db</span><span style="color: #666666">=</span>graphite

<span style="color: #19177C">pipe_path</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>mktemp -u<span style="color: #008000; font-weight: bold">)</span>

mkfifo <span style="color: #19177C">$pipe_path</span>

<span style="color: #008000; font-weight: bold">function</span> influx_updater<span style="color: #666666">()</span> <span style="color: #666666">{</span>

    influx-cli -db <span style="color: #19177C">$db</span> -async &lt; <span style="color: #19177C">$pipe_path</span>

<span style="color: #666666">}</span>

influx_updater &amp;

<span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000">read </span>wsp; <span style="color: #008000; font-weight: bold">do</span>

  <span style="color: #19177C">series</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>basename <span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">wsp</span>//<span style="color: #BB6622; font-weight: bold">\/</span>/.<span style="color: #BB6688; font-weight: bold">}</span> .wsp<span style="color: #008000; font-weight: bold">)</span>

  <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;updating </span><span style="color: #19177C">$series</span><span style="color: #BA2121"> ...&quot;</span>

  whisper-fetch.py --from<span style="color: #666666">=</span><span style="color: #19177C">$start</span> --until<span style="color: #666666">=</span><span style="color: #19177C">$end</span> <span style="color: #19177C">$wsp_dir</span>/<span style="color: #19177C">$wsp</span>.wsp | grep -v <span style="color: #BA2121">&#39;None$&#39;</span> | awk <span style="color: #BA2121">&#39;{print &quot;insert into \&quot;&#39;</span><span style="color: #19177C">$series</span><span style="color: #BA2121">&#39;\&quot; values (&quot;$1&quot;000,1,&quot;$2&quot;)&quot;}&#39;</span> &gt; <span style="color: #19177C">$pipe_path</span>

<span style="color: #008000; font-weight: bold">done</span> &lt; &lt;<span style="color: #666666">(</span>find <span style="color: #19177C">$wsp_dir</span> -name <span style="color: #BA2121">&#39;*.wsp&#39;</span> | sed -e <span style="color: #BA2121">&quot;s#</span><span style="color: #19177C">$wsp_dir</span><span style="color: #BA2121">/##&quot;</span> -e <span style="color: #BA2121">&quot;s/.wsp</span><span style="color: #19177C">$/</span><span style="color: #BA2121">/&quot;</span><span style="color: #666666">)</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>It relies on the recently introduced asynchronous inserts feature of <a href="https://github.com/Dieterbe/influx-cli">influx-cli</a> - which commits inserts in batches to improve the speed - and the whisper-fetch tool.</p>

<p><br/></p>

<p>You could probably also write a Go program using the unofficial <a href="https://github.com/kisielk/whisper-go">whisper-go</a> bindings and the <a href="https://github.com/influxdb/influxdb/tree/master/client">influxdb Go client library</a>.  But I wanted to keep it simple.  Especially when I found out that whisper-fetch is not a bottleneck: starting whisper-fetch, and reading out - in my case - 360 datapoints of a file always takes about 50ms, whereas InfluxDB at first only needed a few ms to flush hundreds of records, but that soon increased to seconds.</p>

<p><br/>Maybe it&rsquo;s a bug in my code, I didn&rsquo;t test this much, because I didn&rsquo;t need to; but people keep asking for a tool so here you go.  Try it out and maybe you can fix a bug somewhere.  Something about the write performance here must be wrong.</p>

<h4>A more powerful carbon-relay-ng</h4>

<p><a href="https://github.com/graphite-ng/carbon-relay-ng">carbon-relay-ng</a> received a bunch of love and has been a great help in my graphite+influxdb experiments.</p>

<p>

<a href="/files/carbon-relay-web-ui.png"><img width="441" src="/files/carbon-relay-web-ui.png" /></a>

</p>

<p>Here&rsquo;s what changed:</p>

<ul>

<li>First I made it so that you can adjust routes at runtime while data is flowing through, via a telnet interface.</li>

<li>Then <a href="https://github.com/pauloconnor">Paul O'Connor</a> built an embedded web interface to manage your routes in an easier and prettier way (pictured above)</li>

<li>The relay now also emits performance metrics via statsd (I want to make this better by using <a href="https://github.com/rcrowley/go-metrics">go-metrics</a> which will hopefully get <a href="https://github.com/rcrowley/go-metrics/issues/68">expvar support</a> at some point - any takers?).</li>

<li>Last but not least, I borrowed <a href="https://github.com/graphite-ng/carbon-relay-ng/tree/master/nsqd">the diskqueue</a> code from <a href="http://nsq.io/">NSQ</a> so now we can also spool to disk to bridge downtime of endpoints and re-fill them when they come back up</li>

</ul>

<p>Beside our metrics storage, I also plan to put our anomaly detection (currently playing with <a href="http://hekad.readthedocs.org/en/v0.7.1/">heka</a> and <a href="http://codeascraft.com/2013/06/11/introducing-kale/">kale</a>) and <a href="https://github.com/vimeo/carbon-tagger">carbon-tagger</a> behind the relay, centralizing all routing logic, making things more robust, and simplifying our system design.  The spooling should also help to deploy to our metrics gateways at other datacenters, to bridge outages of datacenter interconnects.</p>

<p><br/></p>

<p><br/></p>

<p>I used to think of carbon-relay-ng as the python carbon-relay but on steroids,</p>

<p>now it reminds me more of something like nsqd but with an ability to make packet routing decisions by introspecting the carbon protocol,</p>

<p><br/>or perhaps Kafka but much simpler, single-node (no HA), and optimized for the domain of carbon streams.</p>

<p><br/>I&rsquo;d like the HA stuff though, which is why I spend some of my spare time figuring out the intricacies of the increasingly popular <a href="http://raftconsensus.github.io/">raft</a> consensus algorithm.   It seems opportune to have a simpler Kafka-like thing, in Go, using raft, for carbon streams.</p>

<p>(note: InfluxDB <a href="https://github.com/influxdb/influxdb/pull/859">might introduce such a component</a>, so I&rsquo;m also a bit waiting to see what they come up with)</p>

<p><br/></p>

<p><br/></p>

<p>Reminder: notably missing from carbon-relay-ng is round robin and sharding.  I believe sharding/round robin/etc should be part of a broader HA design of the storage system, as I explained in <a href="http://dieter.plaetinck.be/on-graphite-whisper-and-influxdb.html">On Graphite, Whisper and InfluxDB</a>.  That said, both should be fairly easy to implement in carbon-relay-ng, and I&rsquo;m willing to assist those who want to contribute it.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/influx-cli_a_commandline_interface_to_influxdb/">Influx-cli: a commandline interface to Influxdb.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/influx-cli_a_commandline_interface_to_influxdb/" rel="bookmark">
					<time class="entry-date" datetime="2014-09-08 08:36:36 -0400 EDT">
						September 8, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

Time for another side project:

<a href="https://github.com/Dieterbe/influx-cli">influx-cli</a>,

a commandline interface to influxdb.

<br/>

Nothing groundbreaking, and it behaves pretty much as you would expect if you've ever used

the mysql, pgsql, vsql, etc tools before.

<br/>But I did want to highlight a few interesting features.

</p>

<p><br/></p>

<p>

<b>You can do things like user management via SQL,

even though influxdb doesn't have an SQL interface for this.</b>

<br/>This is much easier than doing curl http requests!

<pre><![CDATA[

influx> create admin test test

influx> list admin

## 0

                     name root

## 1

                     name test

]]></pre>

</p>

<p>

<b>You can change parameters and re-bind with the new values</b>

<pre><![CDATA[

influx> \user test

influx> \pass test

influx> \db graphite

influx> bind

]]></pre>

</p>

<p>

<b>Write your variables (user, pass, host, db, ...) to ~/.influxrc</b>

<pre><![CDATA[

influx> writerc

]]></pre>

</p>

<p>

<b>You can even do inserts via SQL, instead of http posts</b>

<br>I use this often.  This is very useful to script test cases for bug reports etc.

<pre><![CDATA[

influx> create db issue-1234

influx> \db issue-1234

influx> bind

influx> insert into demo (time, value, tag) values (120000, 10, "hi")

influx> insert into demo (time, value, tag) values (180000, 20, "hi again")

influx> select * from demo

## demo

                time sequence_number               value                 tag

       120000.000000      70001.000000                  10                "hi"

       180000.000000      80001.000000                  20          "hi again"

influx> delete db issue-1234

]]></pre>

</p>

<p>

<b>You can send queries on standard input, which is useful in shell commands and scripts.</b>

<pre><![CDATA[

$ echo 'list series' | influx-cli | wc -l

194722

$ influx-cli <<< 'list series' | wc -l

194722

]]></pre>

</p>

<p>

But even better, <b>from inside an influx-cli session, you can send output from any query into any other command.</b>

<br>In fact you can also <b>write output of queries into external files.</b>

All this via familiar shell constructs

<pre><![CDATA[

$ influx-cli

influx> list series | wc -l

194721

influx> list series > list-series.txt

]]></pre>



(note: the discrepancy of one line is due to <a href="https://github.com/shavac/readline/issues/2">the Go readline library echoing the query</a>.

</p>

<p>

<b>You can also toggle options, such as compression or display of timings.</b>

<br/>This can be very useful to easily get insights of performance of different operations.

<pre><![CDATA[

influx> \t

timing is now true

influx> select * from foo | wc -l

64637

timing>

query+network: 1.288792048s

displaying   : 457.091811ms

influx> \comp

compression is now disabled

influx> select * from foo | wc -l

64637

timing>

query+network: 969.322374ms

displaying   : 670.736018ms

influx> list series >/dev/null

timing>

query+network: 3.109178142s

displaying   : 65.712027ms

]]></pre>

<br/>This has enabled me to pinpoint slow operations and provide evidence when <a href="https://github.com/influxdb/influxdb/issues/884">when creating tickets</a>.

</p>

<p>

<b>Executing queries and debugging their result data format, works too</b>

<br/>This is useful when you want to understand the api better or if the database gets support for new queries with a different output format that influx-cli doesn't understand yet.

<pre><![CDATA[

influx> raw select * from foo limit 1

([]*client.Series) (len=1 cap=4) {

 (*client.Series)(0xc20b4f0480)({

  Name: (string) (len=51) "foo",

  Columns: ([]string) (len=3 cap=4) {

   (string) (len=4) "time",

   (string) (len=15) "sequence_number",

   (string) (len=5) "value"

  },

  Points: ([][]interface {}) (len=1 cap=4) {

   ([]interface {}) (len=3 cap=4) {

    (float64) 1.410148588e+12,

    (float64) 1,

    (float64) 95.549995

   }

  }

 })

}

]]></pre>

</p>

<p>

And that's about it.

I've found this to be a much easier way to interface with InfluxDB then using the web interface and curl, but YMMV.

<br/>If you were wondering, this is of course built on top of the <a href="https://github.com/influxdb/influxdb/tree/master/client">influxdb go client library</a>, which was overall pretty pleasant to work with.

<br/>Some ideas for future work:

<ul>

<li><a href="https://github.com/Dieterbe/influx-cli/issues/2">bulk insert performance could be better</a></li>

<li>once <a href="https://github.com/influxdb/influxdb/issues/263">influxdb can report query execution time</a> and hopefully also serialization time, the timing output can be more useful.  Right now we can only measure query execution+serialization+network transfer time combined</li>

<li>my gut feeling says that using something like msgpack instead of json, and/or even streaming the resultset as it is being generated (instead of first building the entire result, then serializing it, then sending it over, then having the client deserialize the entire thing) could really help performance, not just here, but basically anywhere you interface with influxdb.  Though I don't have hard numbers on this yet.</li>

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/darktable_magnificent_photo_manager_editor/">Darktable: a magnificent photo manager and editor</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/darktable_magnificent_photo_manager_editor/" rel="bookmark">
					<time class="entry-date" datetime="2014-08-12 08:36:36 -0400 EDT">
						August 12, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>A post about the magnificent <a href="http://darktable.org/">darktable</a> photo manager/editor and why I&rsquo;m abandoning <a href="/pixie.html">pixie</a></p>

<p><br/></p>

<p><br/></p>

<p>

When I wrote <a href="/pixie.html">pixie</a>, I was aware of <a href="http://darktable.org/">darktable</a>.

It looked like a neat application with potential to be pretty much what I was looking for, although it

also looked complicated, mainly due to terminology like "darkroom" and "lighttable", which was a bit off-putting to me

and made me feel like the application was meant for photo professionals and probably wouldn't work well with

the ideals of a techie with some purist views on how to manage files and keep my filesystems clean.

</p> 

<p> 

Basically I didn't want to give the application a proper chance and then rationalized the decision after I made it.

I'm sure psychologists have a term for this behavior.  I try to be aware of these cases and not to fall in the trap,

but this time I was very aware of it and still proceeded, but I think I had a reasonable excuse.

I wanted an app that behaves exactly how I like, I wanted to play with angularjs, it seemed like a fun learning exercise to implement a full-stack program backed by a Go api server and an angularjs interface, with some keybind features and vim-like navigation sprinkled on top.

</p>

<p>

Pixie ended up working, but I got fed up with some angularjs issues, slow js performance and a list of to-do's i would need to address before i

would consider pixie feature complete, so only as of a few days ago I started giving darktable the chance it had deserved from the beginning.

<br/>

As it turns out, darktable is actually a fantastic application, and despite some imperfections, the difference is clear enough for me to abandon pixie.</p>

<p><center></p>

<p><a href="/files/darktable-lighttable.png"></p>

<p><img src="/files/darktable-lighttable.png" width="30%"/></p>

<p></a></p>

<p></center></p>

<p>

Here's why I like it:

<ol>

<li>

It stays true to my ideals:  It doesn't modify your files at all, this is a must for easily synchronizing photo archives with each other and with devices.

You can tag, assign metadata, create edits, etc. and re-size on export.  It stores metadata in a simple sqlite database, and also in xmp files which it puts along with the original files, but luckily you can easily ignore those while syncing.  (I have yet to verify whether you can adjust dates or set GPS info without modifying the actual files, but I had no solution for that either)

</li>

<li>basically, it's just well thought out and works well.  the terminology thing is a non-issue.  Just realize that lighttable means the set of pictures in your collection you want to work with, darkroom is the editor where you edit the image, and film roll is a directory with imported images.   Everything else is intuitive</li>

<li>It has decent tag editing features, and a powerful mechanism to build a selection of images using a variety of criteria using exif data, tags, GPS info, labels, etc. You can make duplicates of an image and make different edits, and treat them as images of their own</li>

<li>It has <a href="http://www.darktable.org/usermanual/ch06s03.html.php">pretty extensive key binding options</a>, and even provides a <a href="http://darktable.org/redmine/projects/darktable/wiki/LuaUsage">lua api</a> so you can hook in your own plugins.  People are working on a bunch of <a href="http://darktable.org/redmine/projects/darktable/wiki/LuaScripts">scripts</a> already.</li>

<li>It's fast. Navigating a 33k file archive, adjusting thumbnail sizes on the fly, iterating fast, works well</li>

<li>It has good support for non-destructive editing.  It has a variety of editing possibilities, as if it was commercial software</li>

<li>It has <a href="http://www.darktable.org/usermanual/index.html.php">complete documentation</a>, a <a href="http://www.darktable.org/category/blog/">great blog</a> with plenty of <a href="http://www.darktable.org/tag/tutorial/">tutorial articles</a>, and <a href="https://www.youtube.com/playlist?list=PLmvlUro_Up1NBX7VK8UUuyWo1B468zEA0">tutorial videos</a></li>

</ol>

</p>

<p><center></p>

<p><a href="/files/darktable-darkroom.png"></p>

<p><img src="/files/darktable-darkroom.png" width="30%"/></p>

<p></a></p>

<p></center></p>

<p>

I did notice some bugs (including a few crashes), but there's always a few developers and community members active, on IRC and the bug tracker, so it's pretty active project and I'm confident/hopeful my issues will be resolved soon.

<!--

Finally I'd love to declare all my exports in a config file (collect files with these tags, export re-sized versions to directory X, etc) rather then this being manual, explicit actions. -->

<br/>I also have a few more ideas for features that would make it closer to my ideals, but as it stands, darktable is already a great application and I'm happy I can deprecate pixie at this point.

I even <a href="https://github.com/Dieterbe/tmsu-to-darktable">wrote a script</a> that automatically does all tag assignments in darktable based on the pixie information in tmsu, to make the transition friction free.

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/photos/index.html" rel="tag">photos</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/beautiful_go_patterns_for_concurrent_access_to_shared_resources_and_coordinating_responses/">Beautiful Go patterns for concurrent access to shared resources and coordinating responses</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/beautiful_go_patterns_for_concurrent_access_to_shared_resources_and_coordinating_responses/" rel="bookmark">
					<time class="entry-date" datetime="2014-07-26 13:22:32 -0400 EDT">
						July 26, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

It's a pretty common thing in backend go programs to have multiple coroutines concurrently needing to modify a shared resource,

and needing a response that tells them whether the operation succeeded and/or other auxiliary information.

Something centralized manages the shared state, the changes to it and the responses.

</p>

<p>

This is effectively two things.

</p>

<h2>Pattern one: making access to thread-unsafe data structures thread safe</h2>

<p>

Making modifications to thread-unsafe data (remember, maps for example are not thread safe in go) in a thread safe way, you can use a select loop that reads

from various channels and enforces that all operations are executed serially, because only one select case can happen at the same time.

I saw this first in <a href="https://github.com/bitly/statsdaemon/blob/master/statsdaemon.go#L90">bitly's statsdaemon</a> and have since used this in various places, including <a href="https://github.com/vimeo/statsdaemon">vimeo/statsdaemon</a> and <a href="https://github.com/graphite-ng/carbon-relay-ng">carbon-relay-ng</a>, for example to route metrics (which needs read access to the routes map) while allowing changes to the routes (coming from the telnet admin interface), by having those as two cases in a select statement.  This was my first "aha!" moment.

</p>

<h2>pattern two: coordinating flow of responses</h2>

<p>

For the second, after (potentially time consuming) work, returning a response to the invoker, (let's say in the carbon-relay-ng case where you want to notify whether the route change succeeded) I have so far just passed on references to the admin interface session along with the request, and after completion of the work it would spawn a new goroutine that resumes the session with the given response.  Not the most elegant, but it works.

</p>

<p>

The other day though, I saw a very interesting pattern for this case. I don't remember where (probably one of the gophercon presentations)

or what it's called. 

But the idea is you can simply use one shared channel for all requests, and one shared channel for all responses.

As long as the requesters write a request to the requests channel and then read a response from the other channel, and the coordinator first reads a request and then writes the response, no further synchronization is needed.  Here's a demo program:

</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;![CDATA[

<span style="color: #008000; font-weight: bold">package</span> main



<span style="color: #408080; font-style: italic">// demo the fact that we can just use one shared req and one resp channel.</span>

<span style="color: #408080; font-style: italic">// as long as they are unbuffered, the synchronization works just fine.</span>



<span style="color: #008000; font-weight: bold">import</span> <span style="color: #BA2121">&quot;fmt&quot;</span>

<span style="color: #008000; font-weight: bold">import</span> <span style="color: #BA2121">&quot;sync&quot;</span>

<span style="color: #008000; font-weight: bold">import</span> <span style="color: #BA2121">&quot;math/rand&quot;</span>

<span style="color: #008000; font-weight: bold">import</span> <span style="color: #BA2121">&quot;time&quot;</span>



<span style="color: #008000; font-weight: bold">var</span> requests = <span style="color: #008000">make</span>(<span style="color: #008000; font-weight: bold">chan</span> <span style="color: #B00040">int</span>)

<span style="color: #008000; font-weight: bold">var</span> responses = <span style="color: #008000">make</span>(<span style="color: #008000; font-weight: bold">chan</span> <span style="color: #B00040">string</span>)



<span style="color: #008000; font-weight: bold">func</span> routine(num <span style="color: #B00040">int</span>, wg <span style="color: #666666">*</span>sync.WaitGroup) {

    <span style="color: #408080; font-style: italic">// pretend this is a routine that&#39;s doing something, like serving a user session</span>

    <span style="color: #408080; font-style: italic">// but then we need to modify some shared state</span>

    time.Sleep(time.Duration(rand.Intn(<span style="color: #666666">100</span>)) <span style="color: #666666">*</span> time.Millisecond)

    requests <span style="color: #666666">&lt;-</span> num

    resp <span style="color: #666666">:=</span> <span style="color: #666666">&lt;-</span>responses

    fmt.Printf(<span style="color: #BA2121">&quot;routine %d gets response: %s\n&quot;</span>, num, resp)

    wg.Done()

}



<span style="color: #008000; font-weight: bold">func</span> coordinator() {

    <span style="color: #008000; font-weight: bold">for</span> {

        req <span style="color: #666666">:=</span> <span style="color: #666666">&lt;-</span>requests

        <span style="color: #408080; font-style: italic">// in here, you can do whatever modifications to shared state you need.</span>

        time.Sleep(time.Duration(rand.Intn(<span style="color: #666666">100</span>)) <span style="color: #666666">*</span> time.Millisecond) <span style="color: #408080; font-style: italic">// simulate some heavy lifting</span>

        responses <span style="color: #666666">&lt;-</span> fmt.Sprintf(<span style="color: #BA2121">&quot;this return value is meant for routine %d&quot;</span>, req)

    }

}



<span style="color: #008000; font-weight: bold">func</span> main() {

    <span style="color: #008000; font-weight: bold">go</span> coordinator()



    <span style="color: #008000; font-weight: bold">var</span> wg sync.WaitGroup

    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #666666">:=</span> <span style="color: #666666">0</span>; i &lt; <span style="color: #666666">10</span>; i<span style="color: #666666">++</span> {

        wg.Add(<span style="color: #666666">1</span>)

        <span style="color: #008000; font-weight: bold">go</span> routine(i, <span style="color: #666666">&amp;</span>wg)

    }

    wg.Wait()

    <span style="color: #008000">close</span>(requests)

}

]]&gt;
</pre></div>
</p>

<p><a href="http://play.golang.org/p/32BSXT0xhN">code on Go playground</a></p>

<p>

At first glance, it looked as if the seemingly arbitrary reading and writing from/to channels without explicit synchronization would introduce race conditions, with routines getting

the response meant for other routines.  But after some reasoning, it becomes apparent that 

the "channel operation as synchronization" keeps everything under control, in a pretty elegant way.

<b>There is nothing explicit to assure the routines get their response, and not the response meant for another routine.

Instead, it just flows naturally and implicitly from the ordering of the blocked channel operations.</b>.

Another "aha!" moment for me.  I've heard "use channel operations for synchronization" often enough, and this is the most

beautiful example of it I've come across so far.  The routines are blocked on channel reads and writes, but when a channel operation occurs, that's where the respective goroutines unblock, and everything just works the way it's supposed to.  How elegant!

</p>

<h2>Conclusion</h2>

<p>

Maybe these patterns are obvious to you, maybe they are widely known patterns.

But I think as you evolve from go rookie to experienced developer (and often need to wrap your head around new concepts and approaches)

you will encounter some interesting patterns and also have your "aha!" moments, so I hope this will help someone.

</p>

<p>

I've been using the first pattern in a few places, I haven't used the second one yet, but I know some places where I can apply it and simplify some code.

Take for example this <a href="https://github.com/graphite-ng/carbon-relay-ng/pull/7">pull request to add a web UI to carbon-relay-ng</a>, now the metrics-router, the admin telnet interface, <b>and</b> the new http interface will all need access to the routes map.  I'm looking forward to implement the second pattern, simplifying the code while making it more generic at the same time.

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/monitorama-pdx-metrics20/">Monitorama PDX &amp; my metrics 2.0 presentation</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/monitorama-pdx-metrics20/" rel="bookmark">
					<time class="entry-date" datetime="2014-05-29 10:39:32 -0400 EDT">
						May 29, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

Earlier this month we had another iteration of the <a href="http://monitorama.com/">Monitorama</a> conference, this time in Portland, Oregon.

</p>

<p>

<img src="/files/blog/monitorama-audience.jpg" width="800" />

<br/>(photo by <a href="https://www.flickr.com/photos/78527903@N00/sets/72157644593947233/">obfuscurity</a>)

</p>

<p>

I think the conference was better than the first one in Boston, much more to learn.  Also this one was quite focused on telemetry (timeseries metrics processing), lots of talks on timeseries analytics, not so much about things like sensu or nagios.  

<a href="https://vimeo.com/95064249">Adrian Cockroft's keynote</a> brought some interesting ideas to the table, like building a feedback loop into the telemetry to drive infrastructure changes (something we do at Vimeo, I briefly give an example in the intro of my talk) or shortening the time from fault to alert (which I'm excited to start working on soon)

<br/>My other favorite was <a href="https://vimeo.com/95227467">Noah Kantrowitz's talk about applying audio DSP techniques to timeseries</a>,

I always loved audio processing and production.  Combining these two interests hadn't occurred to me so now I'm very excited about the applications.

<br/>The opposite, but just as interesting of an idea - conveying information about system state as an audio stream - came up in <a href="http://puppetlabs.com/podcasts/podcast-insights-monitorama-conference">puppetlab's monitorama recap</a> and that seems to make a lot of sense as well. There's <b>a lot</b> of information in a stream of sound, it is much denser than text, icons and perhaps even graph plots.  Listening to an audio stream that's crafted to represent various information might be a better way to get insights into your system.

</p>

<p><br/></p>

<p><i></p>

<p>I'm happy to see the idea reinforced that telemetry is a key part of modern monitoring.

For me personally, telemetry (the tech and the process) is <b>the most fascinating part of modern technical operations</b>, and I'm glad to be part of the movement pushing this forward.  There's also a bunch of startups in the space (many stealthy ones), validating the market.  I'm curious to see how this will play out.

</p>

<p></i><br/></p>

<p>I had the privilege to present <a href="http://metrics20.org">metrics 2.0</a> and

<a href="http://vimeo.github.io/graph-explorer/">Graph-Explorer</a>.

As usual the <a href="http://www.slideshare.net/Dieterbe/metrics20-34319840">slides are on slideshare</a> and the <a href="https://vimeo.com/95076197">footage on the better video sharing platform</a> ;-) .

<br/>I'm happy with all the positive feedback, although I'm not aware yet of other tools and applications adopting metrics 2.0, and I'm looking forward to see some more of that, because ultimately that's what will show if my ideas are any good.

</p>

<p>

<iframe src="http://www.slideshare.net/slideshow/embed_code/34319840" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowfullscreen> </iframe>



<iframe allowfullscreen="allowfullscreen" frameborder="0" height="356" mozallowfullscreen="mozallowfullscreen" src="//player.vimeo.com/video/95076197?title=0&amp;byline=0&amp;portrait=0&amp;color=33a352" webkitallowfullscreen="webkitallowfullscreen" width="633"></iframe>

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/on-graphite-whisper-and-influxdb/">On Graphite, Whisper and InfluxDB</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/on-graphite-whisper-and-influxdb/" rel="bookmark">
					<time class="entry-date" datetime="2014-05-18 13:22:32 -0400 EDT">
						May 18, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h4>Graphite, and the storage Achilles heel</h4>

<p>Graphite is a neat timeseries metrics storage system that comes with a powerful querying api, mainly due to the whole bunch of <a href="http://graphite.readthedocs.org/en/latest/functions.html">available processing functions</a>.</p>

<p><br/>For medium to large setups, the storage aspect quickly becomes a pain point.  Whisper, the default graphite storage format, is a simple storage format, using one file per metric (timeseries).</p>

<ul>

<li>It can't keep all file descriptors in memory so there's a lot of overhead in constantly opening, seeking, and closing files, especially since usually one write comes in for all metrics at the same time.

</li>

<li>Using the rollups feature (different data resolutions based on age) causes a lot of extra IO.</li>

<li>The format is also simply not optimized for writes.  Carbon, the storage agent that sits in front of whisper has a feature to batch up writes to files to make them more sequential but this doesn't seem to help much.</li>

<li>Worse, due to various <a href="https://github.com/pcn/carbon/blob/new-sending-mechanism/Why_Spooling.md#what-problems-have-we-had">implementation details</a> the carbon agent is surprisingly inefficient and even cpu-bound.  People often run into cpu limitations before they hit the io bottleneck.  Once the writeback queue hits a certain size, carbon will blow up.</li>

</ul>

<p>Common recommendations are to <a href="http://bitprophet.org/blog/2013/03/07/graphite/">run multiple carbon agents</a> and</p>

<p><a href="http://obfuscurity.com/2012/04/Unhelpful-Graphite-Tip-5">running graphite on SSD drives</a>.</p>

<p><br/>If you want to scale out across multiple systems, you can get carbon to shard metrics across multiple nodes, but the complexity can get out of hand and manually maintaining a cluster where nodes get added, fail, get phased out, need recovery, etc involves a lot of manual labor even though <a href="https://github.com/jssjr/carbonate/">carbonate</a> makes this easier.  This is a path I simply don&rsquo;t want to go down.</p>

<p><br/></p>

<p><br/></p>

<p>

<i>These might be reasonable solutions based on the circumstances (often based on short-term local gains), but I believe as a community we should solve the problem at its root, so that everyone can reap the long term benefits.

</i>

</p>

<p><br/></p>

<p>In particular, <a href="http://blog.sweetiq.com/2013/01/using-ceres-as-the-back-end-database-to-graphite/#axzz324uQtk3d">running Ceres instead of whisper</a>, is only a slight improvement, that suffers from most of the same problems.  I don&rsquo;t see any good reason to keep working on Ceres, other than perhaps that it&rsquo;s a fun exercise.   This probably explains the slow pace of development.</p>

<p><br/>However, many mistakenly believe Ceres is &ldquo;the future&rdquo;.</p>

<p><br/><a href="http://www.inmobi.com/blog/2014/01/24/extending-graphites-mileage">Switching to LevelDB</a> seems much more sensible but IMHO still doesn&rsquo;t cut it as a general purpose, scalable solution.</p>

<h4>The ideal backend</h4>

<p>I believe we can build a backend for graphite that</p>

<ul>

<li>can easily scale from a few metrics on my laptop in power-save mode to millions of metrics on a highly loaded cluster</li>

<li>supports nodes joining and leaving at runtime and automatically balancing the load across them</li>

<li>assures high availability and heals itself in case of disk or node failures</li>

<li>is simple to deploy.  think: just run an executable that knows which directories it can use for storage, elasticsearch-style automatic clustering, etc.</li>

<li>has the right read/write optimizations.  I've never seen a graphite system that is not write-focused, so something like <a href="http://en.wikipedia.org/wiki/Log-structured_merge-tree">LSM trees</a> seems to make a lot of sense.</li>

<li>can leverage cpu resources (e.g. for compression)</li>

<li>provides a more natural model for phasing out data.  Optional, runtime-changeable rollups.  And an age limit (possibly, but not necessarily round robin)

</ul>

<p>While we&rsquo;re at it. pub-sub for realtime analytics would be nice too.  Especially when it allows to use the same functions as the query api.</p>

<p><br/>And getting rid of the metric name restrictions such as inability to use dots or slashes.  Efficient sparse series support would be nice too.</p>

<h4>InfluxDB</h4>

<p>There&rsquo;s a lot of databases that you could hook up to graphite.</p>

<p>riak, hdfs based (opentsdb), Cassandra based (kairosdb, blueflood, cyanite), etc.</p>

<p>Some of these are solid and production ready, and would make sense depending on what you already have and have experience with.</p>

<p>I&rsquo;m personally very interested in playing with Riak, but decided to choose InfluxDB as my first victim.</p>

<p><br/></p>

<p><br/></p>

<p>InfluxDB is a young project that will need time to build maturity, but is on track to meet all my goals very well.</p>

<p>In particular, installing it is a breeze (no dependencies), it&rsquo;s specifically built for timeseries (not based on a general purpose database),</p>

<p>which allows them to do a bunch of simplifications and optimizations, is write-optimized, and should meet my goals for scalability, performance, and availability well.</p>

<p>And they&rsquo;re in NYC so meeting up for lunch has proven to be pretty fruitful for both parties.  I&rsquo;m pretty confident that these guys can pull off something big.</p>

<p><br/></p>

<p><br/></p>

<p>Technically, InfluxDB is a &ldquo;timeseries, metrics, and analytics&rdquo; databases with use cases well beyond graphite and even technical operations.</p>

<p>Like the alternative databases, graphite-like behaviors such as rollups management and automatically picking the series in the most appropriate resolutions, is something to be implemented on top of it.  Although you never know, it might end up being natively supported.</p>

<h4>Graphite + InfluxDB</h4>

<p>InfluxDB developers plan to implement a whole bunch of processing functions (akin to graphite, except they can do locality optimizations) and add a dashboard that talks to InfluxDB natively (or use <a href="http://grafana.org/">Grafana</a>), which means at some point you could completely swap graphite for InfluxDB.</p>

<p>However, I think for quite a while, the ability to use the Graphite api, combine backends, and use various graphite dashboards is still very useful.</p>

<p>So here&rsquo;s how my setup currently works:</p>

<ul>

<li>

<a href="https://github.com/graphite-ng/carbon-relay-ng">carbon-relay-ng</a> is a carbon relay in Go.  

It's a pretty nifty program to partition and manage carbon metrics streams.  I use it in front of our traditional graphite system, and have it stream - in realtime - a copy of a subset of our metrics into InfluxDB.  This way I basically have our unaltered Graphite system, and in parallel to it, InfluxDB, containing a subset of the same data.

<br/>With a bit more work it will be a high performance alternative to the python carbon relay, allowing you to manage your streams on the fly.

It doesn't support consistent hashing, because CH should be part of a strategy of a highly available storage system (see requirements above), using CH in the relay still results in a poor storage system, so there's no need for it.

</li>

<li>I contributed the code to InfluxDB to make it listen on the carbon protocol.  So basically, for the purpose of ingestion, InfluxDB can look and act just like a graphite server.  Anything that can write to graphite, can now write to InfluxDB.  (assuming the plain-text protocol, it doesn't support the pickle protocol, which I think is a thing to avoid anyway because almost nothing supports it and you can't debug what's going on)</li>

<li><a href="https://github.com/brutasse/graphite-api">graphite-api</a> is a fork/clone of graphite-web, stripped of needless dependencies, stripped of the composer.  It's conceived for many of the same reasons behind <a href="http://dieter.plaetinck.be/graphite-ng_a-next-gen-graphite-server-in-go.html">graphite-ng</a> (graphite technical debt, slow development pace, etc) though it doesn't go to such extreme lengths and for now focuses on being a robust alternative for the graphite server, api-compatible, trivial to install and with a faster pace of development.

</li>

<li>

That's where <a href="https://github.com/vimeo/graphite-influxdb">graphite-influxdb</a> comes in.  It hooks InfluxDB into graphite-api, so that you can query the graphite api, but using data in InfluxDB.

It should also work with the regular graphite, though I've never tried.  (I have no incentive to bother with that, because I don't use the composer.  And I think it makes more sense to move the composer into a separate project anyway).

</li>

</ul>

<p>With all these parts in place, I can run our dashboards next to each other - one running on graphite with whisper, one on graphite-api with InfluxDB - and simply look whether the returned data matches up, and which dashboards loads graphs faster.</p>

<p>Later i might do more extensive benchmarking and acceptance testing.</p>

<p><br/></p>

<p><br/></p>

<p>If all goes well, I can make carbon-relay-ng fully mirror all data, make graphite-api/InfluxDB the primary, and turn our old graphite box into a live &ldquo;backup&rdquo;.</p>

<p>We&rsquo;ll need to come up with something for rollups and deletions of old data (although it looks like by itself influx is already more storage efficient than whisper too), and I&rsquo;m really looking forward to the InfluxDB team building out the function api, having the same function api available for historical querying as well as realtime pub-sub.  (my goal used to be implementing this in graphite-ng and/or carbon-relay-ng, but if they do this well, I might just abandon graphite-ng)</p>

<p><br/></p>

<p><br/>To be continued..</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/metrics-2-0-own-website/">Metrics 2.0 now has its own website!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/metrics-2-0-own-website/" rel="bookmark">
					<time class="entry-date" datetime="2014-04-23 09:10:32 -0400 EDT">
						April 23, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Metrics 2.0 started as a <a href="http://dieter.plaetinck.be/metrics_2_a_proposal.html">half-formal proposal</a> and an implementation via <a href="http://vimeo.github.io/graph-explorer/">graph-explorer</a>, but is broad enough in scope that it deserves its own website, its own spec, its own community.  That&rsquo;s why I launched <a href="http://metrics20.org/">metrics20.org</a> and a <a href="https://groups.google.com/forum/#!forum/metrics20">discussion group</a>.</p>

<p>

from the website:

</p>

<pre><code>  &lt;p&gt;

  We have pretty good storage of timeseries data, collection agents, and dashboards.  But the idea of giving timeseries a &quot;name&quot; or a

  &quot;key&quot; is profoundly limiting us.  Especially when they're not standardized and missing information.

  &lt;br/&gt;Metrics 2.0 aims for &lt;b&gt;self-describing&lt;/b&gt;, &lt;b&gt;standardized&lt;/b&gt; metrics using &lt;b&gt;orthogonal tags&lt;/b&gt; for every dimension.

  &quot;metrics&quot; being the pieces of information that point to, and describe timeseries of data.

  &lt;/p&gt;By adopting metrics 2.0 you can:

  &lt;ul&gt;

    &lt;li&gt;increase compatibility between tools&lt;/li&gt;

    &lt;li&gt;get immediate understanding of metrics&lt;/li&gt;

    &lt;li&gt;build graphs, plots, dashboards and alerting expressions with minimal hassle&lt;/li&gt;

  &lt;/ul&gt;
</code></pre>

<p>Read more on <a href="http://metrics20.org/">metrics20.org</a>.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/introduction_talk_to_metrics2-0_and_graph_explorer/">Introduction talk to metrics 2.0 and Graph-Explorer</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/introduction_talk_to_metrics2-0_and_graph_explorer/" rel="bookmark">
					<time class="entry-date" datetime="2014-02-23 16:20:32 -0400 -0400">
						February 23, 2014
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>This week I had the opportunity to present <a href="http://dieter.plaetinck.be/metrics_2_a_proposal.html">metrics 2.0</a> and</p>

<p><a href="http://vimeo.github.io/graph-explorer/">Graph-Explorer</a> at the</p>

<p><a href="http://www.meetup.com/Full-Stack-Engineering-Meetup/">Full-stack engineering meetup</a>.</p>

<p><br/></p>

<p>I could easily talk for hours about this stuff but the talk had to be about 20 minutes so I paraphrased it to be only</p>

<p>about the basic concepts and ideas and some practical use cases and features.  I think it serves as a pretty good introduction</p>

<p>and a showcase of the most commonly used features (graph composition, aggregations and unit conversion), and some new stuff such as alerting and dashboards.</p>

<p>

The talk also briefly covers native metrics 2.0 through your metrics pipeline using <a href="https://github.com/vimeo/statsdaemon">statsdaemon</a> and <a href="https://github.com/vimeo/carbon-tagger">carbon-tagger</a>.  I'm psyched that by formatting metrics at the source a little better and having an aggregation daemon that expresses the performed operations by updating the metric tags, all the foundations are in place for some truly next-gen UI's and applications (one of them already being implemented: graph-explorer can pretty much generate all graphs I need by just phrasing an information need as a proper query)

</p>

<p>

The <a href="http://vimeo.com/87194301">video</a> and <a href="https://www.slideshare.net/Dieterbe/metrics2-0graphexplorer20140218" title="Metrics 2.0 &amp; Graph-Explorer" target="_blank">slides</a> are available and also embedded below.

</p>

<iframe src="//player.vimeo.com/video/87194301?title=0&amp;byline=0&amp;portrait=0&amp;color=33a352"

width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

<iframe src="http://www.slideshare.net/slideshow/embed_code/31440297" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>

<p>

I would love to do another talk that allows me to dive into more of the underlying ideas, the benefits of metrics2.0 for things like metric storage systems, graph renderers, anomaly detection, dashboards, etc.

<br/>

<br/>

Hope you like it!

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/pixie/">Pixie: simple photo management using directory layouts and tags.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/pixie/" rel="bookmark">
					<time class="entry-date" datetime="2013-12-30 14:46:32 -0400 -0400">
						December 30, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>So you have a few devices with pictures, and maybe some additional pictures your friends sent you.  You have a lot of pictures of the same thing and probably too high of a resolution.  Some may require some editing.  How do you easily create photo albums out of this mess?  And how do you do it in a way</p>

<p>that keeps a simple and elegant, yet flexible file/directory layout for portability and simplicity?</p>

<p><br/></p>

<p><br/>I couldn&rsquo;t find a tool that I liked, so I rolled my own: <a href="https://github.com/Dieterbe/pixie">Pixie</a>.</p>

<p><br/></p>

<p>It gives you vim-like keybindings to navigate pictures, create edits (stored in a &ldquo;mirror directory&rdquo;) and add/remove tags to pictures.  (Because n:m tag relationships are basically a must for organizing things and don&rsquo;t work on any common filesystem)</p>

<p>To generate &ldquo;album&rdquo; directories, just define which tags they should(n&rsquo;t) match and run the script that synchronizes an export directory by symlinking (or resizing) the correct files into them.</p>

<p>Note the source directory stays unaltered so you can easily keep syncing with devices and/or people.</p>

<p><br/>What used to be a pain in the butt for me is now a pretty pleasant experience.</p>

<p><br/>Does this workflow make sense to you? Is this useful to you? Why (not) ?</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
                <a href="http://localhost:1313//tags/photos/index.html" rel="tag">photos</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/vimeo_holiday_special_and_other_great_videos/">Vimeo holiday special &amp; other great videos</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/vimeo_holiday_special_and_other_great_videos/" rel="bookmark">
					<time class="entry-date" datetime="2013-12-22 12:46:32 -0400 -0400">
						December 22, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

We (the <a href="http://vimeo.com/staff">Vimeo Staff</a>) just <a href="https://vimeo.com/blog/post:602">released</a> the <a href="http://vimeo.com/82236972">2013 Vimeo Holiday Special</a>, embedded below.

<br/>(and I have a line in it! "Who's behind this?")

</p>

<p>

<iframe src="//player.vimeo.com/video/82236972?title=0&amp;byline=0&amp;portrait=0&amp;color=33a352" width="500" height="211" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>



<br><br>Here's <a href="https://vimeo.com/55646323">last year's Holiday video</a> which is just as cool.

</p>

<p>

Not a lot of people know this but we actually produce a bunch of our own videos.

<br/>

<br/>

Some of my favorites include <a href="https://vimeo.com/3718294">Auto-tuning</a>,

<a href="https://vimeo.com/5425957">Idea</a>, <a href="https://vimeo.com/53026635">Vimeo goes bowling</a>,

<a href="https://vimeo.com/46701971">Vimeo production reel 2012</a>,

<a href="https://vimeo.com/35514005">Open your eyes to the new vimeo</a> and

<a href="https://vimeo.com/7100569">Brad!</a>.

</p>

<p>

While I'm at it...

Over the last 2 years I've discovered many great videos from our diverse user base through staff screenings and by just browsing around.

I've narrowed it down to this list of all-time favorites:

<br>

<a href="https://vimeo.com/59956490">To this day</a>,

<a href="https://vimeo.com/43005056">The Art of Making, Alma Flamenca</a>,

<a href="https://vimeo.com/79010983">Record Breaker</a>,

<a href="https://vimeo.com/56433514">Malaria</a>,

<a href="https://vimeo.com/43800150">Portal: Terminal velocity (must-see for all half-life/portal fans)</a>,

<a href="https://vimeo.com/24456787">The arctic light</a>,

<a href="https://vimeo.com/36100188">iPhone 4s // Thailand</a>,

<a href="https://vimeo.com/42619545">Ending Overfishing</a>.

<br/>

I hope you have some time to check out this amazing content! (protip: watch later button & couch mode / smart tv vimeo app)

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/vimeo/index.html" rel="tag">vimeo</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/metrics_2_a_proposal/">Metrics 2.0: a proposal</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/metrics_2_a_proposal/" rel="bookmark">
					<time class="entry-date" datetime="2013-09-14 11:29:32 -0400 EDT">
						September 14, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

<ul>

<li>

Graphite's metrics are strings comprised of dot-separated nodes which, due to their ordering, can be represented as a tree.

Many other places use a similar format (stats in /proc etc).

</li>

<li>

OpenTSDB's metrics are shorter, because they move some of the dimensions (server, etc) into key-value tags.

</li>

</ul>

<b>I think we can do better...</b>

<br/>

I think our metrics format is restrictive and we do our self a disservice using it:



<ul>

<li>the metrics are not fully self-describing (they need additional information to become useful for interpretation, e.g. a unit, and information about what they mean)</li>

<li>they impose needless limitations (no dots allowed, strict ordering)</li>

<li>aggregators have no way to systematically and consistently express the operation they performed</li>

<li>we can't include additional information because that would create a new metric ID</li>

<li>we run into scale/display/correctness problems because storage rollups, rendering consolidation,

as well as aggregation api functions need to be aware of how the metric

is to be aggregated, and this information is often lacking or incorrect.</li>

<li>there's no consistency into what information goes where or how it's called (which field is the one that has the hostname?)</li>

</ul>

<b>We can solve all of this.  In an elegant way, even!</b>

</p>

<p>

Over the past year, I've been working a lot on a graphite dashboard (<a href="http://vimeo.github.io/graph-explorer/">Graph-Explorer</a>).

It's fairly unique in the sense that it leverages what I call "structured metrics" to facilitate a powerful way to

build graphs dynamically.  (see also

<a href="http://dieter.plaetinck.be/a_few_common_graphite_problems_and_how_they_are_already_solved.html">

"a few common graphite problems and how they are already solved"</a> and the

<a href="http://vimeo.github.io/graph-explorer/">Graph-Explorer homepage</a>).

I implemented two solutions. (

<a href="https://github.com/vimeo/graph-explorer/tree/master/structured_metrics">structured_metrics</a>,

<a href="https://github.com/vimeo/carbon-tagger">carbon-tagger</a>) for creating, transporting and using these metrics

on which dashboards like Graph-Explorer can rely.

The former converts graphite metrics into a set of key-value pairs (this is "after the fact" so a little annoying),

carbon-tagger uses a prototype extended carbon (graphite) protocol (called "proto2") to maintain an elasticsearch tags database on the fly, but

the format proved too restrictive.

</p>

<p>

Now for <a href="https://github.com/graphite-ng/graphite-ng">Graphite-NG</a> I wanted to rethink the metric, taking the simplicity of Graphite,

the ideas of structured_metrics and carbon_tagger (but less annoying) and OpenTSDB (but more powerful), and propose a new way

to identify and use metrics and organize tags around them.

</p>

<p><p></p>

<p>The proposed ingestion (carbon etc) protocol looks like this:</p>

<pre><![CDATA[

<intrinsic_tags>  <extrinsic_tags> <value> <timestamp>

]]></pre>

<ul>

<li>

intrinsic_tags and extrinsic_tags are space-separated strings, those strings can be a regular value, or a key=value pair and they describe one

dimension (aspect) of the metric.

    <ul>

    <li>an <b>intrinsic</b> tag contributes to the identity of the metric. If this section changes, we get a new metric</li>

    <li>an <b>extrinsic</b> tag provides additional information about the metric.  changes in this set doesn't change the metric identity</li>

    </ul>

<pre><code>Internally, the metric ID is nothing more than the string of intrinsic tags you provided (similar to Graphite style).

When defining a new metric, write down the intrinsic tags/nodes (like you would do with Graphite except you can use &lt;b&gt;any order&lt;/b&gt;), and then keep 'em in that order

(to keep the same ID).  &lt;b&gt;The ordering does not affect your ability to work with the metrics in any way&lt;/b&gt;.

The backend indexes the tags and you'll usually rely on those to work with the metrics, and rarely with the ID itself.
</code></pre>

<p></li></p>

<p><li></p>

<p>A metric in its basic form (without extrinsic tags) would look like:</p>

<pre><![CDATA[

graphite: stats.gauges.db15.mysql.bytes_received

opentsdb: mysql.bytes_received host=db15

proposal: service=mysql server=db15 direction=in unit=B

]]></pre>

<p></li></p>

<p><li></p>

<p>key=val tags are most useful: the key is a name of the aspect, which allows you to express &ldquo;I want to see my metrics averaged/summed/.. by this</p>

<p>aspect, in different graphs based on another aspect, etc&rdquo;</p>

<p>(<a href="https://github.com/vimeo/graph-explorer/wiki/GEQL#special-statements">e.g. GEQL statements</a>),</p>

<p>and because you can use them for filtering,</p>

<p>so I highly recommend to take some time to come up with a good key for every tag.</p>

<p>However sometimes it can be hard to come up with a concise, but descriptive key for a tag, hence they are not mandatory.</p>

<p>For regular words without a key, the backend will assign dummy keys (&lsquo;n1&rsquo;, &lsquo;n2&rsquo;, etc) to facilitate those features without hassle.</p>

<p>Note the two spaces between intrinsic and extrinsic.</p>

<p>With extrinsic tags the example could look like:</p>

<pre>

service=mysql server=db15 direction=in unit=B  src=diamond processed_by_statsd env=prod

</pre>

<p>to mean that this metric came from diamond, went through statsd, and that the machine is currently in the prod environment</p>

<p></li></p>

<p><li>Tags can contain any character except whitespace and null.</p>

<p>Specifically: dots (great for metrics that contain an ip, histogram bin, a percentile, etc) and slashes (unit can be &lsquo;B/s&rsquo; too)</p>

<p></li></p>

<p><li>the unit tag is mandatory. It allows dashboards to show the proper label on the Y-axis, and to do conversions</p>

<p>(for example in Graph Explorer, if your metric is an amount of B used on a disk drive, and you request the increase in GB per day.</p>

<p>it will automatically convert (and derive) the data).</p>

<p>We should aim for standardization of units.  I maintain a table of</p>

<p><a href="https://github.com/vimeo/graph-explorer/wiki/Units-&-Prefixes">standardized units &amp; prefixes</a> which uses SI and IEC as starting point,</p>

<p>and extends it with units commonly used in IT.</li></p>

<p></ul></p>

<h3>Further thoughts/comparisons</h3>

<h4>General</h4>

<ul>

<li>

The concept of extrinsic tags is something I haven't seen before, but I think it makes a lot of sense because we often want to pass extra information

but we couldn't because it would create a new metric.  It also makes the metrics more self-describing.</li>

<li>Sometimes it makes sense for tags only to apply to a metric in a certain time frame.  For intrinsic tags this is already the case by design,

for extrinsic tags the database could maintain a from/to timestamp based on when it saw the tag for the given metric</li>

<li>metric finding: besides the obvious left-to-right auto-complete and pattern matching (which allows searching for substrings in any order), we can now also build

an interface that uses <a href="http://www.elasticsearch.org/guide/reference/api/search/facets/">facet searches</a>

to suggest/auto-complete tags, and filter by toggling on/off tags.

</li>

<li>Daemons that sit in the pipeline and yield aggregated/computed metrics can do this in a much more useful way.  For example a statsd daemon

that computes a rate per second for metrics with 'unit=B' can yield a metric with 'unit=B/s'.</li>

<li>

    We can <a href="https://github.com/vimeo/graph-explorer/wiki/Consistent-tag-keys-and-values">standardize tag keys and values</a>, other than just the unit tag.

    Beyond the obvious compatibility benefits between tools, imagine querying for:

    <ul>

    <li>'unit=(Err|Warn)' and getting all errors and warnings across the entire infrastructure (no matter which tool generated the metric), and grouping/drilling down by tags</li>

    <li>'$hostname direction=in' and seeing everything coming in to the server, network traffic on the NIC, as well as files being uploaded.</li>

    </ul>

<pre><code>Also, metrics that are summary statistics (i.e. with statsd) will get intrinsic tags like 'stat=median' or 'stat=upper_90'.

This has three fantastic consequences:

&lt;ul&gt;

&lt;li&gt;aggregation (rollups from higher to lower resolution) knows what to do without configurating aggregation functions, because it can be deduced from the metric itself&lt;/li&gt;

&lt;li&gt;renderers that have to render &gt;1 datapoints per pixel, will produce more accurate, relevant graphs because they can deduce what the metric is meant to represent&lt;/li&gt;

&lt;li&gt;API functions such as &quot;cumulative&quot;, &quot;summarize&quot; and &quot;smartSummarize&quot; don't need to be configured with an explicit aggregation function&lt;/li&gt;

&lt;/ul&gt;
</code></pre>

<p></li></p>

<p></ul></p>

<h4>From the Graphite perspective, specifically</h4>

<ul>

<li>dots and slashes are allowed</li>

<li>The tree model is slow to navigate, sometimes hard to find your metrics, and makes it really hard to write

queries (target statements) that need metrics in different locations of the tree (because the only way to retrieve multiple metrics in a target is wildcards)</li>

<li>The tree model causes people to obsess over node ordering to find the optimal tree organization, but no ordering allows all query use cases anyway,

so you'll be limited no matter how much time you spend organising metrics.</li>

<li><i>We do away with the tree entirely.  A multi-dimensional tag database is way more powerful</i>and allows for great "metric finding" (see above)</li>

<li>Graphite has no tags support</li>

<li>you don't need to configure aggregation functions anymore, less room for errors ("help, my scale is wrong when i zoom out"), better rendering</li>

<li>when using statsd, you don't need prefixes like "stats.".  In fact that whole prefix/postfix/namespacing thing becomes moot</li>

</ul>

<h4>From the OpenTSDB perspective, specifically</h4>

<ul>

<li>allow dots anywhere</li>

<li>'http.hits' becomes 'http unit=Req' (or 'unit=Req http', as long as you pick one and stick with it)</li>

<li>probably more, I'm not very familiar with it</li>

</ul>

<h4>From the structured_metrics/carbon-tagger perspective, specifically</h4>

<ul>

<li>not every tag requires a key (on metric input), but you still get the same benefits</li>

<li>You're not forced to order the tags in any way</li>

<li>sometimes relying on the 'plugin' tag is convenient but it's not really intrinsic to the metric, now we can use it as extrinsic tag</li>

</li>

</ul>

<h3>Backwards compatibility</h3>

<!-- These changes may seem a little invasive, but it's actually not that bad: TODO is that so?-->

<p><ul></p>

<p><li>Sometimes you merely want the ability to copy a &ldquo;metric id&rdquo; from the app source code, and paste it in a &ldquo;/render/?target=&rdquo; url to see that particular metric.</p>

<p>You can still do this: copy the intrinsic tags string and you have the id.</li></p>

<p><li>if you wanted to, you could easily stay compatible with the official graphite protocol:</p>

<p>for incoming metrics, add a &lsquo;unit=Unknown&rsquo; tag and optionally turn the dots into</p>

<p>spaces (so that every node becomes a tag), so you can mix old-style and new style metrics in the same system.</p>

<p></li></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/graphite-ng_a-next-gen-graphite-server-in-go/">Graphite-ng: A next-gen graphite server in Go.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/graphite-ng_a-next-gen-graphite-server-in-go/" rel="bookmark">
					<time class="entry-date" datetime="2013-09-07 20:54:20 -0400 EDT">
						September 7, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

I've been a <a href="https://github.com/graphite-project/">graphite</a> contributor for a while (and still am).  It's a <i>great</i> tool for timeseries metrics.

Two weeks ago I started working on <a href="https://github.com/graphite-ng/graphite-ng">Graphite-ng</a>:

it's somewhere between an early clone/rewrite, a redesign, and an experiment playground, written in <a href="http://golang.org">Golang</a>.

The focus of my work so far is the API web server, which is a functioning prototype, it answers requests like</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&lt;!</span>[CDATA[

<span style="color: #BB6688">/render/</span><span style="color: #666666">?</span>target<span style="color: #666666">=</span>sum(scale(stats.web2,<span style="color: #666666">5.12</span>),derivative(stats.web2))

]]<span style="color: #666666">&gt;</span>
</pre></div>
</p>

<p>

I.e. it lets you retrieve your timeseries, processed by function pipelines which are setup on the fly based on a spec in your http/rest arguments.

Currently it only fetches metrics from text files but I'm working on decent metrics storage as well.

</p>

<p>

There's a few reasons why I decided to start a new project from scratch:

<ul>

<li>With graphite, it's a whole ordeal to get all components properly installed.  Deploying in production environments is annoying and even more so

when you just want a graphite setup on your personal netbook.</li>

<li>the graphite development process slows contributors down a lot.  A group of 3rd/4th generation maintainers jointly manages the project, but it's hard to get big changes through,

because they (understandably) don't feel authoritative enough to judge those changes and the predecessors have disappeared or are too busy with other things.  And also ...</li>

<li>there's a high focus on backwards compatibility, which can be a good thing, but it's hard to get rid of old design mistakes,

especially when fixing unclear (but arguably broken) early design decisions (or oversights) lead to different outputs</li>

<li>Graphite suffers feature creep: it has an events system, a PNG renderer, an elaborate composer web UI, etc.

There's a lot of internal code dependencies holding you back from focusing on a specific problem</li>

<li>Carbon (the metrics daemon) has a pretty hard performance and scalability ceiling.

<a href="https://github.com/pcn/carbon/blob/new-sending-mechanism/Why_Spooling.md">Peter's article explains this well</a>; I think we'll need some form of

rewrite.   Peter suggests some solutions but they are basically workarounds for Python's shortcomings.  I'm also thinking of using <a href="http://pypy.org/">pypy</a>.

But last time I checked pypy just wasn't there yet.</li>

<li>I want to become a good Go programmer</li>

</ul>



<i>Note: the Graphite project is still great</i>, the people managing do good work, but it's fairly natural for a code base that large and complicated

to end up in this situation.<i>I'm not at all claiming graphite-ng is, or ever will be better</i> but I need a fresh start to try some disruptive ideas,

using Go means having a runtime very suited for concurrency and parallelism, you can compile the whole thing down into a single executable file,

and its performance looks promising.  Leaving out the non-essentials (see below) allows for an elegant and surprisingly small, hackable code base.

</p>

<p>

The API server I developed sets up a processing pipeline as directed by your query: every processing function runs in a goroutine

for concurrency and the metrics flow through using Go channels.  It literally compiles a program and executes it.  You can add your own functions

to collect, process, and return metrics by writing simple plugins.

<br/>As for timeseries storage, for now it uses simple text files,

but I'm experimenting and thinking what would be the best metric store(s) that works on small scale

(personal netbook install) to large scale ("I have millions of metrics that need to be distributed across nodes,

the system should be HA and self-healing in failure scenarios, easily maintainable, and highly performant") and is still easy to deploy, configure and run.

Candidates are <a href="https://github.com/kisielk/whisper-go">whisper-go</a>, <a href="https://code.google.com/p/kairosdb/">kairosdb</a>,

my own <a href="https://github.com/graphite-ng/graphite-ng/tree/master/carbon-es">elasticsearch experiment</a> etc.

<br/>I won't implement rendering images, because I think client-side rendering using something like <a href="https://github.com/vimeo/timeserieswidget">timeserieswidget</a>

is superior.  I can also leave out events because <a href="https://github.com/Dieterbe/anthracite/">anthracite</a> already does that.

There's a ton of dashboards out there (<a href="http://vimeo.github.io/graph-explorer/">graph-explorer</a>, <a href="https://github.com/obfuscurity/descartes">descartes</a>, <a href="http://graphite.readthedocs.org/en/1.0/tools.html">etc</a>) so that can be left out as well.

</p>

<p>For more information, see <a href="https://github.com/graphite-ng/graphite-ng">the Graphite-ng homepage</a>.</p>

<p><br/></p>

<p><br/>PS: props to <a href="http://felixge.de/">Felix Geisendorfer</a> who suggested a graphite clone in Go first,</p>

<p>it seemed like a huge undertaking but the right thing to do, I had some time so I went for it!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/golang/index.html" rel="tag">golang</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/a_few_common_graphite_problems_and_how_they_are_already_solved/">A few common graphite problems and how they are already solved.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/a_few_common_graphite_problems_and_how_they_are_already_solved/" rel="bookmark">
					<time class="entry-date" datetime="2013-04-04 08:54:20 -0400 EDT">
						April 4, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h4>metrics often seem to lack details, such as units and metric types</h4>

<p>looking at a metric name, it&rsquo;s often hard to know</p>

<ul>

<li>the unit a metric is measured in (bits, queries per second, jiffies, etc)</li>

<li>the "type" (a rate, an ever increasing counter, gauge, etc)</li>

<li>the scale/prefix (absolute, relative, percentage, mega, milli, etc)</li>

</ul>

<p><a href="#structured_metrics">structured_metrics</a> solves this by adding these tags to graphite metrics:</p>

<ul>

<li><pre>what</pre>

<i>what is being measured?: bytes, queries, timeouts, jobs, etc</i></li>

<li><pre>target_type</pre>

<i>must be one of the existing <a href="https://github.com/vimeo/graph-explorer#enhanced-metrics">clearly defined target_types</a> (count, rate, counter, gauge)

<br/>These match statsd metric types (i.e. rate is per second, count is per flushInterval)</i></li>

</ul>

<p>In <a href="#graph_explorer">Graph-Explorer</a> these tags are mandatory, so that it can show the unit along with the prefix (i.e. <i>&lsquo;Gb/s&rsquo;</i>) on the axis.</p>

<p><br/></p>

<p>This will also allow you to request graphs in a different unit and the dashboard will know how to convert (say, Mbps to GB/day)</p>

<h4>tree navigation/querying is cumbersome, metrics search is broken.  How do I organize the tree anyway?</h4>

<p>the tree is a simplistic model. There is simply too much dimensionality that can&rsquo;t be expressed in a flat tree.</p>

<p>There&rsquo;s no way you can organize it so that will it satisfy all later needs.</p>

<p>A tag space like <a href="#structured_metrics">structured_metrics</a> makes it <b>obsolete</b>.</p>

<p>with <a href="#graph_explorer">Graph-Explorer</a> you can do (full-text) search on metric name, by any of their tags, and/or by added metadata.</p>

<p>So practically you can filter by things like server, service, unit (e.g. anything expressed in bits/bytes per second,</p>

<p>or anything denoting errors).  All this irrespective of the source of a metric or the &ldquo;location in the tree&rdquo;.</p>

<h4>no interactivity with graphs</h4>

<p><a href="#timeserieswidget">timeserieswidget</a> allows you to easily add interactive graphite graph objects to html pages.</p>

<p>You get modern features like togglable/reorderable metrics, realtime switching between lines/stacked,</p>

<p>information popups on hoover, highlighting, smoothing, and (WIP) realtime zooming.</p>

<p>It has a canvas (<a href="http://www.flotcharts.org/">flot</a>) and svg (<a href="http://code.shutterstock.com/rickshaw/">rickshaw/d3</a>) backend.</p>

<p>So it basically provides a simpler api to use these libraries specifically with graphite.</p>

<p><br/>There&rsquo;s a bunch of different graphite dashboards with different takes on graph composition/configuration and workflow, but the actual rendering of graphs</p>

<p>usually comes down to plotting some graphite targets with a legend.  timeserieswidget aims to be a drop-in plugin that brings all modern features</p>

<p>so that different dashboards can benefit from a common, shared codebase, because <b>static PNGs are a thing from the past</b></p>

<p>

screenshot:

<br/>

<a href="/files/timeserieswidget-rickshaw-stacked.png"><img height="300" src="/files/blog/github/vimeo/timeserieswidget/timeserieswidget-rickshaw-stacked.png" title="yes I'm aware of the irony of a static screenshot of an interactive widget :)"></img></a>

</p>

<h4>events lack text annotations, they are simplistic and badly supported</h4>

<p>Graphite is a great system for time series metrics.  Not for events.  metrics and events are very different things across the board.  drawAsInFinite() is a bit of a hack.</p>

<ul>

<li><a href="#anthracite">anthracite</a> is designed specifically to manage events.

<br/>It brings extra features such as different submission scripts, outage annotations, various ways to see events and reports with uptime/MTTR/etc metrics.</li>

<li><a href="#timeserieswidget">timeserieswidget</a> displays your events on graphs along with their metadata (which can be just some text or even html code).

<br/>this is where client side rendering <i>shines</i></li>

</ul>

<p>

screenshots:

<br/>

<a href="https://raw.github.com/Dieterbe/anthracite/master/screenshots/screenshot-table.png"><img height="300" src="/files/blog/github/Dieterbe/anthracite/screenshot-table.png"></img></a>

<a href="https://raw.github.com/vimeo/timeserieswidget/master/screenshots/flot-annotated-event.png"><img height="300" src="/files/blog/github/vimeo/timeserieswidget/flot-annotated-event.png"></img></a>

</p>

<h4>cumbersome to compose graphs</h4>

<p>There&rsquo;s basically two approaches:</p>

<ul>

<li>interactive composing: with the graphite composer, you navigate through the tree and apply functions.

This is painfull, dashboards like <a href="https://github.com/obfuscurity/descartes">descartes</a> and

<a href="https://github.com/paperlesspost/graphiti">graphiti</a> can make this easier</li>

<li>use a dashboard that uses predefined templates (<a href="https://github.com/ripienaar/gdash">gdash</a> and others)

They often impose a strict navigation path to reach pages which may or may not give you the information you need (usually less or way more)</li>

</ul>

<p>With both approaches, you usually end up with an ever growing pile of graphs that you created and then keep for reference.</p>

<p><br/>This becomes unwieldy but is useful for various use cases and needs.</p>

<p><br/>However, <i>neither approach is convenient for changing information needs</i>.</p>

<p><br/>Especially when troubleshooting, one day you might want to compare the rate of increase of open file handles on a set of specific servers to the traffic</p>

<p>on given network switches, the next day it&rsquo;s something completely different.</p>

<p><br/>With <a href="#graph_explorer">Graph-Explorer</a>:</p>

<ul>

<li>GE gives you a query interface on top of <a href="#structure_metrics">structured_metric</a>'s tag space.  this enables a bunch of things (see above)</li>

<li>you can yield arbitrary targets for each metric, to look at the same thing from a different angle (i.e. as a rate with `derivative()` or as a daily summary),

and you can of course filter by angle</li>

<li><b>You can group metrics into graphs by arbitrary tags</b> (e.g. you can see bytes used of all filesystems on a graph per server, or <i>compare servers on a graph per filesystem</i>).

<b>This feature always results in the "wow that's really cool" every time I show it</b></li>

<li>GE includes 'what' and 'target_type' in the group_by tags by default so basically, if things are in a different unit (B/s vs B vs b etc) it'll put them in

separate graphs (controllable in query)</li>

<li>GE automatically generates the graph title and vertical title (always showing the 'what' and the unit), and shows all metrics' extra tags.

This also gives you a lot of inspiration to modify or extend your query</li>

</ul>

<p>

<a href="/files/blog/github/vimeo/graph-explorer/screenshot.png">

<img src="/files/blog/github/vimeo/graph-explorer/screenshot.png" width="619" height="396"/>

</a>

</p>

<h4>limited options to request a specific time range</h4>

<p><a href="https://github.com/vimeo/graph-explorer#query-parsing-and-execution">GE&rsquo;s query language</a> supports freeform <code>from</code> and <code>to</code> clauses.</p>

<h3>Referenced projects</h3>

<ul>

<li>

<a href="https://github.com/Dieterbe/anthracite" id="anthracite">anthracite</a>:

<br/>

event/change logging/management with a bunch of ingestion scripts and outage reports

</li>

<li>

<a href="https://github.com/vimeo/timeserieswidget" id="timeserieswidget">timeserieswidget</a>:

<br/>

jquery plugin to easily get highly interactive graphite graphs onto html pages (dashboards)

</li>

<li>

<a href="https://github.com/vimeo/graph-explorer/tree/master/structured_metrics" id="structured_metrics">structured_metrics</a>:

<br/>

python library to convert graphite metrics tree into a tag space with clearly defined units and target types, and arbitrary metadata.

</li>

<li>

<a href="https://github.com/vimeo/graph-explorer" id="graph_explorer">graph-explorer</a>:

<br/>

dashboard that provides a query language so you can easily compose graphs on the fly to satisfy varying information needs.

</li>

</ul>

<p>All tools are designed for integration with other tools and each other.</p>

<p>Timeserieswidget gets data from anthracite, graphite and elasticsearch.</p>

<p>Graph-Explorer uses structured_metrics and timeserieswidget.</p>

<h3>Future work</h3>

<p>There&rsquo;s a whole lot going on in the monitoring space, but I&rsquo;d like to highlight a few things I personally want to work more on:</p>

<ul>

<li>

I spoke with Michael Leinartas at Monitorama (and there's also a <a href="https://answers.launchpad.net/graphite/+question/223956">launchpad thread</a>).

We agreed that native tags in graphite are the way forward.  This will address some of the pain points

I'm already fixing with structured_metrics but in a more native way.

I envision submitting metrics would move from:

<pre>

stats.serverdb123.mysql.queries.selects 895 1234567890

</pre>

to something more along these lines:

<pre>

host=serverdb123 service=mysql type=select what=queries target_type=rate 895 1234567890

host=serverdb123 service=mysql type=select unit=Queries/s 895 1234567890

h=serverdb123 s=mysql t=select queries r 895 1234567890

</pre>

</li>

<li>switch Anthracite backend to ElasticSearch for native integration with logstash data (and allow you to use kibana)</li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/hi_planet_devops_and_infratalk/">Hi Planet Devops and Infratalk</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/hi_planet_devops_and_infratalk/" rel="bookmark">
					<time class="entry-date" datetime="2013-03-24 11:36:20 -0400 EDT">
						March 24, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>This <a href="http://dieter.plaetinck.be">blog</a> just got added to <a href="http://www.planetdevops.net/">planet devops</a> and <a href="http://infra-talk.org/">infra-talk</a>,</p>

<p>so for my new readers: you might know me as Dieterbe on irc, <a href="https://github.com/Dieterbe">github</a> or <a href="https://twitter.com/Dieter_be">twitter</a>.</p>

<p>Since my <a href="/moving-to-nyc.html">move from Belgium to NYC</a> (to do backend stuff at Vimeo) I&rsquo;ve started writing more about devops-y topics</p>

<p>(whereas I used to write more about general hacking and</p>

<p><a href="/tag/arch">arch linux release engineering and (automated) installations</a>).</p>

<p>I&rsquo;ll mention some earlier posts you might be interested in:</p>

<ul>

<li><a href="/profiling_and_behavior_testing_processes_daemons_devopsdays_nyc.html">Profiling and behavior testing of processes and daemons, and Devopsdays NYC</a></li> 

<li><a href="/graph-explorer-a-graphite-dashboard-unlike-any-other.html">Graph-Explorer: A graphite dashboard unlike any other</a></li>

<li><a href="/client-side-rendered-graphite-charts-for-all.html">Client-side rendered, highly interactive graphite charts for all</li>

<li><a href="/dell_crowbar_openstack_swift.html">Dell crowbar openstack swift</a></li>

<li><a href="/anthracite-event-database-enrich-monitoring-dashboards-visual-numerical-analysis-events-business-impact.html">

Anthracite, an event/change management database</a> to track what has a business and/or operational impact and show annotated events on dashboards</li>

<li><a href="/histogram-statsd-graphing-over-time-with-graphite.html">Histograms in statsd, and graphing them over time with graphite</a></li>

<li><a href="/stop-abusing-si-prefixes.html">stop abusing SI prefixes</a> cause 1000 &ne; 1024</li>

<li><a href="/what_the_open_source_community_can_learn_from_devops.html">What the open source community can learn from devops</a></li>

</ul>

<p>FWIW, I&rsquo;m attending <a href="http://monitorama.com">Monitorama</a> next weekend in Boston.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/profiling_and_behavior_testing_processes_daemons_devopsdays_nyc/">Profiling and behavior testing of processes and daemons, and Devopsdays NYC</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/profiling_and_behavior_testing_processes_daemons_devopsdays_nyc/" rel="bookmark">
					<time class="entry-date" datetime="2013-01-21 15:25:14 -0400 -0400">
						January 21, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h3>Profiling a process run</h3>

<p><a href="https://github.com/Dieterbe/profile-process"></p>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/presentation-simple-black-box/images/profile_io.png" width="100px" height="100px"/></p>

<p></a></p>

<p>I wanted the ability to run a given process and get</p>

<p><br/>a plot of key metrics (cpu usage, memory usage, disk i/o) throughout the duration of the process run.</p>

<p><br/>Something light-weight with minimal dependencies so I can easily install it on a server for a one-time need.</p>

<p><br/>Couldn&rsquo;t find a tool for it, so I wrote <a href="https://github.com/Dieterbe/profile-process">profile-process</a></p>

<p><br/>which does exactly that in &lt;100 lines of python.</p>

<p><br/></p>

<p><br/></p>

<h3>black-box behavior testing processes/daemons</h3>

<p><a href="https://github.com/vimeo/simple-black-box"></p>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/presentation-simple-black-box/images/screenshot-no-pause.png" width="150px" height="100px"/></p>

<p></a></p>

<p>I wrote <a href="https://github.com/vimeo/simple-black-box">simple-black-box</a> to do this.</p>

<p><br/>It runs the subject(s) in a crafted sandbox, sends input (http requests, commands, &hellip;)</p>

<p><br/>and allows to make assertions on http/statsd requests/responses, network listening state, processes running, log entries,</p>

<p><br/>file existence/checksums in the VFS/swift clusters, etc.</p>

<p><br/>Each test-case is a scenario.</p>

<p><br/>It also can use <a href="http://logstash.net/">logstash</a> to give a centralized &ldquo;distributed stack trace&rdquo; when you need to debug a failure after</p>

<p>multiple processes interacting and acting upon received messages; or to compare behavior across different scenario runs.</p>

<p><br/>You can integrate this with profile-process to compare runtime behaviors across testcases/scenarios.</p>

<h3>Simple-black-box talk @ Devopsdays NYC</h3>

<p>I did a quick <a href="http://devopsdays.org/events/2012-newyork/proposals/SimpleBlackBox/">5min talk</a>, despite some display/timing issues it was well received.</p>

<p>(in particular I got some really positive feedback from one person and still wonder if that was a recruiter attempting to</p>

<p>hire me -but being shy about it&hellip;- it was quite awkward)</p>

<p><br/>&rarr; <a href="/files/presentation-simple-black-box/slideshow.html">slides</a></p>

<p><br/>&rarr; <a href="http://new.livestream.com/devopsdaysorg/nyc2013/videos/9609498">raw uncut video</a>.  Go to &lsquo;New York, January 18th, 2013&rsquo; from 02:36:25 to 02:41:15</p>

<h3>More random thoughts about Devopsdays NYC</h3>

<p><center><a href="http://devopsdays.org/events/2012-newyork/"><img src="/files/blog/devopsdays/workers.png" width="300px" height="300px"/></a></center></p>

<ul>

<li>I'm getting tired of people on stage making a big revelation out of adding an index to a database column.

This happens too often at web-ops/devops conferences,  it's embarrassing.

But at least it's not like the "how we made our site 1000x faster"-style Velocity talks that should have been named "caching and query optimization for newbies"

</li>

<li>Paperless post confirms again they got their act together and keeps us up to date with their great work.

<a href="http://dev.paperlesspost.com/">Follow them.</a></li>

<li>

<a href="http://devopsdays.org/events/2012-newyork/proposals/KnightsOftheProvisioningRoundTable/">Knights of the Provisioning Round Table - Bare Metal Provisioning</a>

was mostly (to my surprise) 4 individuals presenting their solution instead of a real round-table, but (to my surprise again) they were not as similar/repetitive as I expected

and the pros/cons of all solutions were compared more in depth than I dared to hope.

I <a href="/dell_crowbar_openstack_swift.html">covered dell crowbar before</a> and like it, though I wonder when this thing is actually gonna be reliable.

</li>

<li>Dave Zwieback and John Willis gave hilarious talks</li>

<li>Tried to start an open space discussion around <b>collaboration patterns and anti-patterns</b>, which I think is a very interesting subject,

  because <b>how individuals in a team collaborate is crucial to success</b>, but yet very little is written about it (that I could find).

  I would hope we can distill the years of aggregate experience of people into concise patterns and anti-patterns and document how (not) well they work

  for development styles (such as agile/scrum), team size, company structure/hierarchy, roadmap/technical debt pressure, etc.  And especially in light

  of any of these things changing, because I've found <b>people can be very change-resistive</b>.

</li>

<li><a href="http://devopsdays.org/events/2012-newyork/proposals/DevopsAtObamaForAmerica/">DevOps At Obama for America & The Democratic National Committee</a>

was good, I thought it would be a rehash of what was said at <a href="http://codeforward_newyorkcity.eventbrite.com/">Coding Forward New York City: Meet the Developers Behind the Obama Campaign</a>

but there were a bunch of interesting insights about state of the art technology in here (mostly Amazon stuff)</li>

<li>A bunch of talks where the same could have been said in half the time, or less</li>

</ul>

<p>Random thoughts about some sponsors:</p>

<ul>

<li>Librato is quite cool.

It's basically how my open source tool <a href="https://github.com/vimeo/graph-explorer">graph-explorer</a> would look like after

finishing a bunch of TODO's, combining it with graphite, polishing it all up, and offering it as a hosted solution.

I find it interesting if this is a successful business with only such a limited scope</li>

<li>

Even cooler is <a href="http://www.datadoghq.com/">datadog</a>.  It goes beyond just metrics and doesn't just provide hosted graphing,

it provides a solution for a philosophy that aims for a centralized insight of all your operational data,

related collaboration and prioritized alerts that are to the point.  They get a lot of things right, the open source world has some catching up to do</li>

</ul>

<p>Interesting that both use Cassandra and free-form tags for flexibility, validating the approach I&rsquo;m taking with graph-explorer.  Now Graphite</p>

<p>could use a distributed metrics storage backend over which one can do map-reduce style jobs to gather intelligence from metrics archives</p>

<p>(maybe based on Cassandra too?), but that&rsquo;s another story.</p>

<p><br/></p>

<p><br/></p>

<p>Anyway, living in NYC with its vibrant ecosystem of devops people and companies organizing plenty of meet-ups and talks on their own</p>

<p>makes it less pressing to have an event like Devopsdays, though it was certainly a good event, thanks to the sponsors and the volunteers.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/graph-explorer-a-graphite-dashboard-unlike-any-other/">Graph-Explorer: A graphite dashboard unlike any other</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/graph-explorer-a-graphite-dashboard-unlike-any-other/" rel="bookmark">
					<time class="entry-date" datetime="2013-01-09 09:25:36 -0400 -0400">
						January 9, 2013
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>The above sounds like a marketing phrase and I&rsquo;m just as skeptical of them as you, but I feel it&rsquo;s in place. Not because GE is necessarily better, but it&rsquo;s certainly <i>different</i>.</p>

<p><br/></p>

<p>

In web operations, mostly when troubleshooting but also for capacity planning,

I often find myself having very specific information needs from my time-series, and these information needs vary a lot over time.

This usually means I need to correlate or compare things that no one anticipated.  Things that relate to specific machines, specific services across machines,

or a few specific metrics of which only the ops team knows how they are related and cross various scopes (application, network, system, etc).

<br/>I should have an easy way to filter metrics by any information in the metric's name or values.

<br/>I should be able to group metrics into graphs the way I want. (example: when viewing filesystem usage of servers,

I should be able to group by server (one graph per server listing the filesystems, but also by mountpoint to compare servers on one graph).

<br/>I should be able -with minimal effort- to view metrics by their gauge/count value,

but also by their rate of change and where appropriate, as a percentage of a maximum (like diskspace used).

<br/>It should be trivial to manipulate the graph interactively (toggling things on/off, switching between lines/stacked mode, inspecting datapoints, zooming, ...).

<br/>It should show me all events, colorcoded by type, with text description, and interactive so that it can use hyperlinks.

<br/>And most of all, the code should be as simple as possible and it should be easy to get running.

</p>

<p><a href="https://github.com/vimeo/graph-explorer"><img width="50%" height="50%" src="/files/blog/github/vimeo/graph-explorer/screenshot.png"/></a></p>

<p>

Dashboards which show specific predefined KPI's (this covers most graphite dashboards) are clearly unsuitable for this use case.

Template-based "metric exploration" dashboards like cacti and ganglia are in my experience way too limited.

Graph composing dashboards (like the stock graphite one, or graphiti) require much manual work to get the graph you want.

I couldn't find anything even close to what I wanted, so I started <a href="https://github.com/vimeo/graph-explorer">Graph-Explorer</a>.

</p>

<p>

The approach I'm taking is using plugins which add metadata to metrics (tags for server, service, mountpoint, interface name, ...),

having them define how to render as a count, as a rate, as a percent of some max allowed value (or a metric containing the max),

and providing a query language which allow you to match/filter metrics, group them into graphs by tag, and render them how you want them.

The plugins promote standardized metric naming and reuse across organisations, not in the least because most correspond to plugins for the

<a href="https://github.com/BrightcoveOS/Diamond">Diamond monitoring agent</a>.

</p>

<p>Furthermore, because it uses <a href="/client-side-rendered-graphite-charts-for-all.html">my graphitejs plugin</a> (which now btw supports flot as a backend for

fast canvas-based graphs and annotated events from <a href="/anthracite-event-database-enrich-monitoring-dashboards-visual-numerical-analysis-events-business-impact.html">anthracite</a>)

 the manual interactions mentioned earlier are supported or at least on the roadmap.

</p>

<p><a href="https://github.com/vimeo/graph-explorer">Graph Explorer</a> is not yet where I want it, but it&rsquo;s already a very useful tool at Vimeo.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/client-side-rendered-graphite-charts-for-all/">Client-side rendered graphite charts for all</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/client-side-rendered-graphite-charts-for-all/" rel="bookmark">
					<time class="entry-date" datetime="2012-11-14 08:49:56 -0400 -0400">
						November 14, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Client-side rendering of charts as opposed to using graphite&rsquo;s server side generated png&rsquo;s</p>

<p>allows various interactivity features, such as:</p>

<ul>

<li>interactive realtime zooming and panning of the graph, timeline sliders</li>

<li>realtime switching between various rendering modes (lines, stacked, etc)</li>

<li>toggling certain targets on/off, reordering them, highlighting their plot when hoovering over the legend, etc</li>

<li>basic data manipulation, such as smoothing to see how averages compare (akin to movingAverage, but now interactive)

<li>popups detailing the exact metrics when hoovering over the chart's datapoints</li>

<li>popups for annotated events. (a good use for <a href="/anthracite-event-database-enrich-monitoring-dashboards-visual-numerical-analysis-events-business-impact.html">anthracite</a>).

</ul>

<p>Those are all features of charting libraries such as <a href="http://www.flotcharts.org/">flot</a> and <a href="http://code.shutterstock.com/rickshaw/">rickshaw</a>,

the only remaining work is creating a library that unleashes the power of such a framework, integrates it with the graphite

api datasource, and makes it available over a simple but powerful api.

<br/>

<br/>That's what I'm trying to achieve with <a href="https://github.com/Dieterbe/graphitejs">github.com/Dieterbe/graphitejs</a>.

<br/>It's based on rickshaw.

<br/>It gives you a JavaScript api to which you specify your graphite targets and some options and it'll give you your graph with extra interactivity sauce.

Note that graphite has a good and rich api, one that is widely known and understood, that's why I decided to keep it exposed and not abstract any more than needed.

</p>

<p><p>There are many graphite dashboards with a different focus, but as far as</p>

<p>plotting graphs, what they need is usually very similar: a plot to draw multiple</p>

<p>graphite targets, a legend, an x-axis, 1 or 2 y-axis, lines or stacked bands, so</p>

<p>I think there&rsquo;s a lot of value in having many dashboard projects share the same code for the actual charts, and I hope we can work together on this.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/anthracite-event-database-enrich-monitoring-dashboards-visual-numerical-analysis-events-business-impact/">Anthracite, an event database to enrich monitoring dashboards and to allow visual and numerical analysis of events that have a business impact</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/anthracite-event-database-enrich-monitoring-dashboards-visual-numerical-analysis-events-business-impact/" rel="bookmark">
					<time class="entry-date" datetime="2012-11-12 08:49:56 -0400 -0400">
						November 12, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h4>Introduction</h4>

<p>Graphite can show events such as <a href="http://codeascraft.etsy.com/2010/12/08/track-every-release/">code deploys</a> and

<a href="https://github.com/joemiller/puppet-graphite_event">puppet changes</a> as vertical markers on your graph.

With the advent of new graphite dashboards and interfaces where we can have popups and annotations to show metadata for each event (by means of client-side rendering),

it's time we have a database to track all events along with categorisation and text descriptions (which can include rich text and hyperlinks).

Graphite is meant for time series (metrics over time), Anthracite aims to be the companion for annotated events.<br>

More precisely, <strong>Anthracite aims to be a database of "relevant events"</strong> (see further down), <strong>for the purpose of enriching monitoring dashboards,

as well as allowing visual and numerical analysis of events that have a business impact</strong> (for the latter, see "<i>Thoughts on incident nomenclature, severity levels and incident analysis</i>" below)<br>

It has a TCP receiver, a database (sqlite3), a http interface to deliver event data in many formats and a simple web frontend for humans.</p>

<p>design goals:</p>

<ul>

    <li>do one thing and do it well.  aim for integration.</li>

    <li>take inspiration from graphite:

        <ul>

        <li>simple TCP protocol</li>

        <li>automatically create new event types as they are used</li>

        <li>run on port 2005 by default (carbon is 2003,2004)</li>

        <li>deliver events in various formats (html, raw, json, sqlite,...)</li>

        <li>stay out of the way</li>

        </ul>

<pre><code>&lt;/li&gt;

&lt;li&gt;super easy to install and run: install dependencies, clone repo. &lt;i&gt;the app is ready to run&lt;/i&gt;&lt;/li&gt;
</code></pre>

<p></ul></p>

<p>I have a working prototype on <a href="https://github.com/Dieterbe/anthracite">github.com/Dieterbe/anthracite</a></p>

<h4>About "relevant events"</h4>

<p>I recommend you submit any event that <strong>has</strong> or <strong>might have</strong> a <strong>relevant</strong> effect on:</p>

<ul>

    <li>your application behavior</li>

    <li>monitoring itself (for example you fixed a bug in metrics reporting. it shouldn't look like the app behavior changed)</li>

    <li>the business (press coverage, viral videos, etc), because this also affects your app usage and metrics.</li>

</ul>

<h4>Formats and conventions</h4>

<p>The TCP receiver listens for lines in this format:</p>

<pre><![CDATA[

<unix_timestamp> <type> <description>

]]></pre>

<p>There are no restrictions for type and description, other than that they must be non-empty strings.

<br/>I do have some suggestions which I'll demonstrate through fictive examples;

<br/>but note that there's room for improvement, see the section below)</p>

<pre><![CDATA[

# a deploy_* type for each project

ts deploy_vimeo.com "deploy e8e5e4 initiated by Nicolas -- github.com/Vimeo/main/compare/foobar..e8e5e4"

ts puppet "all nodes of class web_cluster_1: modified apache.conf; restart service apache"

ts incident_sev2_start "mysql2 crashed, site degraded"

ts incident_sev2_resolved "replaced db server"

ts incident "hurricane Sandy, systems unaffected but power outages among users, expect lower site usage"

# in those exceptional cases of manual production changes, try to not forget adding your event

ts manual_dieter "i have to try this firewall thing on the LB"

ts backup "backup from database slave vimeomysql22"

]]></pre>

<h4>Thoughts on incident nomenclature, severity levels and incident analysis</h4>

<p>Because there are so many unique and often subtle pieces of information pertaining to each individual incident, it&rsquo;s often hard to map an incident to</p>

<p>a simple severity level or keyword.</p>

<p>When displaying events as popups on graphs I think no severity levels are needed, the graphs and event descriptions are much more clear than any</p>

<p>severity level could convey.<br></p>

<p>However, I do think these levels are very useful for reporting and numerical analysis.<br></p>

<p>On slide 53 of <a href="http://www.slideshare.net/jallspaw/ops-metametrics-the-currency-you-pay-for-change">the metametrics slidedeck</a> Allspaw</p>

<p>mentions severity levels, which can be paraphrased in terms of service degradation for the end user:</p>

<p>1 (full), 2 (major), 3 (minor), 4 (no).<br></p>

<p>I would like to extend this notion into the opposite spectrum, and have similar levels on the positivie scale,</p>

<p>so that they represent positive incidents (like viral videos, press mentions, &hellip;) as opposed to problematic ones (outages).</p>

<p><br/>For incident analysis we need a rich nomenclature and schema:</p>

<p><b>incidents can (presumably) have a positive or negative impact, can be self-induced or not, and can be categorized with severity levels</b>;</p>

<p><b>they can also be planned for (maintenance, release announcements) or not</b>.  While we&rsquo;re at it,</p>

<p>how about events to mark point in time where the cause was detected, as well as resolved, so we can calculate TTD and TTR (see Allspaw slidedeck)?</p>

<p><br/>Since basically any event can have a positive or negative impact, an option is to leave out the type &lsquo;incident&rsquo; and give a severity field for every</p>

<p>event type.</p>

<p><br/>I&rsquo;m thinking of a good nomenclature and a schema to express all this.</p>

<p>(btw, notice how in common ops literature the word incident is usually associated with outages and bad things;</p>

<p>while actually an incident can just as well be a positive event) as well as UI features to support this analysis.</p>

<h4>I need your help</h4>

<p>The tcp receiver works, the backend works, i have a crude (but functional) web app, and a simple http api to retrieve the events in all kinds of formats.</p>

<p>Next up are:</p>

<ul>

<li>monitoring dashboard for graphite that gathers events from anthracite, can show metadata, and can mark a timeframe between start and stop events</li>

<li>plugings for puppet, chef to automatically submit their relevant events</li>

<li>a better web UI and actually provide features to do statistics on events and analysis such as TTD, TTR, with colors for severity levels etc</li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/histogram-statsd-graphing-over-time-with-graphite/">Histograms in statsd, and graphing them over time with graphite.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/histogram-statsd-graphing-over-time-with-graphite/" rel="bookmark">
					<time class="entry-date" datetime="2012-11-07 18:45:11 -0400 -0400">
						November 7, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

I submitted a pull request to statsd which adds <a href="https://github.com/etsy/statsd/pull/162">histogram support</a>.

<img style="float:left;margin:0 5px 0 0;" src="/files/Black_cherry_tree_histogram.svg.png" alt="Example histogram, from Wikipedia"/>

<br/>(refresher: a histogram is [a visualization of] a frequency distribution of data,

paraphrasing your data by keeping frequencies for entire classes (ranges of data).

<a href="http://en.wikipedia.org/wiki/Histogram">histograms - Wikipedia</a>)

<br/>It's commonly documented how to plot single histograms, that is a 2D diagram consisting of rectangles whose

<ul>

<li>area is proportional to the frequency of a variable</li>

<li>whose width is equal to the class interval</li>

</ul>

Class intervals go on x-axis, frequencies on y-axis.

<br/>

<br/>

Note: histogram class intervals are supposed to have the same width.

<br/>My implementation allows arbitrary class intervals with potentially different widths,

as well as an upper boundary of infinite.

</p>

<h4>Plotting histograms.. over time</h4>

<p>

We want to plot histograms over time, and not just for a few select points in time (in which case you can just make several histograms),

but a contiguous range of time, preferably through graphite's 2D graphs cause graphite is neat and common enough.

<br/>Time goes on x-axis, that's pretty much a given.  So I'm trying to explore ways to visualize both class intervals as well as frequencies on the y-axis.

</p>

<p>The example I'll use are page rendering timings, condensed into classes with upper boundaries of 0.01, 0.05, 0.1, 0.5, 1, 5, 10, 50 and infinite seconds</p>

<p><p></p>

<p>Tips and notes:</p>

<ul>

<li>

the histogram implementation stores absolute frequencies, but it's easy to get relative frequencies in percent, like so:

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&lt;!</span>[CDATA[

target<span style="color: #666666">=</span>scale(divideSeries(stats.timers.<span style="color: #666666">&lt;</span>your_metric<span style="color: #666666">&gt;</span>.bin_<span style="color: #666666">*</span>,stats.timers.render_time.count),<span style="color: #666666">100</span>)

]]<span style="color: #666666">&gt;</span>
</pre></div>


</li>

<li>I'll be using relative frequencies here because it normalizes the scale of the y-axis</li>

<li>In this use case each class has a notion of desirability (<i>low render time good, high render time bad</i>),

<br/>I think it makes sense to use color to represent this.  This extends to a lot of operational metrics which one would be using histograms for.

<br/>(unlike non-software histograms that represent demographics or tree heights, where classes usually have nothing to do with desirability or quality).

<br/>As it turns out, it's fairly easy to programmatically compute colors between green and red in order to have mathematically correct "steps" of color.

<br/>However, <a href="http://stackoverflow.com/questions/340209/generate-colors-between-red-and-green-for-a-power-meter">Looks like HSV values are more suited

than RGB</a> but <a href="https://github.com/graphite-project/graphite-web/issues/93">

graphite doesn't support HSV (yet)</a> (although one could convert HSV to RGB).

Also <a href="http://vis4.net/blog/posts/goodbye-redgreen-scales/">it looks like

green-purple would be a better choice for people with color blindness</a>.  I haven't gone too far in this topic.

</li>

<li>Since I choose to go with color gradients, it means I better use stacked graphs, otherwise it would be too hard to distinguish which graph is what</li>

<li>None of this is restricted to timing data.  The metric type under which histograms are (and should be) implemented is called "timing", which is

a misleading name but <a href="https://github.com/etsy/statsd/issues/98">we're working on renaming it</a>.</li>

</ul>

<h4>First version</h4>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&lt;!</span>[CDATA[

http<span style="color: #666666">:</span><span style="color: #408080; font-style: italic">//localhost:9000/render/?height=300&amp;</span>

width<span style="color: #666666">=740&amp;</span>from<span style="color: #666666">=-24</span>h<span style="color: #666666">&amp;</span>title<span style="color: #666666">=</span>Render time histogram<span style="color: #666666">&amp;</span>

vtitle<span style="color: #666666">=</span>relative frequency <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">%&amp;</span>yMax<span style="color: #666666">=100&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_01,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;2FFF00&#39;</span>),<span style="color: #BA2121">&#39;0.01&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_05,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;64DD0E&#39;</span>),<span style="color: #BA2121">&#39;0.05&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_1,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;9CDD0E&#39;</span>),<span style="color: #BA2121">&#39;0.1&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_5,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;DDCC0E&#39;</span>),<span style="color: #BA2121">&#39;0.5&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_1,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;DDB70E&#39;</span>),<span style="color: #BA2121">&#39;1&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_5,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF6200&#39;</span>),<span style="color: #BA2121">&#39;5&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_10,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF3C00&#39;</span>),<span style="color: #BA2121">&#39;10&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_50,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF1E00&#39;</span>),<span style="color: #BA2121">&#39;50&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_inf,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF0000&#39;</span>),<span style="color: #BA2121">&#39;inf&#39;</span>)<span style="color: #666666">&amp;</span>

lineMode<span style="color: #666666">=</span>slope<span style="color: #666666">&amp;</span>areaMode<span style="color: #666666">=</span>stacked<span style="color: #666666">&amp;</span>drawNullAsZero<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">false</span><span style="color: #666666">&amp;</span>hideLegend<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">false</span>

]]<span style="color: #666666">&gt;</span>
</pre></div>
</p>

<p><img src="/files/rendertime-histogram.png" width="740" height="300" alt="rendertime histogram" /></p>

<p><br/>Turns out we mainly see the vast majority that performs well, simply because with this way of rendering,</p>

<p>the higher the frequency of a class, the more prominent.  Bad values are hard to see because there&rsquo;s not many of them,</p>

<p>despite being more interesting.</p>

<p>A thought I had at this point was to make all &ldquo;class bands&rdquo; equally wide and use a green-to-red gradient to denote the frequency values,</p>

<p>or even just keep the current color assignments but rely on something like opacity to express frequencies. Alas, none of this is currently</p>

<p>possible with graphite, as far as I can tell.  Though I would like to explore this further.  Especially because I think it wouldn&rsquo;t be hard to implement</p>

<p>in graphite.</p>

<p><br/></p>

<p><br/></p>

<p>So, let&rsquo;s see what <i>can</i> be done right now.</p>

<h4>Leaving out the smallest class</h4>

<p>This adaption is basically the same as before, but leaves out the smallest class (which took most space), this way</p>

<p>the other bands are a bit more visible but the effect isn&rsquo;t as clear as we want.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&lt;!</span>[CDATA[

http<span style="color: #666666">:</span><span style="color: #408080; font-style: italic">//localhost:9000/render/?height=300&amp;</span>

width<span style="color: #666666">=740&amp;</span>from<span style="color: #666666">=-24</span>h<span style="color: #666666">&amp;</span>title<span style="color: #666666">=</span>Render time histogram<span style="color: #666666">&amp;</span>

vtitle<span style="color: #666666">=</span>relative frequency <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">%</span>, leaving out first <span style="color: #008000; font-weight: bold">class</span><span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_05,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;64DD0E&#39;</span>),<span style="color: #BA2121">&#39;0.05&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_1,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;9CDD0E&#39;</span>),<span style="color: #BA2121">&#39;0.1&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_5,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;DDCC0E&#39;</span>),<span style="color: #BA2121">&#39;0.5&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_1,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;DDB70E&#39;</span>),<span style="color: #BA2121">&#39;1&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_5,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF6200&#39;</span>),<span style="color: #BA2121">&#39;5&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_10,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF3C00&#39;</span>),<span style="color: #BA2121">&#39;10&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_50,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF1E00&#39;</span>),<span style="color: #BA2121">&#39;50&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_inf,stats.timers.render_time.count),<span style="color: #666666">100</span>),<span style="color: #BA2121">&#39;FF0000&#39;</span>),<span style="color: #BA2121">&#39;inf&#39;</span>)<span style="color: #666666">&amp;</span>

lineMode<span style="color: #666666">=</span>slope<span style="color: #666666">&amp;</span>areaMode<span style="color: #666666">=</span>stacked<span style="color: #666666">&amp;</span>drawNullAsZero<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">false</span><span style="color: #666666">&amp;</span>hideLegend<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">false</span>

]]<span style="color: #666666">&gt;</span>
</pre></div>
</p>

<p><img src="/files/rendertime-histogram-leaving-out-first-class.png" width="740" height="300" alt="rendertime histogram leaving out first class" /></p>

<h4>Per-band scaling</h4>

<p>Finally, the bigger the values represented by each class the more we inflate the band,</p>

<p>so the more problematic cases become more visible, despite having a lower frequency.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&lt;!</span>[CDATA[

http<span style="color: #666666">:</span><span style="color: #408080; font-style: italic">//localhost:9000/render/?height=300&amp;</span>

width<span style="color: #666666">=740&amp;</span>from<span style="color: #666666">=-24</span>h<span style="color: #666666">&amp;</span>title<span style="color: #666666">=</span>Render time histogram<span style="color: #666666">&amp;</span>

vtitle<span style="color: #666666">=</span>rel. freq <span style="color: #008000; font-weight: bold">with</span> scale adjustment per band<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_01,stats.timers.render_time.count),<span style="color: #666666">0.01</span>),<span style="color: #BA2121">&#39;2FFF00&#39;</span>),<span style="color: #BA2121">&#39;0.01&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_05,stats.timers.render_time.count),<span style="color: #666666">0.04</span>),<span style="color: #BA2121">&#39;64DD0E&#39;</span>),<span style="color: #BA2121">&#39;0.05&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_1,stats.timers.render_time.count),<span style="color: #666666">0.05</span>),<span style="color: #BA2121">&#39;9CDD0E&#39;</span>),<span style="color: #BA2121">&#39;0.1&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_0_5,stats.timers.render_time.count),<span style="color: #666666">0.4</span>),<span style="color: #BA2121">&#39;DDCC0E&#39;</span>),<span style="color: #BA2121">&#39;0.5&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_1,stats.timers.render_time.count),<span style="color: #666666">0.5</span>),<span style="color: #BA2121">&#39;DDB70E&#39;</span>),<span style="color: #BA2121">&#39;1&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_5,stats.timers.render_time.count),<span style="color: #666666">4</span>),<span style="color: #BA2121">&#39;FF6200&#39;</span>),<span style="color: #BA2121">&#39;5&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_10,stats.timers.render_time.count),<span style="color: #666666">5</span>),<span style="color: #BA2121">&#39;FF3C00&#39;</span>),<span style="color: #BA2121">&#39;10&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_50,stats.timers.render_time.count),<span style="color: #666666">40</span>),<span style="color: #BA2121">&#39;FF1E00&#39;</span>),<span style="color: #BA2121">&#39;50&#39;</span>)<span style="color: #666666">&amp;</span>

target<span style="color: #666666">=</span>alias(color(scale(divideSeries(stats.timers.render_time.bin_inf,stats.timers.render_time.count),<span style="color: #666666">60</span>),<span style="color: #BA2121">&#39;FF0000&#39;</span>),<span style="color: #BA2121">&#39;inf&#39;</span>)<span style="color: #666666">&amp;</span>

lineMode<span style="color: #666666">=</span>slope<span style="color: #666666">&amp;</span>areaMode<span style="color: #666666">=</span>stacked<span style="color: #666666">&amp;</span>drawNullAsZero<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">false</span><span style="color: #666666">&amp;</span>hideLegend<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">false</span>

]]<span style="color: #666666">&gt;</span>
</pre></div>
</p>

<p><img src="/files/rendertime-histogram-higher-focus-for-higher-class-interval.png" width="740" height="300" alt="rendertime histogram with higher focus for higher class interval" /></p>

<p><br/>I started off by scaling each band by the width of the class interval.  This is actually more arbitrary than it may seem.</p>

<p><br/>The point is that now it&rsquo;s easier to spot acute as well as long-standing problems, but note you can&rsquo;t really read statistics from this graph because of the per-band scaling.</p>

<p><br/>Note also that outliers contribute to the outer band(s) and are given as much focus as non-outliers in the same bands.</p>

<p>In a system over which you have no complete control (i.e. if you were graphing histograms of time until first byte or page loaded at client,</p>

<p>where you rely on the internet as a transport) it makes sense to give less attention to outliers and focus on optimizing for as many users as possible,</p>

<p>I think it there&rsquo;s no reliable way to subtract outliers from the upper bands and you should also graph averages and percentiles and understand what each</p>

<p>graph does.</p>

<p>But anyway here I want to include outliers, because they represent latencies we can fix.</p>

<h4>Final notes</h4>

<p>While the tools we have are by no means perfect, I&rsquo;m seeing gradual improvement in the monitoring space.  This work is only a small piece</p>

<p>of the puzzle. The rendering of histograms can be improved but at this point I think they are good enough to be usable. The real challenge is</p>

<p>putting in place automated trending, anomaly detection and alerting.  If we can figure that out, there&rsquo;s less need to be looking at graphs in the first place.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/moving-to-nyc/">Moving to New York City</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/moving-to-nyc/" rel="bookmark">
					<time class="entry-date" datetime="2012-08-19 16:50:11 -0400 EDT">
						August 19, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

I have a one-way ticket to NYC on Sept. 21st.  <a href="http://vimeo.com/about">Vimeo HQ</a> is in Manhattan, and practically the whole team works in the building so it makes sense for me to relocate and join them locally.

I'm looking forward to working with the colleagues face to face, but mainly I'm looking forward to the experience of living in such a different place, and exploring the US.

In fact, I already have some small trips planned (Hamptons NY, camping in Pennsylvania, skiing in New York this winter) with some friends <a href="/thailand_berlin_velocity_nyc_ghent_metal.html">I met last year in NY</a>.

We're also looking into possibly going to California or Mexico for the holidays.

<br/>

I've been living in <a href="http://en.wikipedia.org/wiki/Ghent">Ghent</a> for about a year now and absolutely loved it.  I'll definitely miss Ghent, I think NYC might be a bit too hectic for my taste, but I just <i>have</i> to try this and see :)  There's so much to learn and explore.

I especially have high expectations of the music scene, which I'ld like to get involved in. (btw my <a href="http://www.lightbulbinferno.com/">ex-band</a> is recording an EP and looking for a new drummer)

</p>

<p><center><img width="35%" src="/files/travel_documents_nyc.jpg"/></center></p>

<p>

As for things in Belgium: <a href="https://www.facebook.com/media/set/?set=a.10151066748715279.458359.627030278&type=3&l=1fa8adec26">selling furniture</a>, moving out of my apartment next weekend, having a goodbye drink friday sept. 14th, flying a week later and returning in the summer 2013 for the <a href="http://www.gentsefeesten.be/">gentse feesten</a>.  Maybe I'll visit sooner, depending on how homesick I get :)

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/vimeo/index.html" rel="tag">vimeo</a>
            
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/travel/index.html" rel="tag">travel</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/resigning_arch_linux/">Resigning as Arch Linux developer</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/resigning_arch_linux/" rel="bookmark">
					<time class="entry-date" datetime="2012-07-21 16:50:11 -0400 EDT">
						July 21, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><p></p>

<p>A few days ago, I <a href="http://mailman.archlinux.org/pipermail/arch-releng/2012-July/002628.html">resigned as Arch Linux developer</a>.</p>

<p><br/>I&rsquo;m sad to go, but I felt like my work on Arch became a drag, so it was time I officialized my decreased interest.</p>

<p>The Releng team we started more than 3 years ago is now dead, but other developers are showing interest in iso building and installer scripts, so as long as they don&rsquo;t burn out, you&rsquo;ll see new isos again.</p>

<p>More information in my resignation mail linked above.</p>

<p><br/><br/></p>

<p>Dieter</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/dell_crowbar_openstack_swift/">Dell crowbar openstack swift</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/dell_crowbar_openstack_swift/" rel="bookmark">
					<time class="entry-date" datetime="2012-05-02 11:50:11 -0400 EDT">
						May 2, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Learned about <a href="https://github.com/dellcloudedge/crowbar">Dell Crowbar</a> the other day.  It seems to be (becoming) a tool I&rsquo;ve wanted for quite a while, because it takes automating physical infrastructure to a new level, and is also convenient on virtual.</p>

<p>

It provides a central management interface which leverages chef, but extends it to a broader scope: it takes care of configuring the bios and raid firmware, BMC/IPMI, doing a PXE autoinstall and setting up chef, which of course does everything else you might need.

<br/>The crowbar admin machine also runs Nagios and Ganglia and the configuration is automatically kept in sync with the roles you apply to your nodes. (adding support for a different monitoring/alerting solution is probably not too hard.  I'm thinking about graphite support or even integrating with an existing graphite setup)

<br/>It uses a plugin system called barclamps and it's vendor-agnostic.  (minus the barclamps that deal with your hardware)

It can even suggest roles for your nodes based on best practices (like: for an X-node openstack cluster we recommend Y proxy's and Z foobars) and hardware properties it discovers (storage vs cpu power vs ram etc)

<br/>Next step would be automating purchase orders, delivery handling and physical installation in racks.

</p>

<p>I think this tool deserves more attention and should be added to your devops toolchain for the cloud (<i>triple buzzword bonus!!!</i>)</p>

<p>

I've currently been using it to easily setup an <a href="https://github.com/dellcloudedge/crowbar/wiki/Swift--barclamp">openstack swift</a> test cluster on <a href="https://github.com/dellcloudedge/crowbar/wiki/Running-Crowbar-in-VirtualBox-VMs">a virtualbox infrastructure</a> (even the latter is easily automated with a shell script), and I'm looking forward to use it on physical hardware and have it take care of the bios and raid settings, I'm expecting it will even set the LCD's on the frontpanel to something interesting automatically. (btw the <a href="http://www.dell.com/poweredge">12G poweredge servers</a> have some neat new features)

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/openstack/index.html" rel="tag">openstack</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/joining_vimeo/">Joining Vimeo</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/joining_vimeo/" rel="bookmark">
					<time class="entry-date" datetime="2012-03-27 11:50:36 -0400 EDT">
						March 27, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Working on <a href="/building_a_search_engine.html">scalable information retrieval systems at the university of Ghent</a> has been very fun: interesting and challenging work, smart team, and an environment that fosters growth and innovation.  I could definitely see myself continuing there&hellip;</p>

<p><br/></p>

<p>However, <a href="https://vimeo.com/">Vimeo</a> got in touch and told me about their plans&hellip; specifically what&rsquo;s going into the <a href="https://vimeo.com/35514005">new version</a> and what other stuff they have on their roadmap.</p>

<p>I can honestly say vimeo is the most beautiful web property I&rsquo;ve ever seen [*], not just that, they also provide a top product/service, and host a great community of passionate people who create some of the most beautiful online videos I&rsquo;ve ever seen.  (examples: <a href="https://vimeo.com/37071868">Vietnam travel report</a>, <a href="https://vimeo.com/33993701">Sabian cymbals taking advertising to a whole new level in this video with my musician hero Mike Portnoy</a>, <a href="https://vimeo.com/23237102">a city time lapse video</a>)</p>

<p><br/></p>

<p>From what I can tell, they also do product management well:  they know what their territory is, and how to cultivate it through <a href="https://vimeo.com/16929813">stellar community management</a>.  They are <a href="https://vimeo.com/21585295">not a general purpose video site and hence do not compete directly with YouTube or Facebook</a>.</p>

<p>And now, I have the opportunity to be a part of that.  After much pondering I decided to go for it.  Resigning at the university was hard but smooth, I felt I had to take this chance and they were very supportive.

<br/>I'll be working on the infrastructure/backend side of things, I'm actually working on transcoding infrastructure right now.  Working from my place in Ghent, a move to NYC at some point in the future might happen, but we'll see...

</p>

<p>

[*] When they told me the new version would be more appealing than the old, I couldn't believe that's possible.

but to my own surprise they succeeded.

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/vimeo/index.html" rel="tag">vimeo</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/lighttpd-socket-arch-linux-var-run-tmpfs-tmpfiles.d/">Lighttpd socket Arch Linux /var/run tmpfs tmpfiles.d</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/lighttpd-socket-arch-linux-var-run-tmpfs-tmpfiles.d/" rel="bookmark">
					<time class="entry-date" datetime="2012-03-25 23:05:05 -0400 EDT">
						March 25, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>On Arch Linux, and probably <a href="http://www.h-online.com/open/news/item/Linux-distributions-to-include-run-directory-1219006.html">many other distros</a> /run is a new tmpfs, and /var/run symlinks to it.</p>

<p>With Lighttpd you might have a fastcgi socket defined something like &ldquo;/var/run/lighttpd/sockets/mywebsite.sock&rdquo;.</p>

<p>This won&rsquo;t work anymore as after each reboot /var/run is an empty directory and lighttpd won&rsquo;t start, /var/log/lighttpd/error.log will tell you:</p>

<pre>

2012-03-16 09:21:34: (log.c.166) server started 

2012-03-16 09:21:34: (mod_fastcgi.c.977) bind failed for: unix:/var/run/lighttpd/sockets/mywebsite.sock-0 No such file or directory 

2012-03-16 09:21:34: (mod_fastcgi.c.1397) [ERROR]: spawning fcgi failed. 

2012-03-16 09:21:34: (server.c.945) Configuration of plugins failed. Going down.

</pre>

<p>That&rsquo;s where this new tool <a href="https://www.google.be/#hl=nl&q=tmpfiles.d">tmpfiles.d</a> comes in.</p>

<p>It creates files and directories as described in the configs, and gets invoked on boot.  Like so:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">$ </span>cat /etc/tmpfiles.d/lighttpd.conf 

d /run/lighttpd/sockets <span style="color: #666666">0700</span> http http

<span style="color: #666666">]]</span>&gt;
</pre></div>
</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/thailand_berlin_velocity_nyc_ghent_metal/">Thailand, Berlin Velocity EU, NYC, Ghent and more metal</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/thailand_berlin_velocity_nyc_ghent_metal/" rel="bookmark">
					<time class="entry-date" datetime="2012-01-08 18:10:36 -0400 -0400">
						January 8, 2012
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><p>I&rsquo;ve been meaning to write about a lot of stuff in separate posts, but they kept getting delayed, so I&rsquo;ll just briefly share everything in one post.</p>

<h3>Thailand</h3>

<p>In July I did a 3-week group journey through Thailand arranged by <a href="http://www.explorado.be">Explorado</a>, but organized by (&ldquo;outsourced to&rdquo;) the 2 guides of <a href="http://www.rootsofasia.com/">roots of Asia</a>, who did <a href="http://www.rootsofasia.com/get-to-know-us/feedback.html">an amazing job</a>.</p>

<p>The whole concept was exploring &ldquo;the real Thailand&rdquo; by means of <i>Eco-tourism</i>.  We&rsquo;ve been in Bangkok (twice), Chiang Mai city, a mountain village in the province of Chiang Mai, through the jungle, at a fisherman village in Phuket and at the tropical island of Koh Pha ngan.</p>

<p>The latter was at the end of the trip and was timed perfectly to get some deserved rest in a more touristy (although not too busy) area, but the majority of the trip was spent far away from the typical touristy areas so we could be submerged in honest, authentic Thai culture and visit authentic locations, often we were at locations where seeing a group of white folks is not common.</p>

<p>We&rsquo;ve been at unique authentic temples, stayed with various locals and hill tribes, shared meals with them, took the same transport they did (at one point an entire village collected their bikes so we could borrow them to do a bike trip through rice fields and some of the most beautiful lakes I&rsquo;ve ever seen).  We&rsquo;ve had plenty of beautiful moments during those 3 weeks.  Like visiting the home of one of the local Thai who built his entire house out of clay, by himself and some friends, or visiting the ancient temple where our guide got married, in a forest in the hills, it was the most beautiful temple of the entire trip, but no other tourists go there because it&rsquo;s not really known (and should probably be kept that way).  Or going to a bar in Chiang Mai city (one evening on my own, the next I brought a fellow traveler) to have some good times with some locals.</p>

<p>The Eco-conscious part of the travel means:</p>

<ul>

<li>green travel (minimize impact on the environment, "leave no trace").  Other than taking the plane over there and back we did a pretty good job, we've used public buses, night trains, biodegradable soap, etc</li>

<li>local foods (no import, minimal packaging, wrap in banana leaves, etc)</li>

<li>supporting Eco-conscious projects (like <a href="http://www.elephantnaturepark.org/">elephant nature park</a>, which is an entire volunteer-based reserve to give mistreated elephants (which has been a big problem in Thailand) a better life, where we washed and fed elephants)</li>

</ul>

<p>This has been a great experience, and although I found the culture in the South disgustingly based on profiting from tourists, and the cities are too polluted and dirty, I&rsquo;ve seen cultures so respectful of nature and each other, living by values I&rsquo;ve been trying to apply at home - but being frowned upon in our western society because we&rsquo;re so brainwashed by consumerism, which was beautiful and heartwarming.</p>

<p><br/></p>

<!-- <img src="/files/thailand_jungle.jpg" height="150px"/> -->

<p><img src="/files/thailand_elephant.jpg" height="150px"/></p>

<p><img src="/files/thailand_tree.jpg" height="150px"/></p>

<p><img src="/files/thailand_tribe.jpg" height="150px"/></p>

<p><img src="/files/thailand_gekko.jpg" height="150px"/></p>

<p><img src="/files/thailand_boat.jpg" height="150px"/></p>

<p><img src="/files/thailand_emblem.jpg" height="150px"/></p>

<p><img src="/files/thailand_hangmat.jpg" height="150px"/></p>

<p><br/><a href="https://www.facebook.com/media/set/?set=a.10150511397165279.397476.627030278&type=1&l=2e7844ab2b">Photo album</a></p>

<h3>Berlin</h3>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/berlin_velocity.jpg" alt="Berlin Velocity EU conference" height="150px"/></p>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/berlin_reichstag.jpg" alt="Berlin Reichstag building" height="150px"/></p>

<p>I&rsquo;ve been in Berlin for the first <a href="http://velocityconf.com/velocityeu/">Velocity conference in the EU</a>, which was quite good.  The best part was probably the &ldquo;Velocity Birds of feather&rdquo; (whatever that means) unconference the day before at <a href="http://betahaus.de">betahaus</a>, which was great for meeting some folks such as the <a href="http://www.soundcloud.com">soundcloud.com</a> guys (which BTW, is the site we host our music on), although lots more interesting folks attended the conference itself (and it was packed).</p>

<p>Berlin itself was nice too.  Lots of history (Berlin wall, world war(s)), lots of impressive architecture (old and new), very cheap (albeit mediocre in quality) food, lots of Italian food, a bit cold though.</p>

<h3 style="clear: left;">New York city</h3>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/brooklyn_bridge.jpg" alt="Brooklyn bridge" height="150px"/></p>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/manhattan_harbor.jpg" alt="Manhattan harbor" height="150px"/></p>

<p>I&rsquo;m still recovering from the awesome time I just had in NYC. I&rsquo;ve been way more busy over there than I anticipated. I should have stayed 2 or 3 weeks instead of 1 :).  I&rsquo;ve met various locals (one of whom who&rsquo;d love to become a city guide as 2nd job because she just loves showing people around, so that just turned out great!). I didn&rsquo;t go for the typical touristy things (I skipped things like the WTC memorial, empire state building, statue of liberty, to the extent you can skip them, as they are very visible from pretty much all over the place).</p>

<p>Instead, I wanted to get a feel of the real city and the people inhabiting it.  I&rsquo;ve seen parts of Queens, central and North-West Brooklyn, lots of areas (but not enough) in Manhattan and even Staten Island, been to a rock concert, comedy, improv and cabaret shows, the movies, more bars than I can count and mostly ate out with company (just as real new yorkers do, of course, though for breakfast that feels a bit weird).  I even went shopping (not mall-shopping, but groceries in the supermarket, the Williamsburg Foodtown - that&rsquo;s what it&rsquo;s called - clerk advised me to enjoy every last second in the US, phrased in a way as if any other place in the world sucks in comparison, which is ridiculous, but turns out I followed his advice anyway) because I stayed at an apartment in Williamsburg, I also had 2 roommates, with whom I ironically couldn&rsquo;t spend as much time as I wanted to as I was so busy meeting up with all those other people, I also visited the Etsy and Vimeo offices (both are awesome) and met up with Dave Reisner (who is one of our latest Arch Linux devs, and who lives in NJ, but don&rsquo;t tell anyone) and who forgot to show me around in the Google office ;-)  And I realize some of the past sentences are a bit long and busy but that&rsquo;s one of the things I learned at New York I guess.  For one week, I almost lived like a real New Yorker, and it was interesting (but exhausting).</p>

<h3 style="clear: left;">Move to Ghent</h3>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/ghent_bridge.jpg" alt="Ghent, bridge of Sint-Michiels" height="150px"/></p>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/ghent_coupure.jpg" alt="Ghent, coupure" height="150px"/></p>

<p>Enough about the trips.  Back to daily life.  I moved to the city of <a href="http://en.wikipedia.org/wiki/Ghent">Ghent</a>.  Riding by bike to work every day along the scenic <a href="http://nl.wikipedia.org/wiki/Coupure_%28Gent%29">Coupure</a> is fun.</p>

<p>I am quite proud to say nearly all of my stuff in this apartment is second hand and I&rsquo;ve been lucky to receive some free stuff as well (thanks Bram!).  Not (only) because I&rsquo;m <span style="text-decoration:line-through">cheap</span> money conscious but I like to give things a second life instead of buying something new, lowering the impact on the environment. Even if it doesn&rsquo;t look too well, as long as it&rsquo;s functional.  And this is exactly one of those values I mentioned above which is often not understood in our Western society but I was pleased to find out this philosophy is the standard in large parts of Thai culture.</p>

<h3 style="clear: left;">Death metal</h3>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/li_promoshoot.jpg" alt="Promo shoot" height="150px"/></p>

<p><img style="float:left;margin:0 5px 0 0;" src="/files/li_frontline.jpg" alt="Live @ Frontline, Ghent" height="150px"/></p>

<p>We&rsquo;ve done 3 gigs (which had great reception, luckily) and we&rsquo;ve got planned a few already for 2012, one of which will be at the <a href="https://www.facebook.com/pages/From-Rock-Till-Core/141364465969247">From Rock Till Core festival</a> in Merelbeke.</p>

<p>We also did a semi-professional <a href="http://www.lightbulbinferno.com/album_promoshoot_summer_2011">photo-shoot</a>, and I made a <a href="http://www.lightbulbinferno.com/">website</a> (you can tell I&rsquo;m not a designer).</p>

<p><br style="clear: left;" /></p>

<p><br/></p>

<p><br/></p>

<p>That wraps up 2011 for me. Good times.. Happy new year everybody!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/music/index.html" rel="tag">music</a>
            
                <a href="http://localhost:1313//tags/travel/index.html" rel="tag">travel</a>
            
                <a href="http://localhost:1313//tags/photos/index.html" rel="tag">photos</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/luamail_a_mail_client_built_into_luakit/">Luamail: a mail client built into luakit</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/luamail_a_mail_client_built_into_luakit/" rel="bookmark">
					<time class="entry-date" datetime="2011-10-02 09:28:45 -0400 EDT">
						October 2, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Similarly to how back in 2009 there was no browser that works in a way I find sane, and I started solving that with <a href="/uzbl_a_browser_that_adheres_to_the_unix_philosophy">uzbl</a>,

now I'm fed up with the lack of an email client that works in a way I find sane.  Uzbl turned out to be a bit cumbersome for my taste, so I switched to the uzbl-inspired but more pragmatic <a href="http://luakit.org">luakit</a> browser,

which is much in the same vein, except that all configuration, extensions, event handling, programmatic input etc are done by interfacing with lua API's.

Now I want to build the "luakit of email clients".  Let me explain what's that all about...</p>

<p>Basically the story is pretty much the same as it was with uzbl.  There are no mail clients which offer a high level of customization and interfacing possibilities.  There are some mail clients aimed at &ldquo;power users&rdquo; and &ldquo;lightweight mail clients&rdquo; like mutt/alpine/nmh etc but those are also restricted in extensibility and often crippled in terms of features.  Currently I&rsquo;m using Claws-mail, which is the least sucky client I found, but it&rsquo;s also nowhere near what I want.</p>

<h3>So, what do I want in a mail client?</h3>

<ul>

<li>fast and non-bloaty (of course my definition of bloat might differ from yours, for me it's a combination of run-time performance and source code elegancy)</li>

<li>minimal but efficient UI. keyboard controlled. modal interface optional but enabled by default</li>

<li>extensive customisation options</li>

<li>plain text configuration and data files, a binary format only where appropriate (like a search index or a database)</li>

<li>rendering HTML mails and rich content (images, embedded videos, flash, HTML5) properly.

(I receive fancy newsletters from companies and rich content such as news messages from rss feeds by means of <a href="/an_rss2email_fork_that_sucks_less">rss2email-xdg</a>)</li>

<li>great link following, and for external files: integration with download software, proxies, etc). I.e. "what luakit has"</li>

<li>support Unicode and attachments (mime) properly</li>

<li>play nice with window managers (window title, urgency hint, ..), support many key bindings and use UI widgets that are not a pain (i.e. no ncurses, be an X client)</li>

<li>provide a unified interface to email sending/receiving/searching</li>

<li>keep my homedir clean. Use xdg basedir spec (i.e. cache mail and search indices in $XDG_CACHE_DIR)</li>

<li>key binds to show/hide quoted text, focus unquoted text when viewing mail by default.</li>

<li>play nice with mailing lists (track all mailing lists I'm on, allow me to unsubscribe with a shortcut)</li>

<li>filtering and mail (or displaying thereof) altering: for some specific mailing lists, prepend the subject with the name of the mailing list (i.e. lists that use the List-Id header and do not rewrite subjects)</li>

<li>high level of control over the actual message that gets sent out.  I.e. allow me to change and modify all headers</li>

<li>when sending a message fails, keep it in a retry-buffer.  give me an interface to that buffer (I.e. a list of all mails which could not be sent, why not, when they'll be retried, shortcuts to retry immediately, etc)</li>

<li>allow me to define <a href="http://en.wikipedia.org/wiki/Sieve_%28mail_filtering_language%29">sieve</a> rules in my mail client configuration, and automatically update server side when needed.</li>

<li>allow me, as a user to change anything in a fine-grained way.  Some examples:

<ul>

    <li>Differentiate properly between received mails that are "definitely optional for me", and "aimed to me".  I.e. mark all mails from a mailing list low-priority, unless a 'To'/'Cc'/'Bcc' field contains any of the addresses I use to send from <i>or</i> when the mail is a reply to a mail I sent earlier (check Message-ID and mail subject)

    <li>Use a tag-based interface towards gmail.  Gmail uses tags instead of folders, which it cannot really expose properly over IMAP (it must "duplicate" the same message in multiple folders when speaking IMAP).  I want to modify my client so that for gmail accounts, it also uses tags instead of folders</li>

    <li>Use different key bindings dependent on account in use or any property such as sender of a mail message.  Example: when deleting a message, delete straight away when it has a certain spamassasin score or is an rss2email message, move to Trash otherwise.  When the message is from anyone I know (in my contact list), ask me to confirm and offer moving to an archive folder instead.</li>

    <li>When I get a mail from nagios with a critical alert, show an inotify error message containing the right information (parse the nagios mail first), and set urgent flag.  Do the same when my boss sent me a mail containing the phrase 'urgent', unless the 'To' field contains more than 20 addresses.  Give me a key bind that sends a mail containing "I'm on it!" and switch to my browser workspace and open all my monitoring pages in my browser.  Don't disturb me for any other e-mail</li>

    <li>Use bottom posting by default, but when I'm replying to mailing list foo or person bar, use top-posting instead.</li>

    <li>Display mails by default threaded by subject and date. But for my news feeds messages (which arrive on the same account!), group by sender.  maybe even categorize senders so that I can quickly delete all humorous messages from various senders/feeds if I have no time or feel guilty about slacking off</li>

</ul>

<p></li></p>

<p></ul></p>

<h3>Implementation</h3>

<p>My first idea was to build a standalone mail client by reusing the luakit C-based host program and all bindings it exposes</p>

<p>(webkitGtk widget with bindings, gtk bindings, lots of lua code for menu&rsquo;s, keyboard control, downloading external files, proxy code, etc. very useful stuff); which would mean we supply a set of different config files for the luakit host program, along with some more lua libraries and/or bindings to C software.</p>

<p><br/>But instead we choose to neatly integrate the mail client in luakit itself, which makes it easier to develop and keep up with luakit (the diff is minimal instead of extensive), and it&rsquo;s probably more</p>

<p>convenient for the user.  So we just forked the luakit project and try to do our stuff in a separate branch, adding the mail client bits in between the existing browser bits.</p>

<p>The good news is, so many needed things already exist, so building the client shouldn&rsquo;t be that much work.</p>

<p>I&rsquo;ve been researching our options (and still am), this is how the list of things we&rsquo;ll rely on looks like so far:</p>

<ul>

<li>HTML/rich content: webkitGtk widget provided by luakit</li>

<li>key bindings, proxy, external files downloader, link follower, ...: luakit's lua code</li>

<li>IMAP library:  <a href="https://gitorious.org/luaimap">luaimap</a></li>

<li>SMTP: <a href="http://msmtp.sourceforge.net/">msmtp</a> (could not find any suitable lua SMTP library with proper TLS/SSL support)</li>

<li>maildir/mh/other local formats: TBD</li>

<li>message parsing: TBD. we might end up writing bindings to existing C libraries, as we couldn't find a good lua library yet, and it's hard to write one</li>

<li>search: TBD</li>

</ul>

<p><a href="https://github.com/mason-larobina">Mason (luakit maintainer)</a> liked the idea from the start; <a href="http://sahd.lamafam.org/">Gerry (luaimap maintainer)</a> also liked the idea and joined the project right away :)</p>

<h3>Why not uzbl-style?</h3>

<p>Gerry asked: &ldquo;why not structure the mail client like uzbl is (fast c core with shell and python around it)?&rdquo;</p>

<p><br/>The main lesson I learned from doing uzbl is: the very ideology-based approach of &ldquo;one program for each thing&rdquo; is nice in theory, but can become a hassle in practice.  The means of IPC are limited: passing command line arguments, setting environment variables, or creating your own little protocol that needs to be parsed.  Advanced constructs like loops and branches complicate things more, and when passing stuff through various processes like we did, it can be tricky to figure out how to quote your strings so that they are expanded at the right stage.  It&rsquo;s also hard to jump between various pieces of code; the separation between processes start to feel like real barriers.</p>

<p><br/>Luakit provides lua API&rsquo;s, which means all extensions should be primarily written in lua (which is a burden if you don&rsquo;t feel like learning a new language), you can still exec any other script or program if you want to from lua however, but the API&rsquo;s are very fine grained, and pretty much everything is exposed,so there&rsquo;s lots of things you can do, but in a way that feels more robust and reliable.  And things work faster too.</p>

<p><br/>I&rsquo;m not that experienced yet with luakit to grasp all its downsides, but it feels more reliable.  And maybe subconsciously, the fact that luakit feels as nice as uzbl without me needing to do anything (Mason did all the hard work of writing lua bindings and writing all lua code), whereas uzbl involved lots of hard work for me, maybe that twists my perception a bit.  But not too much, I think.</p>

<p><br/>The same upsides and downsides go for writing a mail client; so luakit-style seems more appropriate to me. Especially since so many libraries and components already exist, and just need to stitched together.</p>

<h3>Show me the code already!!</h3>

<p>We actually have a very rough, but working prototype.  Ready for you to try out.  See the <a href="http://lists.luakit.org/archive/luakit-dev/2011-September/000206.html">luakit-dev post</a> for details.</p>

<ul>

<li><a href="https://github.com/lama7/luakit/tree/luamail">Gerry's luamail branch of luakit</a></li>

<li><a href="https://github.com/Dieterbe/luakit/tree/luamail">My luamail branch of luakit</a></li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/mail/index.html" rel="tag">mail</a>
            
                <a href="http://localhost:1313//tags/lua/index.html" rel="tag">lua</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/hitchhiking_try_it/">Hitchhiking.. try it.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/hitchhiking_try_it/" rel="bookmark">
					<time class="entry-date" datetime="2011-07-06 16:04:45 -0400 EDT">
						July 6, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>For the last few months, I&rsquo;ve started to actively use hitchhiking as a means to</p>

<p>travel between home and work.</p>

<p>What started as a &ldquo;I&rsquo;m not sure about this, it seems a bit awkward, but I do</p>

<p>want to know how it goes and feels, so I&rsquo;ll try it out once&rdquo; ended up being &ldquo;this is</p>

<p>great, I&rsquo;m doing it every day and loving it&rdquo;.</p>

<p>Here&rsquo;s why you should try it and why it may make your life more awesome.</p>

<h3>Why do I do it?</h3>

<ul>

<li>Meet new interesting people.  I meet a lot of different people with all kinds of

  backgrounds.  Male, female.  Young, old.  Native Belgians, immigrants,

students, anything from "lower class" people, to people with regular jobs to even some people with very exciting

lives and/or high profile jobs.</li>

<li>It's better for the planet.</li>

<li>Save time and/or money.  For me, traveling to/from work by hitchhiking is

  quicker than going by public transport (bus).  Bonus points because my route

involves a pleasant bike ride to the highway entry where I start my little

adventure.</li>

<li>No concerns about parking and/or paying for gas.  My job is near the

  highway exit so usually I get dropped off literally in front of the building.</li>

</ul>

<h3>Why do people take you with them?</h3>

<p>From what I can tell:</p>

<ul>

<li>They like to do something nice, it makes them feel like a better person

  (rightly so).</li>

<li>They are bored in the car and would like some companionship.</li>

<li>Out of compassion.  "poor guy must be standing here for a long time",

  which is rarely true, and I think compassion is not needed, but hey.

  Some drivers told me "I did the same when I was a student so I know it feels

  like".  Most folks are surprised though when I tell them I do it because I

like to.</li>

<li>Concern that something bad will happen to you. Which I also think is not

  really needed, but hey.</li>

<li>curiosity, they want to hear your story.</li>

</ul>

<h3>Why you should try it</h3>

<p>What I learned is, not only can hitchhiking bring you to work faster than by</p>

<p>public transport and/or in a less polluting manner, it can be a fun experience for both you and person</p>

<p>picking you up.  Indeed, some people that pick me up never picked anybody up before</p>

<p>and tell me at the end they were happy they did it, and you can tell their day is made.</p>

<p>Also, avoiding routine makes your days more memorable and interesting.</p>

<p>Btw, I recently stumbled on &lt;a</p>

<p>href=&ldquo;<a href="http://lifehacker.com/5800954/escape-the-rut-of-your-daily-routine-by-trying-something-new-for-30-days&quot;&gt;this">http://lifehacker.com/5800954/escape-the-rut-of-your-daily-routine-by-trying-something-new-for-30-days&quot;&gt;this</a></p>

<p>presentation</a>, which tells you how you can make your daily life more</p>

<p>interesting and memorable by trying out new things, the video fits this post</p>

<p>well :)</p>

<p></p></p>

<h3>Tips</h3>

<ul>

<li>Sometimes you can have bad luck (no pick up, traffic jam, ...).  It helps if

  you have flexible working hours like me.</li>

<li>Have some good card boards with your destination clearly written.  If you live in a small

  village like me, write down the name of a bigger city which is in the same

direction.</li>

<li>Find a spot where drivers have time to see you, have some time to read your

  cardboard and to make up their mind about whether or not to pick you up and then have enough room

to legally put their car to allow you to get in.  All this without endangering

other people in traffic.  When going to work I can stand just at the entry to the highway,

where not that many cars pass, but I have an almost guaranteed pickup within 5

minutes because drivers have time to react.  Whereas when going from work back home, I have no choice but to stand

at a very busy section where drivers have little time to react (avg pickup time there

is 10 minutes or a bit more).</li>

<li>look decently dressed. People tell me they felt okay picking me up

  because I look civilized.</li>

<li>If you're a girl, it could be trickier because you could feel uncomfortable

  with some people who pick you up.  That said, I think there are many more people with good

intentions then bad, and you can always say "no thanks" and wait for the next

ride.</li>

</ul>

<p><br/></p>

<p>Note: this article is not accurate anymore.  I have since moved to Ghent, where</p>

<p>I go to work by bike, but that&rsquo;s material for a future post.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/poor_mans_pickle_implementations_benchmark/">Poor mans pickle implementations benchmark</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/poor_mans_pickle_implementations_benchmark/" rel="bookmark">
					<time class="entry-date" datetime="2011-06-16 22:32:12 -0400 EDT">
						June 16, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><a href="http://nlp.fi.muni.cz/projekty/gensim/">Gensim</a> is a very cool python2, numpy-based vector space modelling (information retrieval) framework.  It does the job in a straightforward way, and it has been a great project for me to learn python with because it uses some nice tricks in real life scenarios (like Generators) and is AFAICT elegantly coded.  Sometimes I find it hard to believe how much functionality can be crammed in so few lines of (readable) code.</p>

<p>But anyway we're having some issues in it with cPickle (it <a href="https://github.com/piskvorky/gensim/issues/31">breaks when saving large matrices</a>, it <a href="https://github.com/piskvorky/gensim/issues/30">breaks with some objects</a>).

For now I worked around it by using <a href="http://jsonpickle.github.com/">jsonpickle</a> but I wonder how viable this alternative really is.</p>

<p>To give at least a crude idea of performance characteristics of different pickle methods, I wrote a very simple benchmark program - <a href="https://github.com/Dieterbe/picklebench">picklebench</a> - to compare pickle, cPickle and jsonpickle.

The script fills a dictionary which gets bigger and bigger, and for certain sizes of dictionary it is saved to, and loaded from disk again.  We measure some metrics of each step.

We continue until memory is exhausted.</p>

<p>limitations of this benchmark:</p>

<ul>

<li>effects of writing a new file, or overwriting existing file, and however the filesystem deals with that (efficiency, allocation of sectors on disk, etc) are ignored</li>

<li>no explicit flushing or warming of Linux block cache, ignoring writeback caches. (but that should be okay: every write is treated the same way, and reads always benefit from warm block cache)</li>

<li>I could ignore disk i/o by only doing serializing in memory, but that wouldn't be very realistic either, and speed is lower than sequential read/write speeds of my hard disk anyway</li>

<li>other running processes are ignored. (but my pc was pretty much idle otherwise)</li>

<li>all metrics are crude</li>

<li>all single runs</li>

<li>no garbage collection is being run. volatility of datastructures is completely ignored.  Assumes that measuring the RSS difference provides useful information.</li>

<li>Other than the obvious cPickle, I did not bother to look up if optimized implementations for some things exist (like json decoders)</li>

</ul>

<p>You can easily <a href="https://github.com/Dieterbe/picklebench/blob/master/runall.sh">run the program</a> yourself, but here is the output I got, on my i3 540 @ 3.07GHz with 3GiB RAM.</p>

<pre>

Testing JsonPickle

== 1000 ==

Stored in 0.01s. file size 0.05 MB. Speed 6.56 MB/s. RSS taken 0.23 MB. (4.34 MB per MB in file)

Loaded in 0.01s. Speed 9.30 MB/s. RSS taken 0.04 MB.  (0.71 MB per MB in file)

== 4000 ==

Stored in 0.03s. file size 0.21 MB. Speed 6.93 MB/s. RSS taken 0.45 MB. (2.16 MB per MB in file)

Loaded in 0.02s. Speed 9.54 MB/s. RSS taken 0.47 MB.  (2.23 MB per MB in file)

== 16000 ==

Stored in 0.13s. file size 0.85 MB. Speed 6.80 MB/s. RSS taken 0.86 MB. (1.00 MB per MB in file)

Loaded in 0.09s. Speed 9.55 MB/s. RSS taken 0.88 MB.  (1.04 MB per MB in file)

== 64000 ==

Stored in 0.50s. file size 3.44 MB. Speed 6.87 MB/s. RSS taken 4.02 MB. (1.17 MB per MB in file)

Loaded in 0.36s. Speed 9.44 MB/s. RSS taken 2.52 MB.  (0.73 MB per MB in file)

== 256000 ==

Stored in 2.10s. file size 13.97 MB. Speed 6.64 MB/s. RSS taken 17.24 MB. (1.23 MB per MB in file)

Loaded in 1.53s. Speed 9.15 MB/s. RSS taken 8.49 MB.  (0.61 MB per MB in file)

== 1024000 ==

Stored in 8.60s. file size 56.23 MB. Speed 6.54 MB/s. RSS taken 61.64 MB. (1.10 MB per MB in file)

Loaded in 6.27s. Speed 8.97 MB/s. RSS taken 95.99 MB.  (1.71 MB per MB in file)

== 4096000 ==

Stored in 38.80s. file size 228.26 MB. Speed 5.88 MB/s. RSS taken 181.83 MB. (0.80 MB per MB in file)

Loaded in 25.17s. Speed 9.07 MB/s. RSS taken 170.84 MB.  (0.75 MB per MB in file)

== 16384000 ==

Testing cPickle

Protocol 0

== 1000 ==

Stored in 0.01s. file size 0.01 MB. Speed 0.83 MB/s. RSS taken 0.05 MB. (5.95 MB per MB in file)

Loaded in 0.00s. Speed 9.02 MB/s. RSS taken 0.05 MB.  (5.04 MB per MB in file)

== 4000 ==

Stored in 0.00s. file size 0.04 MB. Speed 8.69 MB/s. RSS taken 0.10 MB. (2.52 MB per MB in file)

Loaded in 0.00s. Speed 15.43 MB/s. RSS taken 0.13 MB.  (3.26 MB per MB in file)

== 16000 ==

Stored in 0.01s. file size 0.17 MB. Speed 11.06 MB/s. RSS taken 0.13 MB. (0.79 MB per MB in file)

Loaded in 0.01s. Speed 16.82 MB/s. RSS taken 0.10 MB.  (0.60 MB per MB in file)

== 64000 ==

Stored in 0.06s. file size 0.69 MB. Speed 12.43 MB/s. RSS taken 0.12 MB. (0.17 MB per MB in file)

Loaded in 0.04s. Speed 17.25 MB/s. RSS taken 0.77 MB.  (1.11 MB per MB in file)

== 256000 ==

Stored in 0.22s. file size 2.96 MB. Speed 13.65 MB/s. RSS taken 0.18 MB. (0.06 MB per MB in file)

Loaded in 0.17s. Speed 17.49 MB/s. RSS taken 3.09 MB.  (1.04 MB per MB in file)

== 1024000 ==

Stored in 0.88s. file size 12.20 MB. Speed 13.93 MB/s. RSS taken 0.16 MB. (0.01 MB per MB in file)

Loaded in 0.69s. Speed 17.72 MB/s. RSS taken 12.38 MB.  (1.01 MB per MB in file)

== 4096000 ==

Stored in 3.52s. file size 52.14 MB. Speed 14.80 MB/s. RSS taken 0.05 MB. (0.00 MB per MB in file)

Loaded in 2.84s. Speed 18.37 MB/s. RSS taken 49.55 MB.  (0.95 MB per MB in file)

== 16384000 ==

Stored in 12.68s. file size 218.27 MB. Speed 17.22 MB/s. RSS taken 0.19 MB. (0.00 MB per MB in file)

Loaded in 11.59s. Speed 18.82 MB/s. RSS taken 198.20 MB.  (0.91 MB per MB in file)

Testing cPickle

Protocol 1

== 1000 ==

Stored in 0.00s. file size 0.00 MB. Speed 9.65 MB/s. RSS taken 0.05 MB. (11.10 MB per MB in file)

Loaded in 0.00s. Speed 9.31 MB/s. RSS taken 0.06 MB.  (12.81 MB per MB in file)

== 4000 ==

Stored in 0.00s. file size 0.02 MB. Speed 10.95 MB/s. RSS taken 0.10 MB. (4.95 MB per MB in file)

Loaded in 0.00s. Speed 11.15 MB/s. RSS taken 0.12 MB.  (6.19 MB per MB in file)

== 16000 ==

Stored in 0.02s. file size 0.08 MB. Speed 5.26 MB/s. RSS taken 0.13 MB. (1.64 MB per MB in file)

Loaded in 0.01s. Speed 11.77 MB/s. RSS taken 0.09 MB.  (1.13 MB per MB in file)

== 64000 ==

Stored in 0.03s. file size 0.32 MB. Speed 12.60 MB/s. RSS taken 0.12 MB. (0.37 MB per MB in file)

Loaded in 0.03s. Speed 11.48 MB/s. RSS taken 0.78 MB.  (2.43 MB per MB in file)

== 256000 ==

Stored in 0.10s. file size 1.66 MB. Speed 17.00 MB/s. RSS taken 0.18 MB. (0.11 MB per MB in file)

Loaded in 0.11s. Speed 14.50 MB/s. RSS taken 3.10 MB.  (1.86 MB per MB in file)

== 1024000 ==

Stored in 0.40s. file size 7.04 MB. Speed 17.76 MB/s. RSS taken 0.16 MB. (0.02 MB per MB in file)

Loaded in 0.45s. Speed 15.54 MB/s. RSS taken 12.39 MB.  (1.76 MB per MB in file)

== 4096000 ==

Stored in 1.59s. file size 28.55 MB. Speed 17.95 MB/s. RSS taken 0.05 MB. (0.00 MB per MB in file)

Loaded in 1.88s. Speed 15.20 MB/s. RSS taken 49.55 MB.  (1.74 MB per MB in file)

== 16384000 ==

Stored in 6.23s. file size 114.59 MB. Speed 18.40 MB/s. RSS taken 0.19 MB. (0.00 MB per MB in file)

Loaded in 7.18s. Speed 15.96 MB/s. RSS taken 198.21 MB.  (1.73 MB per MB in file)

Testing cPickle

Protocol 2

== 1000 ==

Stored in 0.00s. file size 0.00 MB. Speed 9.54 MB/s. RSS taken 0.05 MB. (11.10 MB per MB in file)

Loaded in 0.00s. Speed 8.92 MB/s. RSS taken 0.06 MB.  (12.81 MB per MB in file)

== 4000 ==

Stored in 0.00s. file size 0.02 MB. Speed 13.25 MB/s. RSS taken 0.10 MB. (4.95 MB per MB in file)

Loaded in 0.00s. Speed 11.39 MB/s. RSS taken 0.12 MB.  (6.19 MB per MB in file)

== 16000 ==

Stored in 0.01s. file size 0.08 MB. Speed 13.85 MB/s. RSS taken 0.13 MB. (1.64 MB per MB in file)

Loaded in 0.01s. Speed 10.77 MB/s. RSS taken 0.09 MB.  (1.13 MB per MB in file)

== 64000 ==

Stored in 0.02s. file size 0.32 MB. Speed 13.99 MB/s. RSS taken 0.12 MB. (0.37 MB per MB in file)

Loaded in 0.03s. Speed 11.45 MB/s. RSS taken 0.78 MB.  (2.43 MB per MB in file)

== 256000 ==

Stored in 0.10s. file size 1.66 MB. Speed 16.81 MB/s. RSS taken 0.18 MB. (0.11 MB per MB in file)

Loaded in 0.12s. Speed 14.31 MB/s. RSS taken 3.10 MB.  (1.86 MB per MB in file)

== 1024000 ==

Stored in 0.37s. file size 7.04 MB. Speed 19.15 MB/s. RSS taken 0.16 MB. (0.02 MB per MB in file)

Loaded in 0.45s. Speed 15.55 MB/s. RSS taken 12.39 MB.  (1.76 MB per MB in file)

== 4096000 ==

Stored in 1.58s. file size 28.55 MB. Speed 18.09 MB/s. RSS taken 0.05 MB. (0.00 MB per MB in file)

Loaded in 1.83s. Speed 15.61 MB/s. RSS taken 49.55 MB.  (1.74 MB per MB in file)

== 16384000 ==

Stored in 6.02s. file size 114.59 MB. Speed 19.04 MB/s. RSS taken 0.19 MB. (0.00 MB per MB in file)

Loaded in 7.32s. Speed 15.65 MB/s. RSS taken 198.21 MB.  (1.73 MB per MB in file)

Testing pickle

Protocol 0

== 1000 ==

Stored in 0.01s. file size 0.01 MB. Speed 1.17 MB/s. RSS taken 0.03 MB. (3.21 MB per MB in file)

Loaded in 0.04s. Speed 0.20 MB/s. RSS taken 0.06 MB.  (6.41 MB per MB in file)

== 4000 ==

Stored in 0.02s. file size 0.04 MB. Speed 1.91 MB/s. RSS taken 0.09 MB. (2.42 MB per MB in file)

Loaded in 0.02s. Speed 2.12 MB/s. RSS taken 0.12 MB.  (3.15 MB per MB in file)

== 16000 ==

Stored in 0.08s. file size 0.17 MB. Speed 2.00 MB/s. RSS taken 0.13 MB. (0.79 MB per MB in file)

Loaded in 0.07s. Speed 2.27 MB/s. RSS taken 0.09 MB.  (0.55 MB per MB in file)

== 64000 ==

Stored in 0.33s. file size 0.69 MB. Speed 2.08 MB/s. RSS taken 0.12 MB. (0.18 MB per MB in file)

Loaded in 0.29s. Speed 2.40 MB/s. RSS taken 0.77 MB.  (1.11 MB per MB in file)

== 256000 ==

Stored in 1.34s. file size 2.96 MB. Speed 2.21 MB/s. RSS taken 0.18 MB. (0.06 MB per MB in file)

Loaded in 1.17s. Speed 2.53 MB/s. RSS taken 3.09 MB.  (1.04 MB per MB in file)

== 1024000 ==

Stored in 5.33s. file size 12.20 MB. Speed 2.29 MB/s. RSS taken 0.16 MB. (0.01 MB per MB in file)

Loaded in 4.73s. Speed 2.58 MB/s. RSS taken 12.38 MB.  (1.01 MB per MB in file)

== 4096000 ==

Stored in 21.23s. file size 52.14 MB. Speed 2.46 MB/s. RSS taken 0.05 MB. (0.00 MB per MB in file)

Loaded in 18.63s. Speed 2.80 MB/s. RSS taken 49.55 MB.  (0.95 MB per MB in file)

== 16384000 ==

Stored in 85.09s. file size 218.27 MB. Speed 2.57 MB/s. RSS taken 0.19 MB. (0.00 MB per MB in file)

Loaded in 74.60s. Speed 2.93 MB/s. RSS taken 198.20 MB.  (0.91 MB per MB in file)

Testing pickle

Protocol 1

== 1000 ==

Stored in 0.01s. file size 0.00 MB. Speed 0.80 MB/s. RSS taken 0.06 MB. (11.96 MB per MB in file)

Loaded in 0.00s. Speed 1.56 MB/s. RSS taken 0.07 MB.  (14.52 MB per MB in file)

== 4000 ==

Stored in 0.02s. file size 0.02 MB. Speed 0.84 MB/s. RSS taken 0.10 MB. (4.95 MB per MB in file)

Loaded in 0.01s. Speed 1.65 MB/s. RSS taken 0.13 MB.  (6.61 MB per MB in file)

== 16000 ==

Stored in 0.09s. file size 0.08 MB. Speed 0.85 MB/s. RSS taken 0.13 MB. (1.64 MB per MB in file)

Loaded in 0.05s. Speed 1.68 MB/s. RSS taken 0.09 MB.  (1.13 MB per MB in file)

== 64000 ==

Stored in 0.38s. file size 0.32 MB. Speed 0.85 MB/s. RSS taken 0.10 MB. (0.32 MB per MB in file)

Loaded in 0.19s. Speed 1.67 MB/s. RSS taken 0.80 MB.  (2.51 MB per MB in file)

== 256000 ==

Stored in 1.49s. file size 1.66 MB. Speed 1.11 MB/s. RSS taken 0.19 MB. (0.11 MB per MB in file)

Loaded in 0.75s. Speed 2.21 MB/s. RSS taken 3.13 MB.  (1.88 MB per MB in file)

== 1024000 ==

Stored in 6.11s. file size 7.04 MB. Speed 1.15 MB/s. RSS taken 0.16 MB. (0.02 MB per MB in file)

Loaded in 2.99s. Speed 2.35 MB/s. RSS taken 12.45 MB.  (1.77 MB per MB in file)

== 4096000 ==

Stored in 24.40s. file size 28.55 MB. Speed 1.17 MB/s. RSS taken 0.06 MB. (0.00 MB per MB in file)

Loaded in 11.97s. Speed 2.39 MB/s. RSS taken 49.74 MB.  (1.74 MB per MB in file)

== 16384000 ==

Stored in 97.62s. file size 114.59 MB. Speed 1.17 MB/s. RSS taken 0.19 MB. (0.00 MB per MB in file)

Loaded in 48.04s. Speed 2.39 MB/s. RSS taken 198.88 MB.  (1.74 MB per MB in file)

Testing pickle

Protocol 2

== 1000 ==

Stored in 0.01s. file size 0.00 MB. Speed 0.78 MB/s. RSS taken 0.06 MB. (11.96 MB per MB in file)

Loaded in 0.00s. Speed 1.57 MB/s. RSS taken 0.07 MB.  (14.52 MB per MB in file)

== 4000 ==

Stored in 0.02s. file size 0.02 MB. Speed 0.85 MB/s. RSS taken 0.10 MB. (4.95 MB per MB in file)

Loaded in 0.01s. Speed 1.52 MB/s. RSS taken 0.13 MB.  (6.60 MB per MB in file)

== 16000 ==

Stored in 0.09s. file size 0.08 MB. Speed 0.85 MB/s. RSS taken 0.13 MB. (1.64 MB per MB in file)

Loaded in 0.05s. Speed 1.66 MB/s. RSS taken 0.09 MB.  (1.18 MB per MB in file)

== 64000 ==

Stored in 0.38s. file size 0.32 MB. Speed 0.85 MB/s. RSS taken 0.10 MB. (0.31 MB per MB in file)

Loaded in 0.19s. Speed 1.65 MB/s. RSS taken 0.80 MB.  (2.51 MB per MB in file)

== 256000 ==

Stored in 1.52s. file size 1.66 MB. Speed 1.09 MB/s. RSS taken 0.19 MB. (0.11 MB per MB in file)

Loaded in 0.76s. Speed 2.18 MB/s. RSS taken 3.13 MB.  (1.88 MB per MB in file)

== 1024000 ==

Stored in 6.19s. file size 7.04 MB. Speed 1.14 MB/s. RSS taken 0.16 MB. (0.02 MB per MB in file)

Loaded in 3.01s. Speed 2.34 MB/s. RSS taken 12.45 MB.  (1.77 MB per MB in file)

== 4096000 ==

Stored in 24.60s. file size 28.55 MB. Speed 1.16 MB/s. RSS taken 0.06 MB. (0.00 MB per MB in file)

Loaded in 12.06s. Speed 2.37 MB/s. RSS taken 49.74 MB.  (1.74 MB per MB in file)

== 16384000 ==

Stored in 98.38s. file size 114.59 MB. Speed 1.16 MB/s. RSS taken 0.19 MB. (0.00 MB per MB in file)

Loaded in 47.89s. Speed 2.39 MB/s. RSS taken 198.88 MB.  (1.74 MB per MB in file)

</pre>

<p>Paraphrased:</p>

<ul>

<li>JsonPickle needs more RSS then pickle/cPickle, and runs out of memory sooner. all pickle/cPickle runs need the same RSS</li>

<li>Protocol 1/2 need the same amount of diskspace, protocol 0 needs about the double, JsonPickle about 8 times more</li>

<li>Protocol 1/2 are as fast, protocol 0 is slower. cPickle is speed king.  Jsonpickle is slow</li>

</ul>

<p>Conclusion:</p>

<ul>

<li>Use cPickle or pickle, unless they are broken for your use case(s)</li>

<li>Consider persisting only your data in appropriate formats (textfile, database, ...). Often you don't really need to persist entire <i>objects</i>.  In the case of Gensim, we can also work with numpy's dataformat.</li>

<li>If you like json, or want a very simple workaround for cPickle/pickle brokenness, and you cannot use a more appropriate format (see above) consider jsonpickle</li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/python/index.html" rel="tag">python</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/where_are_the_new_arch_linux_images/">Where are the new Arch Linux release images?</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/where_are_the_new_arch_linux_images/" rel="bookmark">
					<time class="entry-date" datetime="2011-05-17 21:29:58 -0400 EDT">
						May 17, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>This is a question I get asked a lot recently.  The latest <a href="http://www.archlinux.org/download/">official images</a> are a year old.  This is not inherently bad, unless you pick the wrong mirror from the outdated mirrorlist during a netinstall, or are using hardware which is not supported by the year old kernel/drivers.  A core install will yield a system that needs drastic updating, which is a bit cumbersome.  There are probably some other problems I'm not aware of.  Many of these problems can be worked around (with 'pacman -Sy mirrorlist' on the install cd for example), but it's not exactly convenient.</p>

<p>Over the past years (the spare time in between <a href="/my_metalband.html">the band</a>, my search for an apartment in <a href="http://en.wikipedia.org/wiki/Ghent">Ghent</a> and a bunch of other things) I've worked towards fully refactoring and overthrowing how releases are being done.  Most of that is visible in the <a href="http://projects.archlinux.org/users/dieter/releng.git/">releng build environment repository</a>.

Every 3 days, the following happens automatically:

<ul>

<li>packages to build images (archiso) and some of which are included <i>on</i> the images (aif and libui-sh) get rebuilt.  They are actually git versions, the latter two have a separate develop branch which is used. Normal packages get updated the normal way.</li>

<li>the images are rebuilt, and the dual images get generated</li>

<li>the images, the packages and their sources are synced to the public on <a href="http://releng.archlinux.org/">http://releng.archlinux.org</a></li>

</ul>

Actually things are <a href="http://projects.archlinux.org/users/dieter/releng.git/tree/scripts/releng-build-and-release-testing.sh">bit more involved</a> but this is the gist of it.  All of this is now run on a <a href="https://wiki.archlinux.org/index.php/Category:DeveloperWiki:Server_Configuration#Releng_server_.28alberich.29">dedicated VPS</a> donated by <a href="http://www.airvm.com/">airVM</a>.</p>

<p>I never really completed the <a href="/aif_automatic_lvm_dm_crypt_installations_and_test_suite.html">aif automatic test suite</a>, somewhere along the way I decided to focus on crowdsourcing test results.

The weight of testing images (and all possible combinations of features) has always been huge, and trying to script tasks would either get way complicated or insufficient.

So the new approach is largely inspired by the core and testing repositories:  we automatically build testing images, people report feedback, and if there is sufficient feedback for a certain set of images (or a bunch of similar sets of images) that allows us to conclude we have some good material, we can promote the set to official media.

<br/>The latest piece of the puzzle is the new <a href="http://www.archlinux.org/releng/feedback/">releng feedback application</a> which <a href="http://zasshi-slash.blogspot.com/">Tom Willemsen</a> contributed. (again: outsourcing FTW).  It is still fairly basic, but should already be useful enough.  It lists pretty much all features you can use with archiso/AIF based images and automatically updates the list of isos based on what it sees appearing online, so I think it will be a good indicator on what works and what doesn't, and that for each known set of isos.</p>

<p>So there. <b>Bleeding edge images for everyone</b>, and for those who want some quality assurance: <b>the more you contribute, the more likely you'll see official releases</b>.



<p>While contributing feedback is now certainly very easy, don't think that only providing feedback is sufficient, it takes time to maintain and improve aif and archiso as well and contributions in that department are still very welcome.

I don't think we'll get to the <a href="http://www.archlinux.org/news/200902-iso-release/">original plan</a> of official archiso releases for each stable kernel version, that seems like a lot of work despite all the above.</p>

<p>As for what is new: again too much to list, here is a <a href="http://releng.archlinux.org/isos/Changelog">changelog</a> but I stopped updating it at some point.  I guess the most visible interesting stuff is friendlier package dialogs (with package descriptions), support for nilfs, btrfs and syslinux (thanks <a href="http://pyther.net/">Matthew Gyurgyik</a>), and an issues reporting tool.

Under the hood we refactored quite a bit, mostly blockdevice related stuff, config generation and the "execution plan" (like, how each function calls each other and how failures are tracked) in AIF has been simplified considerably.</p>

<!-- I used to be pedantic about details like "all packages installed in the live environment must be available in the official core/extra repositories but i might become a bit less strict.  or maybe not, it's not hard to switch to official packages. -->

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/my_metalband/">My metal band</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/my_metalband/" rel="bookmark">
					<time class="entry-date" datetime="2011-05-14 14:58:12 -0400 EDT">
						May 14, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><img width="18%" src="/files/pdp3.jpg" style="float: left; margin-right: 28px"></p>

<p>Since the audience of this blog is largely technical, I don't post much about other topics, but I feel it's time for a short summary about one of my "real life projects".

<br/>In the spring of 2009 I joined a progressive death metal band.  I've been drumming since I was 17, but during the last 2 years I've been practising and rehearsing like never before.[1]

<br/>When you hear yourself on tape for the first time, it's a bit of disillusionment as you suddenly hear every imperfection, many of which you didn't realise you had (or didn't think were very noticeable).

<br/>So 2 years of practicing, rehearsing, test recordings, real recordings, mixing sessions (where you really grow a good ear towards imperfections) later we are now getting to the point where we can nail our stuff and are looking very forward to our first gig, which will be June 3rd in <a href="http://www.jhsjatoo.org/">jh sjatoo</a> in Kalken.

We've written about 7 songs, of which at this point we play 5. I wish we had proper recordings of all of them, but "Total Annihilation" captures several aspects of our style:

<object height="225" width="65%"> <param name="movie" value="http://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Fusers%2F2762471"></param> <param name="allowscriptaccess" value="always"></param> <embed allowscriptaccess="always" height="225" src="http://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Fusers%2F2762471" type="application/x-shockwave-flash" width="65%"></embed> </object>

<br/>In early 2010 I treated myself (found a nice 2nd hand deal) to a new pdp birch kit with Zildjian Z custom cymbals (that was actually at the time I was in the <a href="/not_working_for_facebook.html">interview process for a Palo-Alto position at Facebook</a> so I might have needed to sell it again soon after, but that didn't happen).

<br/> Here are some pics:

<a href="/files/pdp1.jpg">1</a>,

<a href="/files/pdp2.jpg">2</a>,

<a href="/files/pdp3.jpg">3</a>,

<a href="/files/pdp4.jpg">4</a>.

More info about the band:

<ul>

<li><a href="http://www.facebook.com/lightbulbinferno">Lightbulb Inferno on Facebook</a> (has some more pictures of the band, but not very good ones)</li>

<li><a href="http://soundcloud.com/lightbulb-inferno/">Lightbulb Inferno on Soundcloud</a></li>

<li><a href="http://www.myspace.com/lightbulbinferno">Lightbulb Inferno on Myspace (I know..)</a></li>

</ul>

[1] Hence the need I had to find <a href="/handing_off_uzbl_to_a_new_project_leader.html">a new maintainer for Uzbl</a>)

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/music/index.html" rel="tag">music</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/thank_you_google/">Thank you Google!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/thank_you_google/" rel="bookmark">
					<time class="entry-date" datetime="2011-03-28 22:54:01 -0400 EDT">
						March 28, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Google, you get a lot of bad words over you lately.  "Evil", "big brother", "dangerous", ....

<br/>But I just wanted to say: <b>thank you</b>.

<br/>You provide us some nice services. Google search, Gmail, analytics, google maps, ...

<br/>All of these products are/were game changers and made the life of people all over the world easier.

<br/>Many people take them for granted and don't realise what it takes to design, engineer and operate these applications.

<br/>That you provide them for free makes it even more amazing. And as far as advertisements are concerned; many business models rely on them and I don't see that changing any time soon.

<br/>I'll take a personalized ad over a generic ad any day.  The more you can optimize targetted ads on my screen, the more useful I'll find them.

<br/>Just don't overdo them, but you know that already.

</p>

<p>Dieter</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/dvcs-autosync_an_opensource_dropbox_clone_well_almost/">Dvcs-autosync: An open source dropbox clone... well.. almost</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/dvcs-autosync_an_opensource_dropbox_clone_well_almost/" rel="bookmark">
					<time class="entry-date" datetime="2011-03-26 21:48:56 -0400 EDT">
						March 26, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I found the Dvcs-autosync project on the <a href="http://lists.madduck.net/listinfo/vcs-home">vcs-home</a> mailing list,</p>

<p>which btw is a great list for folks who are doing stuff like maintaining their home directory in a vcs.</p>

<p><br/>In short:</p>

<ul>

<li>simple python tool (600 sloc), works with your dvcs of choice (mainly tested/used with git)</li>

<li>watches for inotify events, performs commits on changes (coalesces some changes together)</li>

<li>synchronizes with other clones (remotes), uses xmpp for push notifications</li>

<li>let's you know what's going on through libnotify popups or whatever</li>

<li><a href="http://mayrhofer.eu.org/dvcs-autosync">home page: http://mayrhofer.eu.org/dvcs-autosync</a></li>

<li><a href="http://gitorious.org/dvcs-autosync/dvcs-autosync">dvcs-autosync gitorious repo</a></li>

<li><a href="http://lists.madduck.net/pipermail/vcs-home/2011-March/000314.html">initial announcement on vcs-home</a></li>

</ul>

<p>Use cases:</p>

<ul>

<li>you have one or more trees you want to maintain under a VCS (because you want vcs advantages like history and whatnot) but it's not worth to spend time comitting manually</li>

<li>you want to backup some files transparently</li>

<li>you want to share / work with others easily</li>

<li>you like the idea of dropbox, but not the closed-source-ness or the vendor dependence</li>

<li>you work mainly with relatively small files (or.. read on)</li>

</ul>

<p>Thoughts:</p>

<ul>

<li>very simple to get started</li>

<li>simpler (and imho saner) code and implementation in comparison to <a href="http://sparkleshare.org/">sparkleshare</a></li>

<li>bound to the limitations of the dvcs. In case of git: no support for ownership, xattrs, and less suited for bigger files (although <a href="http://git-annex.branchable.com/">git-annex</a> might help?)</li>

<li>You cannot store a git repo inside a git repo, I think (i.e. I don't think you can keep a -potentially dirty- git clone in dvcs-autosync)</li>

<li>For a real, filesystem-level dropbox-alike <a href="http://www.coda.cs.cmu.edu/">coda</a> might be a better option, though I'm not sure how useful that project is right now</li>

</ul>

<p>If it sounds like something you need, try it out.  And contributions welcome.</p>

<p><br/>Next up to the todolist: more clever heuristic for event coalescing, setting up bugtracker.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/python/index.html" rel="tag">python</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/stop-abusing-si-prefixes/">Let&#39;s make the world a better place.  Let&#39;s stop the abuse of SI prefixes</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/stop-abusing-si-prefixes/" rel="bookmark">
					<time class="entry-date" datetime="2011-03-07 10:01:35 -0400 -0400">
						March 7, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>This has been on my mind for a while.  But now I actually took some time to launch a little project to do something about it.</p>

<p><br/>1024 just ain&rsquo;t 1000. <a href="http://stopabusingsiprefixes.org/">stop abusing SI prefixes!</a></p>

<p></p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/why-rewriting-git-history-and-why-commits-imperative-present-tense/">Why rewriting git history? And why should commits be in imperative present tense?</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/why-rewriting-git-history-and-why-commits-imperative-present-tense/" rel="bookmark">
					<time class="entry-date" datetime="2011-03-05 18:27:35 -0400 -0400">
						March 5, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>

There are tons of articles describing <em>how</em> you can rewrite history with git, but they do not answer "<em>why</em> should I do it?".

A similar question is "what are the tradeoffs / how do I apply this in my distributed workflow?".

<br/>Also, git developers strongly encourage/command you to write commit message in imperative present tense, but do not say why.  So, why?

<br/>I'll try to answer these to the best of my abilities, largely based on how I see things.  I won't get too detailed (there are enough manuals and tutorials for the exact concepts and commands).



<h3>Why rewriting git history?</h3>

<p>

Just like source code git history gets mostly read and relatively infrequently written.

<br/>You read history when you want to see what has changed, when searching a bug, what the difference is between branches, and so on.

<br/>The argument of "I want the history to look like exactly how it really happened" is flawed, because very often your history is suboptimal (you commit a feature, and shortly afterwards you commit a fix for that feature, or a commit that contains separate logical changes/bugfixes)

<br/>This makes history more complicated to read then it should be, so for all the folks who will ever look back at your history (even if you think that will only be yourself) a clean history is more easy to "get", just like clean source code.

<br/>Also, part of the awesomeness of git is that juggling with features (needed for debugging, trying things out, ..) in your code is so flexible (see the git commit/branch model), but if you have logical changes spread over multiple commits, or one commit containing multiple logical changes, this gets painful very quickly.

<br/>Once you figure out history rewriting (and it's pretty easy to learn, really!) it only costs a little time to clean up your history, which will pay off in a much greater extent for every time you or somebody else wants to look at, or needs to work <i>with</i> it. (again, just like source code itself!)

<br/>This also means that you don't need to spend so much time thinking about your commit messages for commits that are merely fixups or small additions to other logical changes.  Because those will be squashed into the other commits anyway.

I usually commit frequently, but end up squashing many commits together, my commit log easily gets compressed by a factor two or more.  The less history, the better. (just like source code!)

<br/>The commits you actually push (especially when pushing to a master branch) should of course be clean, accuractly described and with correct author information, for obvious reasons such as readability.

</p>

<p>

Note that there is some kind of <i>paradox</i>: you can only achieve "perfect history" if your commits are well-tested and every introduced feature has no bugs (has all bugfix commits squashed into it), but at the same time, you can only properly expose new code by making it public, and it only gets widely used and tested if it's in your main (master) branch.

<br/>This is one of the reasons why a workflow model such as one based on topic branches (aka feature branches) works: you see, git by default doesn't allow non-fast-forward pushes.

Because you obviously don't want to break the history of other people following your stable (master branch) development.  So once you push to master, it should usually be there for good.

<br/>As far as I can see, it is accepted in most projects (those run by folks with git expertise?) to push non-fast-forward to topic branches.  The idea being a topic branch is a "work in progress" branch, it is made public so multiple people can review/work on it.  Based on that work/review, its history will often get rewritten through a non-fast-forward push.  And if you're following/working on such a branch, you should be clever enough to deal with changed history.

<br/>So, a topic branch allows you to make changes public, get feedback, clean up the history of the patchset you (and maybe others) are working on, and when satisfied, you can push to master.

<br/>There is still a chance you'll later need to push bugfixes to master, but this will happen much more infrequently, so while there is no perfect workflow model that creates perfect history (in master) combined with perfect usability (no need to handle non-fastforward pushes) I find this model brings a quite good compromise.

</p>

<p>

To paraphrase, I would say:

<br/><i>You should care about clean vcs history for the same reasons you should care about clean code</i>.

<br/>Just like using git is good to progressively help reaching better software, so is git history rewriting good for progressively reaching a better git history.  Version control on top of version control, if you will.  A very crude form of version control but I don't think it needs to be any more advanced then this.

</p>

<h3>Why should I write my commits in imperative present tense ('do foo') rather then past tense ('did foo')?</h3>

<p>

Git developers command doing this (at least for the <a href="http://repo.or.cz/w/git.git">git project</a>), but they did not document <em>why</em>'s.

Some commonly cited reasons:

<ul>

<li>Consistency.  That's how it is in many projects (including git itself). Also git tools that generate commits (like git merge or git revert) do it.</li>

<li>It's usually shorter</li>

<li>You can name commits more consistently with titles of tickets in your issue/feature tracker (which don't use past tense, although sometimes future)</li>

</ul>

Another reason I came up with: people not only read history to know "what happened to this codebase",

but also to answer questions like "what happens when I cherry-pick this commit", or "what kind of new things will happen to my code base because of these commits I may or may not merge in the future".

(Note that these are questions about the past,current and future)

This is more a subjective topic, but I feel that the best way to capture this time-independence of a commit is to write down as time-agnostic as possible,

and something like 'do foo' (which could be 'do foo in the future', for instance) is more generic then something with a sense of time hardwired in it ("did foo" or "will do foo")

</p>

<p>

See also

<ul>

<li><a href="http://git.kernel.org/?p=git/git.git;a=blob;f=Documentation/SubmittingPatches;h=ece3c77482b3ff006b973f1ed90b708e26556862;hb=HEAD">Git contributor guidelines</a></li>

<li><a href="http://progit.org/book/ch5-2.html">ProGit: contributing to a project</a></li>

<li><a href="http://en.wikibooks.org/wiki/Git/Introduction#Good_commit_messages">WikiBooks Git introduction</a></li>

</ul>

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/git/index.html" rel="tag">git</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/can_we_build_a_simple_cross-distribution_installation_framework/">Can we build a simple, cross-distribution installation framework?</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/can_we_build_a_simple_cross-distribution_installation_framework/" rel="bookmark">
					<time class="entry-date" datetime="2011-02-06 23:46:18 -0400 -0400">
						February 6, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Today at <a href="http://www.fosdem.org/2011/">Fosdem 2011</a> I did my talk <a href="http://fosdem.org/2011/schedule/event/distro_crossinstall">Can we build a simple, cross-distribution installation framework?</a></p>

<p>Basically, using the <a href="http://www.archlinux.org/">Arch</a> Installation Framework as a starting point, along with the notion that most of the code is actually not Arch-specific I adressed other distros to check</p>

<p>if there was any interest in sharing workload on the distribution-agnostic aspects of the framework. If other distros with a similar philosophy of little-abstractions/KISS would join, we would all reap the benefits of a simple, yet quite featureful installer.</p>

<p>There was some interest, so we&rsquo;ll see what happens.</p>

<ul>

<li><a href="/files/lif.pdf">slides</a></li>

<li><a href="http://www.youtube.com/watch?v=83xBdlbGHdI">video</a></li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/dir_fosdem_2011/">Dir 2011, Fosdem 2011</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/dir_fosdem_2011/" rel="bookmark">
					<time class="entry-date" datetime="2011-01-25 23:15:45 -0400 -0400">
						January 25, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>On February 4, I&rsquo;ll be in Amsterdam at <a href="http://ilps.science.uva.nl/dir2011/cfp.html">DIR 2011</a>, the 11th Dutch-Belgian Information Retrieval Workshop.</p>

<p>After that, I&rsquo;m going to the devopsdinner and Fosdem beer event in Brussels.</p>

<p>On february <sup>5</sup>&frasl;<sub>6</sub> of course, Fosdem itself.  Looking forward to the systemd talk.</p>

<p>On sunday I&rsquo;ll do a talk about <a href="http://www.fosdem.org/2011/schedule/event/distro_crossinstall">simple shell based Gnu/Linux installers</a>,</p>

<p>like mentioned earlier I hope devs from other &ldquo;lightweight&rdquo;/kiss-style distro&rsquo;s will be present (Gentoo and other *too&rsquo;s, Crux, *ppix, &hellip; You know who you are)</p>

<p>It would be interesting to share some common codebase for distribution independent topics (like filesystems), or at least discuss how feasible it would be.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/building_a_search_engine/">Building a search engine</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/building_a_search_engine/" rel="bookmark">
					<time class="entry-date" datetime="2011-01-22 19:15:29 -0400 -0400">
						January 22, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I started working at <a href="http://www.ibcn.intec.ugent.be/">IBCN</a>, the research group of the university of Ghent.

I was looking to get back to the challenging world of high-performance and large-scale (web) applications, but I also wanted something more conceptual and researchy, rather then the highly hands-on dev- and ops work I've been doing for a few years now.

<br/>The <a href="https://projects.ibbt.be/bom-vl/">Bom-vl</a> project is pretty broad: it aims to make the Flemish cultural heritage media more useable by properly digitizing, archiving and making public the (currently mostly analog) archives from providers such as TV stations.</p>

<p><img src="/files/blog/ibbt/ilabt2.jpg"></p>

<p>Currently, I believe there's some >100TB of media in our cluster (mostly from VRT, afaik), along with associated textual descriptions/metadata, with more to follow.  The application is currently for a selected audience but the goal is to make it public in the near future.

I'm part of the search engine team, we aim to provide users with the most relevant hits for their queries, by using existing technology (think Lucene, hadoop, etc) or devising our own where needed.

As I'm charged with a similarity search problem ("other videos which might also interest you"), I'm studying information retrieval topics such as index and algorithm design and various vector models. Starting next week, I'll probably start implementing and testing some approaches.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/blog_moved/">Blog moved</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/blog_moved/" rel="bookmark">
					<time class="entry-date" datetime="2011-01-19 19:48:39 -0400 -0400">
						January 19, 2011
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>This blog now runs on <a href="http://pyblosxom.bluesock.org/">Pyblosxom</a> on Lighttpd on my new <a href="http://www.linode.com">Linode</a> machine.</p>

<p><br/>The moving/conversion process wasn&rsquo;t as smooth as I thought it would be as I needed to work quite a bit on pyblosxom and implement some new plugins</p>

<p>to get certain features working (like syntax highlighting).</p>

<p><br/>Also, my <a href="http://priorweb.be/">previous hosting provider</a> removed my account before the contract expired.</p>

<p><br/>But luckily I managed to restore everything and all should work pretty much as before, in particular:</p>

<p><br/>Rss feeds should still be working on the old urls and the same GUID&rsquo;s are used to avoid spamming anyone, syntax highlighting of all old entries and comments works, but not yet posting highlighted code in new comments.</p>

<p>

In related news: pyblosxom has improved quite a bit and is nearing a 1.5 release.

<br/>The <a href="https://github.com/Dieterbe/drupal-to-pyblosxom">drupal-to-pyblosxom</a> tool is now quite polished and comes with a bunch of "check whether everything is ok" scripts.

</p>

<p>If you notice anything funny, let me know.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/libui-sh_a_library_providing_ui_functions_for_shell_scripts/">Libui-sh: a library providing UI functions for shell scripts</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/libui-sh_a_library_providing_ui_functions_for_shell_scripts/" rel="bookmark">
					<time class="entry-date" datetime="2010-12-28 22:59:15 -0400 -0400">
						December 28, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<blockquote><p>

== A library providing UI functions for shell scripts ==</p>

<p>When you write bash/shell scripts, do you write your own error/debug/logging/abort functions?<br />

Logic that requests the user to input a boolean, string, password, selection out of a list,<br />

date/time, integer, ... ?</p>

<p>Libui-sh is written to take care of all that.<br />

libui-sh is meant to a be a general-purpose UI abstraction library for shell scripts.<br />

Low impact, easy to use, but still flexible.<br />

cli by default, can optionally use ncurses dialogs as well.<br />

</p>

<p>To start using it, you only need to source it and you can start calling its functions.<br />

To reconfigure it (i.e. to change UI type, debug settings, logfile location),<br />

just run the command libui_sh_init</p>

<p>example usage:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #008000">source</span> /usr/lib/libui.sh

ask_yesno <span style="color: #BA2121">&#39;do you want to continue?&#39;</span> <span style="color: #666666">||</span> <span style="color: #008000; font-weight: bold">return</span>

libui_sh_init cli /tmp /tmp/yourlogfile

log <span style="color: #BA2121">&#39;we just got hassle-free logging&#39;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>

The library is not strictly a UI library, it also contains a few useful functions like<br />

check_is_in (check if an element can be found in a set - usually an array) and<br />

seteditor (interactive $EDITOR selection)</p>

<p>Dependencies:<br />

- bash (for cli interface)<br />

- optionally: dialog (for ncurses interface)

</p></blockquote>

<p><a href="https://github.com/Dieterbe/libui-sh">https://github.com/Dieterbe/libui-sh</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/migrating_blogs_from_drupal_to_pyblosxom/">Migrating blogs from Drupal to Pyblosxom</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/migrating_blogs_from_drupal_to_pyblosxom/" rel="bookmark">
					<time class="entry-date" datetime="2010-12-19 19:54:07 -0400 -0400">
						December 19, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><a href="http://pyblosxom.bluesock.org/">pyblosxom</a> is a pretty cool blogging platform written in python.<br />

Like many of the modern minimal blog engines it works with plaintext files only (no database), has a relatively small codebase, supports many plugins (like markdown support), is written in a proper scripting language, has a simple and clean file structure, is seo-friendly, and so on.<br />

The one feature that sets it apart from other minimal blog engines is that it supports comments, and doesn't just rely on an external service like disqus, but stores comments as plaintext files as well.<br />

Some features seem a bit overengineered (like, multiple possible locations to store themes (known as "flavours") and templates; I'm a fan of convention over configuration and keeping things simple), but discussing this with the maintainer revealed this is because pyblosxom is meant as a reimplementation of the original perl-based bloxsom project.  Over time features could be simplified and/or redesigned.<br />

So I plan to migrate this blog from drupal to pyblosxom.<br />

To do this, I'm building the tool <a href="https://github.com/Dieterbe/drupal-to-pyblosxom">drupal-to-pyblosxom</a>.<br />

The goal is to convert posts, associated metadata (publish time, tags) and comments from the drupal database to pyblosxom files.  Source code display should be converted too (merely a matter of converting between different plugin conventions), and images shown should be downloaded.  Currently I'm about halfway, if there's anyone out there with a similar use case, help is welcome ;)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/python/index.html" rel="tag">python</a>
            
                <a href="http://localhost:1313//tags/drupal/index.html" rel="tag">drupal</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/checking_if_a_git_clone_has_any_unique_content__git_and_svn_scripts/">Checking if a git clone has any unique content, git/svn scripts</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/checking_if_a_git_clone_has_any_unique_content__git_and_svn_scripts/" rel="bookmark">
					<time class="entry-date" datetime="2010-12-16 18:06:23 -0400 -0400">
						December 16, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>When cleaning up a system and going over git repositories I often wonder if a git repo contains any interesting, but unpushed work. (i.e. "unique" content)<br />

I heard bzr (or was it hg...) can do it out-of-the-box, but I couldn't find any existing solution for git.<br />

So I wrote a script to do this.  It checks a repo for unique commits, tags, branches, dirty files/index, added files, or stashed states.  In comparison to a specific remote, or all of them, and uses an appropriate exitcode.<br />

<a href="https://github.com/Dieterbe/git-scripts/blob/master/git-remote-in-sync.sh">git-remote-in-sync.sh</a><br />

The script is part of a bigger <a href="https://github.com/Dieterbe/git-scripts/">git-scripts</a> repo (most of the scripts written by random people).  Although the original repo creator hasn't gotten back to me this seems like a good starting point to have some sense of order in the wildspread of git scripts.</p>

<p>Here are some other scripts I find pretty useful:</p>

<ul>

<li><a href="https://github.com/Dieterbe/git-scripts/blob/master/git-ignore-wizard">git-ignore-wizard</a>: dmenu-file-selector for adding ignore rules because I always forget which file to use for which use-case.</li>

<li><a href="https://github.com/Dieterbe/git-scripts/blob/master/git-root">git-root</a>: get the path of the git root</li>

<li><a href="https://github.com/Dieterbe/git-scripts/blob/master/git-merge-repo">git-merge-repo</a>: haven't tried this, but looks neat</li>

</ul>

<p>On the topic of scripts for VCS'es, I also have one for svn.<br />

This one is for those occasions where you have a directory tree in svn, and you want to replace the entire tree by another tree.  The structure can be completely different (files, directories added/renamed,removed, etc) and it becomes painful to do it manually, if you even manage to keep svn from going berzerk on you.<br />

<a href="https://github.com/Dieterbe/svn-scripts/blob/master/svn-replace-subtree">svn-replace-subtree</a> takes care of it.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/git/index.html" rel="tag">git</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/filesystem_code_in_aif/">Filesystem code in AIF</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/filesystem_code_in_aif/" rel="bookmark">
					<time class="entry-date" datetime="2010-12-08 12:24:03 -0400 -0400">
						December 8, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>In light of the work and discussions around supporting Nilfs2 and Btrfs on Arch Linux and its installer AIF,<br />

I've shared some <a href="http://mailman.archlinux.org/pipermail/arch-releng/2010-December/001310.html">AIF filesystem code design insights and experiences</a> on the arch-releng mailing list.<br />

This is some hard to understand code.  Partly because it's in bash (and I've needed to work around some limitations in bash),<br />

partly because there is some complex logic going on.</p>

<p>I think it's very useful material for those who are interested (it can also help understanding the user aspect),<br />

so I wanted to share an improved version here.<br />

On a related topic: I proposed to do a session at <a href="http://www.fosdem.org">Fosdem 2011/"distro miniconf"</a> about simple (console based) installers for Linux,<br />

and how multiple distributions could share efforts maintaining installation tools, because there are a lot of cross-distribution concerns<br />

which are not trivial to get right (mostly filesystems, but I also think about clock adjustments, bootloaders, etc).<br />

Already several distro's use the (or a fork of) the Arch installer, for example <a href="http://pentoo.blogspot.com/2010/10/pentoo-installation-made-easy.html">Pentoo</a>,<br />

but I think cooperation could be much better and more efficient.</p>

<p>Anyway:<br />

<br />

my acronyms for this text:</p>

<ul>

<li>LV = lvm2 Logical Volume</li>

<li>VG = lvm2 Volume Group</li>

<li>PV = lvm2 Physical Volume</li>

<li>DM = Device Mapper</li>

<li>BD = Block Device</li>

<li>FS = File System</li>

<li>DF = DeviceFile</li>

</ul>

<p>"Normal" FS'es ("do something on the BD represented by DF /dev/foo, so that you can then call `mount /dev/foo $somedir`") are <em>trivial</em> to add to aif.<br />

Basically you just need to tell aif the name of the filesystem, and which commands and arguments it needs to invoke to create it and add a label to it.<br />

Nilfs2 falls in this category.  So do ext2/3/4, xfs, jfs, reiserfs, etc.  (Nilfs is now supported and new <a href="http://build.archlinux.org/isos/">archiso testbuilds</a> are available)</p>

<p>"Complex" FS'es (which yield a new DF for a DM BD, which can span multiple underlying BD's, etc) are more difficult, and I'll explain why.<br />

Btrfs falls in this category.  So do LVM, dm_crypt and softraid.  In aif terminology anything you put on top of a BD is a FS.  This is not always technically correct, but it's not far-fetched and avoids needless complication.  For example softraid would be a FS you put on top of one or more BD's, and which itself yields a new BD on top of which you can put something else.<br />

In the same way I call a VG a FS being applied on top of a PV BD, which itself results in a new BD which can host multiple LV FS'es, which in return yield new BD's which can host other FS'es.  Currently AIF provides support for lvm and dm_crypt, but not softraid or Btrfs.</p>

<p>How aif works is this: it uses a "model" that represents how your DF/FS structure will look like.<br />

I personally usually configure my hard disk like this:<br />

a boot partition, and a partition on which i do dm_crypt, which results in a DM BD, which I make a PV, then put a VG on<br />

it, which contains multiple LV's, one for swap, and two containing<br />

some FS'es which get mounted as / and /home.</p>

<p>You can see that model on the bottom ($BLOCKDATA) of <a href="https://github.com/Dieterbe/aif/blob/master/examples/fancy-install-on-sda">the example file "fancy-install-on-sda" for automatic installations, included with aif</a>.</p>

<p>You might have noticed in the installer - if you do it interactively - how you first configure all<br />

your filesystems in the dialog interface, but only after confirming, it<br />

does all the required actions, step by step.  Actually the dialog-based configuration helper will just generate a textfile in the same format as $BLOCKDATA and the processing code is the same for interactive and automatic installs.<br />

Since in the config file for an automatic install you could define your FS's in abitrary order, aif<br />

figures out the dependencies and processes things in the right order.<br />

With the example given above aif will parse the text and will figure out the order of creation: first partition (obviously), then create the dm_crypt, then the PV, then the VG,<br />

then the LV's, then the FS'es on those LV's)<br />

then mount all mountpoints in the right order (first /, then /home and /boot)<br />

On rollback (when user changes his mind, an error occured - usually because of misconfiguration like a too big LV) everything I just explained happens in reverse.<br />

This allows users to tune their config (or try something completely different), without the installer breaking with errors like "This device is already marked as encrypted" or "VG already exists"</p>

<p>I choose this model-based approach initially because I wanted to get rid<br />

of the ugly, hacky original installer code, but still provide a lot of<br />

control through the nice dialog interfaces.  And interfaces that work fast (not causing you to wait between every step because it's creating the FS you just defined).<br />

Perhaps most importantly, since my main goal was automautic installs where you could just specify how you wanted your<br />

FS/BD structure to look like (not a series of commands), relatively little extra code was needed.  (this is also what separates AIF from FAI&amp;debian installer.  On Debian the interactive and automatic installers are different projects.  On Arch they are just different extensions for the same codebase)</p>

<p>Advantages:</p>

<ul>

<li>provides some abstraction, it's trivial to support for new (simple) filesystems.</li>

<li>makes dialog-based "configurator" easier, because we can share code with the automated installer</li>

<li>the descriptive style of the config makes it easier (although the actual format could be further improved).<br />

 definitely easier then running/writing a series of commands (resp. interactive, automatic install).<br />

 if we would make users run/write a series of commands, we also couldn't support automatic rollbacks in case of failures.</i>

</ul>

<p>Disadvantages:</p>

<ul>

<li>the more control you want to give users, the more you're just putting<br />

  effort in wrapping commandline arguments in fancy dialog interfaces<br />

  (although there is also a textbox where you can enter which ever<br />

  additional arguments you want, so this is a compromise)</li>

<li>pretty hard to implement fancier filesystems, you usually need to<br />

  take the common use cases. (see next point)</li>

<li>bash datastructures are very limited. it's not easy to translate this model in a<br />

  datastructure.  If in "FS on top of a BD" the FS is a child, and the BD a parent, it would be like a tree,<br />

  but each node could have multiple children and multiple parents, i.e. a graph.<br />

  For now I choose to ignore the "multiple parents" clause.<br />

  Currently the only implication in aif is that you cannot have a VG which consumes multiple PV's.<br />

  This is rare enough to justify this simplification, but still quite some code is needed to update and parse text files<br />

  to mimic the datastructure, although I do consider using a specific<br />

  optimized text format and an external tool to update/query the data. (yaml?)<br />

  (See <a href="https://bugs.archlinux.org/task/15640">FS 15640</a>).<br />

  Multiple children do need to be supported (a VG can have multiple LV's. line 34 in the example file)<br />

  Implementing Softraid in this model means I need to support multiple parents, i.e. work with a graph structure.<br />

  For Btrfs, the LVM-like restrictiction (no multiple physical volumes for the same FS) might be an acceptable compromise</li>

<li>users cannot do their own stuff outside aif and expect to see the<br />

  results inside aif.  If the installer would execute everything in realtime,<br />

  you could detect changes being made to the system (probably not easy though)</li>

<li>since changes don't happen in realtime, the model needs to update itself to represent how<br />

the actual state <em>would</em> look like.  For example: if you just added a dm_crypt FS on a BD, we must create<br />

a new entry /dev/mapper/$label in the model</li>

<li>for PV's, you need a way to differentiate in the menu between the<br />

  real BD (the one on which you say you want to put a PV FS) and the actual PV (on which you can put VG FS's),<br />

  so aif generates an entry with the same name as the DF, but with a '+' appended to the file.<br />

  (see the example file if unclear).  Although this problem is not specific to the actual model approach,<br />

  it's more caused by my desire to present a "global interface" to the user, and not a series of wizards and dialogs</li>

<li>Rollbacks are cool, but requires some hard to maintain code, and I doubt they are used often.<br />

(also this is not really specific about the model approach taken, but still worth mentioning)</li>

</ul>

<p>Because of all this, I have sweared quite a bit over the last few<br />

years, wondering if bash really was a good choice.  But using an external tool to work with a text-base graph/tree datastructure (where nodes can have some properties) will probably remove the big nuisance.  Also, Because bash v4 has associative arrays (finally), I can clean up a bunch of other code as well.</p>

<p>I've pondered whether we should just let users do everything on the commandline (like Gentoo), or provide a minimal layer of<br />

abstraction, like provide some scripts which they can modify that setup<br />

a system in a certain way. (for example, basically a series of mkfs; mount;pacman; calls)<br />

Another alternative would be to just make the user choose between a series of "common setups" and make them answer some questions for the choosen setup.<br />

This is how the old installer did it, and afaik archboot still does it, but it doesn't scale well with more and more possibilities.<br />

Actually, aif still contains the optional "autoprepare" method, which is in fact a simple wizard for a simple setup.</p>

<p>I guess it's a tradeoff between making it easy for users and not overloading the brain of people who want to hack on the installer.<br />

The approach which afaik has always been taken by Arch is to make the installer hold the hands of the user.<br />

When creating aif, I've choosen to stick to that concept.  And frankly I still like the idea.  It may be hard to maintain,<br />

but as a user you can finish all your installs and have a lot of options, but still use very minimal keystrokes (and mental energy).</p>

<p>Like mentioned earlier, softraid hasn't been implemented yet in aif, nor btrfs.<br />

I would need to know the most common/recommended use cases, and figure out the best way to implement them.<br />

Btrfs might be relatively easy, if i can implement it like i did lvm.  But it seems like a great FS and I don't want to provide only-half-assed support for it.<br />

Either way, refactoring the datastructure is something that will needs to be done at some point, especially for softraid.</p>

<p>I hope this article was a bit understandable.  And if you have any advice, please share :)<br />

The actual blockdevices-filesystems library of AIF is here:<br />

<a href="https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-blockdevices-filesystems.sh">https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-blockdevices-filesystems.sh</a><br />

And the menu's are here:<br />

<a href="https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-ui-interactive.sh">https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-ui-interactive.sh"</a> (the most interesting functions are interactive_filesystems for the main FS menu, and interactive_filesystem which handles definition of a specific FS)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/handing_off_uzbl_to_a_new_project_leader/">Handing off uzbl to a new project leader</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/handing_off_uzbl_to_a_new_project_leader/" rel="bookmark">
					<time class="entry-date" datetime="2010-11-22 15:05:35 -0400 -0400">
						November 22, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>As of yesterday, <a href="http://necronomicorp.com/lab/">Brendan 'bct' Taylor</a> is the new Uzbl project leader / maintainer.<br />

Yesterday I did the <a href="http://www.uzbl.org/news.php?id=30">newspost on uzbl.org</a> which explains the reasoning.  I can add it feels pretty weird "giving away" and "leaving behind" a project you spent so much time on and which grew a large (well, for a FOSS side project with a hacker audience) base of users and contributors, and which served as inspiration for various other projects.</p>

<p>But I know this was the right thing to do.  On one hand there were more and more contributions coming in and changes being proposed but on the other hand I disliked being involved so deeply in a "frontend" project.  Early last year, I happened to <a href="/uzbl_a_browser_that_adheres_to_the_unix_philosophy">see some problems with browsing and had some cool ideas to attempt alleviate them</a>, so it was fun kickstarting the project and making some things working, but I don't want to be the guy <i>maintaining a browser</i>.<br />

My demotivation has been holding back the progress of the project, but luckily my request for change did not go unanswered.  Brendan stepped up, shared some ideas and because he is well aware of all the work currently going on (including his own) he seems like a good candidate to take uzbl wherever he thinks it should go.</p>

<p>Also, because of the "I just want something that works completely, damnit!" I've never been a full-time Uzbl user.  (I think most uzbl users - and users of "hacker browsers" in general - still keep another browser for some specific sites and whatnot).  And I think some implementation decisions were a bit too radical and caused a bit too much complexity in return of too little flexibility.  Which is very ironic, because clearly plenty of folks love the uzbl architecture, and most say it just needs some finetuning (I.e. some people use the fast C-based cookie daemon rather then the python one, and it seems the problems with the escaping is something most people are okay with working around while waiting for a proper fix, whereas the non-perfect design frustrated me but I wasn't interested fixing it myself).  I'm getting intrigued in the advantages an integrated, single-language, tightly-coupled programming api can bring (like how <a href="http://luakit.org/">luakit</a> provides lua-bindings to WebkitGtk+), a design like this clearly has its own tradeoffs but at least it seems more easy to build something that works reasonably.  So I could try that and see how that works out.  Although I'm not looking forward to learning yet another language..<br />

Maybe this is just kind-of a "burnout", I don't know, Brendan (and others) have told me I can sound like I'm trying to discourage.  So I'll stop now.  At least now, everybody is happy ;-)</p>

<p>Stay tuned for the cool things Brendan will announce shortly, it will make uzbl better for existing and new users.<br />

Good luck, Uzbl community, although I can't help but watching closely...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/uzbl/index.html" rel="tag">uzbl</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/rsyncbench_an_rsync_benchmarking_tool/">Rsyncbench, an rsync benchmarking tool</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/rsyncbench_an_rsync_benchmarking_tool/" rel="bookmark">
					<time class="entry-date" datetime="2010-10-15 09:38:12 -0400 EDT">
						October 15, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Background info:<br />

I'm currently in the process of evaluating (V)PS hosting providers and backup solutions.  The idea being: I want a (V)PS to run my stuff, which doesn't need much disk space,<br />

but in the meantime it might be a good idea to look for online backup solutions (oops did I say "online"? I meant "cloud"), like on the (V)PS itself, or maybe as a separate solution.<br />

But I've got some diverse amount of data (my personal data is mostly a lot of small plaintext files, my mom has a windows VM for which I considered syncing the entire vdi file)<br />

At this point the biggest contenders are <a href="http://linode.com/">Linode</a> (which offers quite some flexibility and management tools, but becomes expensive when you want extra disk space (2$/month*GB), <a href="http://www.rackspace.com/apps/backup_and_collaboration/data_backup_software/">Rackspace backup</a> gives you 10GB for 5$/month, but they have nice backup tools so I could only backup the important files from within the windows VM (~200MB), and then there's <a href="http://www.hetzner.de/">Hetzner</a>, which offers powerful physical private servers with a lot of storage (160GB) for 29eur/month, but less flexibility (I.e. kvm-over-ip costs an extra 15eur/month)</p>

<p>Another issue, given the limited capacity of Belgian internet connections, I needed to figure out how much bandwith rsync really needs, so I can calculate if the duration of a backup run including syncing the full vdi file is still reasonable.</p>

<p>I couldn't find an rsync benchmarking tool, so I wrote my own.</p>

<p>Features:</p>

<ul>

<li>simple</li>

<li>non invasive: you specify the target and destination hosts (just localhost is fine too), and file locations</li>

<li>measures time spent, bytes sent (measured with tcpdump), and data sent (rsync's statistics which takes compression into account)</li>

<li>supports plugins</li>

<li>generates png graphs using Gnuplot</li>

<li>two current plugins: one using files of various sizes, both randomly generated (/dev/urandom) and easily compressable (/dev/zero), does some use cases like initial sync, second sync (no-op), and syncing with a data block appended and prepended.  The other plugin collects vdi files from rsnapshot directories and measures the rsyncing from each image to the next</li>

</ul>

<p><br />

Non-features:</p>

<ul>

<li>no plugins yet for other use cases then my own (no file removal, renaming, working with multiple files, working with small files, ...)</li>

<li>doesn't test a lot of different file sizes and such</li>

<li>not as finished as my other projects (no Makefile, graphs are rough.  but I have no time to go dive further in the gnuplot stuff)

<li>the benchmarking process takes a long time, due to a lot of juggling with big files. some steps can be optimized</li>

</ul>

<p>Here is an example graph:<br />

<img src="/files/rsyncbench_random_images_sent.png"/><br />

The first entry on the x-asis is on 1MiB, even though it seems like 0MiB because of the scale.<br />

Notice how rsync is pretty efficient when it has nothing to do (no-op), and the sizes of transmitted data correspond exactly to what has changed (even if you prepend data in the beginning and all data "moves to the back", rsync notices this)<br />

The compressed numbers (reported by rsync) are very close to the real numbers measured with tcpdump.  Which makes sense, random data is not easy to compress.  OTOH, if i take the graph of the case where I sync images which are built from /dev/zero, the story similar so either rsyncs compression sucks (which I find hard to believe), or the guy on #rsync who told me those numbers are about the compressed data was wrong (maybe) or I just messed up something (likely)</p>

<p>So, I hope this is useful to someone, and maybe others can clone the project and improve it further.  I found it weird that I couldn't find an rsync benchmarking tool, because rsync's algorithm is non-obvious and it can be really interesting to understand all its characteristics in various use cases.</p>

<p>Project page: <a href="http://github.com/Dieterbe/rsyncbench">rsyncbench on Github</a></p>

<p>Oh and about my backups? Rsyncing the different vdi files takes upto a few hundreds of MB's, not an ideal solution given the upload speeds in Belgium.<br />

I'll figure out something else.  Like backing up from inside windows (maybe using the rackspace service), or mounting the vdi and rsyncing the data from there.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/an_rss2email_fork_that_sucks_less/">An rss2email fork that sucks less</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/an_rss2email_fork_that_sucks_less/" rel="bookmark">
					<time class="entry-date" datetime="2010-09-25 20:33:08 -0400 EDT">
						September 25, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><a href="http://www.allthingsrss.com/rss2email/">Rss2email</a> is a great tool.  I like getting all my news messages in my mailbox and using smtp to make the "news delivery" process more robust makes sense.<br />

However, there are some things I didn't like about it so I made a <a href="http://github.com/Dieterbe/rss2email/">github repo</a> where I maintain an alternative version which (imho) contains several useful improvements, both for end users and for developers/downstreams.<br />

Also, this was a nice opportunity for me to improve my python skills :)</p>

<p>Here is how it compares:<br />

<br />

(most of the changes are only in the xdg branch, which is the one I use and test)</p>

<table>

<tr>

<th>criterion</th>

<th>official version</th>

<th>my fork</th>

</tr>

<tr>

<td>code hosting/release process</td>

<td>"release" = tarball containing updated code corresponding to various fixes, and snapshots of other projects (dependencies).  no version control, not even separate patches.  no bug tracker.</td>

<td>git. upstream tracking branch, master branch (basic "good stuff" patches), XDG topic branch (my favorite).  Does not include code from other projects, rather list dependencies.  Github issue tracker</td>

</tr>

<tr>

<td>code style</td>

<td>dirty (extraneous whitespace, ^M characters, incorrect permissions, loads of bogus [whitespace] changes, ..).  The python code itself seems nice though</td>

<td>clean</td>

</tr>

<tr>

<td>file storage &amp; config</td>

<td>all in ~/.rss2email, list of feeds, email address and feeds state go into pickle file. commands like 'r2e add', 'r2e delete', 'r2e list' to manage feeds. feed ids change when feeds get deleted.  'r2e email' to manage email adress.</td>

<td>adherence to xdg basedir spec. list of feeds goes into plaintext file, so does email address.  state in separate pickle file.  removed all the [now pointless] commands.</td>

</tr>

<tr>

<td>Temporary disabling of feeds</td>

<td>no (if you remove a feed, you loose the state info)</td>

<td>yes.  comment it out or remove it.  state info won't be lost</td>

</tr>

<tr>

<td>installation/runtime</td>

<td>no Makefile.  no reliance on $PATH, locking code in python.  Distros are applying patches and/or using custom wrapper scripts</td>

<td>smarter wrapperscript that prevents multiple runs, so removed locking code from python.  Has Makefile.  Easy to package</td>

</tr>

<tr>

<td>logging/debugging</td>

<td>useful info messages hidden by default, "verbose mode" and error messages using print calls all over the place</td>

<td>useful messages on stdout.  additional (info/warn/error/..) logging and debuglogging use python module (xdg compliant)</td>

</tr>

<tr>

<td>web ui</td>

<td>yes</td>

<td>no (I don't need it)</td>

</tr>

<tr>

<td>windows support</td>

<td>yes</td>

<td>no (unless somebody ports xdg to windows and updates the wrapper script)</td>

</tr>

</table>

<p>Other then that, there are also some smaller fixes in various places.</p>

<p>I'm using my version "in production" and it works great for me so far.<br />

I have contacted the author and told her about my changes, but no response yet.<br />

For now, you can treat this as an alternative version that stands on it's own.  I made an Arch <a href="http://aur.archlinux.org/packages.php?ID=41136">rss2email-xdg-git</a> package in the AUR.</p>

<p>Oh, and I'm liking python :)  Pretty nice and powerful language.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/python/index.html" rel="tag">python</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/what_the_open_source_community_can_learn_from_devops/">What the open source community can learn from Devops</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/what_the_open_source_community_can_learn_from_devops/" rel="bookmark">
					<time class="entry-date" datetime="2010-09-03 22:26:22 -0400 EDT">
						September 3, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Being active as both a developer and ops person in the professional life, and both an open source developer and packager in my spare time, I noticed some common ground between both worlds, and I think the open source community can learn from the Devops movement which is solving problems in the professional tech world.</p>

<p>For the sake of getting a point across, I'll simplify some things.</p>

<h3>First, a crash course on Devops...</h3>

<p><br />

A commonly used organisatorial idiom used in tech companies is that of developers and operations.</p>

<p>Developers:</p>

<ul>

<li>develop a product</li>

<li>improve their product based on feedback from production usage</li>

</ul>

<p>Operations:</p>

<ul>

<li>put the product in production, making it available for users/customers</li>

<li>give feedback to devs</li>

</ul>

<p>Experience shows this model often falls short.  'Dev' and 'Ops' being too artificially separated from each other, resulting in improper communication, clashing procedures and tools,<br />

resulting in devs disliking ops ("we need to push this out to users, ops are holding us back"), and the other way around ("again new code that will cause trouble, and we will have to figure it out")<br />

It doesn't take a genius to see this is pretty ineffective.  There's a better way: integrating and reconciling dev and ops, so that all involved know the hard parts of each others' jobs, and in fact letting each other do the others' job.  (developers being responsible for their own checkouts, ops working on the code, etc).  Most of all it's about culture over processes.  About being smart and nice human beings.<br />

The exact methods are still being experimented with and preached about, and has recently gotten the name "Devops".<br />

There is a really good <a href="http://www.jedi.be/blog/2010/02/12/what-is-this-devops-thing-anyway/">Devops explanation</a> online, with more details.  Read it.</p>

<p>Often enough we're talking about teams working for the same company, usually under the same roof, so it isn't too terribly hard to implement these ideas.</p>

<h3>Now, let's look at the open source community</h3>

<p>Open source developers ("upstream"):</p>

<ul>

<li>develop stuff</li>

<li>improve their stuff based on feedback from end users</li>

</ul>

<p>Distributions ("downstream"):</p>

<ul>

<li>package stuff and make it available to end users</li>

<li>get bugreports, which often get forwarded to upstream</li>

</ul>

<p>Looks familiar?</p>

<h4>The problems are similar too...</h4>

<p>Like above, the problems stem from both parties not working together enough, and doing things on their own.</p>

<p>Some upstreams:</p>

<ul>

<li>like to use "weird" (home grown) build systems</li>

<li>violate FHS</li>

<li>use home grown packaging systems. Languages and applications with plugins like to do this</li>

<li>mix bugfixes, security patches and feature additions in the same code branch (often there is not enough manpower to maintain them in separation, and the need for it is dependent on how/when downstreams ship it anyway)</li>

<li>run into the chicken/egg problem:  they need to release software to have it shipped and tested, but it should only be released after being properly tested.  ("Release early, release often" alleviates this, but it's not always that easy)

</ul>

<p>..making it hard for downstreams.<br />

Even for each other: unannounced/frequent API changes come to mind.</p>

<p>Dowstreams, often:</p>

<ul>

<li>Lack discipline and/or tools to properly report back to upstream.  Users don't like te report the same issue on two bugtrackers</li>

<li>Have to make hard choices.  Not shipping software at all or patching beyond recognition, often enough without knowing how the software really works or is implemented.</li>

<li>Don't contribute patches back to upstream.  Posting them on some obscure albeit "public" mailing list or code archive isn't the most effective either.  Patches that are sent back often don't get merged, making it hard for other downstreams to find them. (and hence, they work on their own patches)</li>

</ul>

<p>Nothing pleases an upstream more then complaints from end users running into problems that only happen witch patches applied by the distributor (patches that are deemed necessary to make the app work properly in the distro.  The irony..)</p>

<p>Some distributions focus on shipping "only stable software", causing them to be obsolete by definition. (Time to production often extends in the order of years), and are forced to apply so many patches that they are essentially forking their upstreams.  Add poor feedback loops to the list and the situation is about as ineffecient as it can get.<br />

Other distributions limit their role to giving you the real open source software experience in it's current state, and that state is not always pretty.</p>

<h4>but they are much harder to solve</h4>

<ul>

<li>Upstream and downstream are separated much more, resulting in very little communication between both parties.  So the incompatibilities manifest themselves even harder.</li>

<li>Among distributions, there are very different visions on and implementations of tools and processes.  Pretty much each distro has a vision which separates it from the others.<br />

Among upstreams, there are as well some different ideas on how things should be done.  Luckily enough upstream developers agree on some things.  But there are some "clusters" doing things their - often radically different - way (freedesktop.org and suckless.org come to mind)<br />

The amount of incompatibilities is pretty much the carthesian product of the amount of distributions with the amount of "different visions" among upstreams</li>

<li>Despite their differences, some upstreams and downstreams actually do have some common ground, but as they don't involve each other in tools nor processes, they hardly benefit from each other</li>

</ul>

<p>So, in contrast to popular belief, <b>open source is not a magical wonderland where everyone works nicely together.</b></p>

<p>Tech companies are usually on their way if they understand and can introduce agile and devops, but I think in the open source ecosystem it's much harder to bring unity.</p>

<p>Luckily, some smart people are already working on bridging the gap between up- and downstream, and between each other.<br />

some examples:</p>

<ul>

<li><a href="http://www.transifex.net/">transifex.net</a> provides a common translation infrastructure and service</li>

<li><a href="https://launchpad.net/">launchpad.net</a> provides code hosting and cross-project issue tracking (from what I heard, tickets reported for downstreams can easily be linked to the relevant upstream project.  But I never tried it)</li>

<p><!-- kde distro mailing list -->

</ul>

<p>I also think about Fosdem's cross-distro miniconf and the freedesktop.org project, which encourage closer cooperation between different downstreams and desktop projects, respectively.</p>

<p>So, how can we solve this?  How can we maximize the end-user experience with more efficient communication and tools?<br />

Some ideas I have:</p>

<ul>

<li>upstreams should definitely abandon cvs and svn.  And avoid using no version control.  Use a version control system that makes forking and contributing more easy, like git.  Downstreams can then fork all the repos and apply the patches in a separate branch.  It will improve cooperation between up- and downstream</li>

<li>upstreams: try to be compatible with how your downstreams and end-users want to use your software.  Accept patches that add configure flags to enable/disable support for the xdg basedir spec, for example.  You don't need to put them in your master branch.</li>

<li>Provide the source for each release so that it can easily be fetched and checksummed</li>

<li>upstreams should definitely avoid coming up with their own "package management" or "self upgrade" solutions.  Let downstream do their job and make your software compatible with existing packaging solutions</li>

<li>use common build systems.  Provide makefiles with an install and uninstall target.  Don't violate FHS.  Make sure your Makefile and software easily allows using a different prefix.  I even do this for repo's that contain 1 or 2 shell scripts. (<a href="http://github.com/Dieterbe/libui-sh/blob/master/Makefile">example</a>)

<li>Ideally, we would have something like git, but for issue tracking.  Everyone could still host their own issue tracker, but integration between up- and downstream could become much more efficient</li>

<li>talk to each other, brainstorm.  we can make everyone's life easier</li>

</ul>

<p>I don't think we should try to go much beyond some common infrastructure/tools and some best practices.  People will always have different opinions on how things should be done.  And that's a good thing, it's the very definiton of the open source community: scratch your own itch.</p>

<p>What do you think?</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/the_community_contributions_section_on_the_arch_linux_forums_is_a_goldmine/">the &#34;Community Contributions&#34; section on the Arch Linux forums is a goldmine</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/the_community_contributions_section_on_the_arch_linux_forums_is_a_goldmine/" rel="bookmark">
					<time class="entry-date" datetime="2010-08-25 22:11:58 -0400 EDT">
						August 25, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>The <a href="https://bbs.archlinux.org/viewforum.php?id=27">Community contributions</a> subforum of the Arch Linux forums is awesome.<br />

It is the birthplace of many applications, most of them not Arch Linux specific.<br />

File managers, media players, browsers, window managers, text editors, todo managers, and so on.  Many shell scripts, urxvt extensions and dwm patches aswell.<br />

Most of the apps are designed after suckless/KISS principles, but there are also some GUI programs.</p>

<p>If you like to discover new apps and tools, check it out.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/review_of_python_3_object_oriented_programming/">Review of &#34;Python 3 Object Oriented Programming&#34;</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/review_of_python_3_object_oriented_programming/" rel="bookmark">
					<time class="entry-date" datetime="2010-08-23 19:01:09 -0400 EDT">
						August 23, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		

<p><a href="http://archlinux.me/dusty/">Dusty Phillips</a>, Arch Linux shwag guy, Archcon co-organizer, (python) consultant and since recently <a href="/back_from_canada_archcon">buddy of mine</a> wrote his first <a href="https://www.packtpub.com/python-3-object-oriented-programming/book?utm_source=dieter.plaetinck.be&amp;utm_medium=bookrev&amp;utm_content=blog&amp;utm_campaign=mdb_004281">book: Python 3 Object Oriented Programming</a>.</p>

<p>I got the opportunity to get a free pdf copy in exchange for a review on my blog, so here we go.<br />



Mind you, my Python knowledge is very limited.  I have done some python programming, and I once read (most of) <a href="http://diveintopython.org/">Dive into python</a>, but over the years that experience has vanished from my memory.  Dusty's book has had many proofreads/reviews by python-aficionado's, now it gets a fresh perspective from an amateur, and for me this was a good opportunity to work on my python skills.</p>

<p>To paraphrase the "who this book is for" paragraph, which is in the beginning of the book and in <a href="https://www.packtpub.com/python-3-object-oriented-programming/book?utm_source=dieter.plaetinck.be&amp;utm_medium=bookrev&amp;utm_content=blog&amp;utm_campaign=mdb_004281">online advertisements</a> for the book:</p>

<ul>

<li>people new to OO programming and people with basic python skills who want to improve their python OO.</li>

<li>OO programmers experienced in other languages who want to get into python.</li>

<li>python 2 programmers interested in learning python 3, although this is not the target audience.</li>

</ul>

<p>Good, that includes me (category 2)</p>

<p>Pro's:</p>

<ul>

<li>seems very accurate</li>

<li>OO focused.   But not in a college/university-ish way.  Real experience, nuanced, real examples and exercises.  Tells you when *not* to use OO.  Teaches you the difference between object orientation, OO programming and OO design, and makes you understand that in the end everything are just means to end, and thanks to the versatility of Python, teaches you various tricks to implement certain designs in less then obvious ways.</li>

<li>Chapters about design patterns (there sure are many of them), testing, libraries, and some other topics not directly related to OO.</li>

</ul>

<p>Con's:</p>

<ul>

<li>Not an introduction to Python.  Assumes some basic knowledge about Python. (like data structures and loops). There is a chapter about (some of the) datatypes later on in the book but it focuses more on their OO nature, and to get to know the basics, you're referred to <a href="http://docs.python.org/py3k/tutorial/">the official python tutorial</a>.

<li>Does not cover *everything*.</li>

</ul>

<p>I should clarify my last point.  Here and there I found some information to be lacking.  Especially  static class methods (they are only mentioned very briefly in a case study somewhere) and static properties/variables.<br />

Other then that, sometimes an example or explanation was not entirely clear to me.  This didn't happen often, but there were moments where I thought 95% of what you need to know is explained, but the other 5% you have to google up yourself.<br />

It is quite convenient however, to have the author of a book available in your jabber client.<br />

So FWIW here are the things I asked him about and which responses I got, with some comments added by me afterwards.</p>

<p><pre>&lt;![CDATA[</p>

<p><Dieterbe> hmm you mention that methods <em>need</em> a self param, but why is this?</p>

<pre><code>       can't python automatically make a variable self available in the scope of the function, when calling it?
</code></pre>

<p><Dusty>    no, they are always explicit</p>

<p><Dieterbe> but why?</p>

<p><Dusty>    it&rsquo;s part of the python philosophy, I guess. &ldquo;explicit is better than implicit&rdquo; is in the zen of python poem.</p>

<pre><code>       Basically, if you are accessing a variable in any namespace, that variable has to be have been made explicitly available in that 

       namespace. The one exception is the from X import * syntax, which 98% of python programmers avoid exactly because of the namespace issues.
</code></pre>

<p><Dieterbe> right</p>

<h1 id="good-to-know-too-bad-this-isn-t-really-mentioned-anywhere:37a013f17aef3425193c174bed26d75b">good to know.  Too bad this isn&rsquo;t really mentioned anywhere.</h1>

<p><Dieterbe> i don&rsquo;t quite get why - in your notebook example of chap 2 - you iterate over the list to find the correct note based on its id.</p>

<pre><code>       can't you just get the element based on it's index in the list? (ie keep the node id in sync with the index in the list)
</code></pre>

<p><Dusty>    I don&rsquo;t have the code in front of me, but I suspect that it&rsquo;s because if a note is deleted, that id should not be recycled and applied to another note.</p>

<p><Dieterbe> but still, since you keep the last used id, and keep increasing it, you won&rsquo;t recycle id&rsquo;s.</p>

<p><Dusty>    yeah, but the index in the list will change</p>

<p><Dusty>    when you delete #4</p>

<p><Dieterbe> oh</p>

<p><Dusty>    the object with ID 5 becomes the object at #4</p>

<p><Dieterbe> thanks buddy</p>

<p><Dusty>    no problem. :)</p>

<h1 id="again-makes-perfect-sense-but-if-you-don-t-know-the-ins-and-outs-of-the-datatypes-you-re-on-your-own:37a013f17aef3425193c174bed26d75b">again, makes perfect sense.  But if you don&rsquo;t know the ins and outs of the datatypes, you&rsquo;re on your own.</h1>

<p><Dieterbe> i had a question about your example for the decorator pattern.</p>

<pre><code>       you use a socket and then you have 2 decorators that implement a send function which do some stuff (logging and what not)

       but also the actual sending on the socket
</code></pre>

<p><Dieterbe> and you mention you can have multiple decorators on the same object.  but since each decorator also does the sending on the socket,</p>

<pre><code>       doesn't that mean the sending happens multiple times?
</code></pre>

<p><Dusty>    no, because the first decorator is decorating the second decorator</p>

<p><Dusty>    which is decorating the socket</p>

<p><Dieterbe> ah yes you&rsquo;re right. and although you did not specify it like this in the explanation text, it should be clear from the code.</p>

<h1 id="if-i-would-have-looked-better-at-the-code-i-would-have-figured-it-out:37a013f17aef3425193c174bed26d75b">If I would have looked better at the code I would have figured it out.</h1>

<h1 id="i-just-assumed-something-had-to-be-wrong-i-m-too-used-to-the-way-behaviors-are-implemented-in-cakephp:37a013f17aef3425193c174bed26d75b">I just assumed something had to be wrong, I&rsquo;m too used to the way &lsquo;behaviors&rsquo; are implemented in CakePHP.</h1>

<p><Dieterbe> one last remark i have about the book: i couldn&rsquo;t find an explanation of static variables/properties.</p>

<pre><code>       i did see a very short mention of static methods in the case study at the end of chap 3, i would have expected to have that info a bit more 

       prominent, in it's own subsection or something
</code></pre>

<p><Dieterbe> especially because you use static class methods a few times throughout the book</p>

<p><Dusty>    I had a long section on them and ended up removing it because the chapter was too long and one of my reviewers suggested that they aren&rsquo;t very good form in Python.</p>

<p><Dieterbe> hmm. i see</p>

<p>]]&gt;</pre><p></p>

<p>The writing is pretty informal, and here and there you&rsquo;ll find a subtle reference or joke.  But of course that&rsquo;s not what you buy this book for.</p></p>

<h3>Conclusion</h3>

<p>I would say the "who this book is for" part is a bit too optimistic.  You won't learn Python (3) from scratch by only using this book.  It's not a book restricted to mere OO subjects (in python), but neither does it cover all basics of the Python language.</p>

<p>So if you are a python newbie, I would probably recommend you 'Dive into python'.  It's free, covers the basics, but doesn't contain so many real life examples.</p>

<p>If you want to know more about OO in python, design patterns, some real life examples and techniques, or advice from a pro, then I definitely recommend this book.</p>

<p>Free chapter: <a href="https://www.packtpub.com/sites/default/files/1261-chapter-7-Python%20object-oriented-shortcuts.pdf">Chapter No. 7 : Python Object-oriented Shortcuts</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/python/index.html" rel="tag">python</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/back_from_canada_archcon/">Back from Canada, Archcon</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/back_from_canada_archcon/" rel="bookmark">
					<time class="entry-date" datetime="2010-07-31 23:10:36 -0400 EDT">
						July 31, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I'm back from Canada/Archcon, and it was great. I've been in Toronto for 11 days, and visited Montreal for 3 days.</p>

<h3>Archcon</h3>

<p>Archcon was small (20-ish people).  (That's what you get for doing it in Canada ;), but very nice.<br />

Interesting talks, informal, good vibe, decent logistics and catering.<br />

This year it happened because Dusty and Ricardo actually just wanted to have a conference without worrying too much about the attendance,<br />

next year we should do it again because Arch (conferences) rock(s), and because we need more visitors.  More central locations such as Seattle and Europe have been suggested.<br />

Either way, next year both Judd (founder) and Aaron (current overlord) should be there. (this year they both had lame excuses like family reunions and "almost getting married".  Congrats btw, Aaron!)</p>

<p>It was an absolute pleasure to meet some more of my fellow devs, and users.<br />

Here is a pic from the group (unfortunately, a few are missing)<br />

<img src="/files/group.jpg"/><br />

People in bold are Arch (ex-) devs</p>

<ol>

<li>Richard (sokuban) from Toronto (linguistics student)</li>

<li>Chris (Gallow) from Toronto</li>

<li>Alex (alexmat) from Tokyo, Japan (very into NILFS, submitted already some patches)</li>

<li>Sander (GogglesGuy) (Dutch guy living in the states now)</li>

<li>Eric from Seattle, WA</li>

<li>Gregory (gelendir) from Quebec city, Canada (aka dude wearing the kilt and fivefingers and funny accent)</li>

<li><b>Kevin (kpiche)</b> from Ottawa (does perl stuff iirc)</li>

<li><b>Loui (louipc)</b> from Toronto, Canada (AUR guy, git lover.  metalfan.  Shook John Petrucci's hand)</li>

<li>Tim from Annapolis (uses Arch for servers at work with some fancy mass-install scripts)</li>

<li>Dustin (daking) from Stanford, CA (runs most of Stanford university on Arch)</li>

<li><b>me</b> from Belgium (arch-releng/aif, uzbl guy) </li>

<li>Walter from Toronto (very into Uzbl, not actually an Arch user... yet)</li>

<li>David (davekong) from New York City</li>

<li><b>Dan (toofishes)</b> from Chicago (Pacman dev)</li>

<li><b>Dusty</b> from Shaunavon SK (shwag, archcon organizer)</li>

<li>Ricardo (ralvez) from  Toronto (archcon organizer)</li>

<li><b>Jason (Xentac)</b> from Victoria, BC (entrepeneur, used to use Arch for the business)</li>

</ol>

<p>See <a href="https://bbs.archlinux.org/viewtopic.php?id=101692">Archcon thread</a> for more info.</p>

<p>Unfortunately I barely slept the night before my AIF talk, so I feel that one didn't go to well.  Although people told me it was OK.<br />

The Uzbl talk was pretty much what I imagined it to be: like the fosdem talk, but a bit more in depth here and there.<br />

My pc was behaving weirdly, but luckily I could use Dan's.</p>

<p>We've been lucky that Walter and Isaac had proper, respectively videotaping and photocamera equipment.  So there are plenty of pics, and nearly all talks got videotaped.<br />

(I think the "hacking pacman" one was the only one not being videotaped, because 2 other talks were going on at the same time.  Too bad, it was a very interesting talk)</p>

<p><a href="http://archlinux.ca/archcon2010/images/">Archcon pictures</a><br />

<a href="http://archlinux.ca/archcon2010/videos/">Archcon videos</a><br />

My slides:<br />

<a href="/files/aif-archcon2010.pdf">AIF (day 1)</a><br />

<a href="/files/uzbl-archcon2010.pdf">Uzbl (day 2)</a></p>

<h3>Other days</h3>

<p>Some thoughts and notes of what I did and saw around Toronto/Montreal..</p>

<p><ul></p>

<p><li>Cities with streets and subways in a grid layout are awesome.  Soo much easier to navigate.</li></p>

<p><li>Red lights with countdown timers (in seconds) are awesome.  Although I&rsquo;m told some places in Europe have them too.</li></p>

<p><li>Toronto was awesome: huge city, many friendly people, low crime rate, many different cultures, very short history.  High park was very nice. <img src="/files/blog/toronto.ca/high_park_004_500.jpg"/></li></p>

<p><li>Montreal was like a European city: more history, old buildings, more crime, but of course a grid layout.  Some nice views though (ie. from Mont Royal).</li></p>

<p><li>The youth hostels I went too were great: never got to meet so many interesting people in such a short timespan.</li></p>

<p><li>CN tower: I procrastinated visiting until the last day, and when I finally wanted to go in the wheather was perfect, but there was a 2 hour queue, so I skipped it. Anyway there are <a href="http://en.wikipedia.org/wiki/CN_Tower">plenty of pictures online</a>.</li></p>

<p><li>Niagara falls were beautiful.  Maid of the myst tour was worth it.  I made pictures but <a href="http://en.wikipedia.org/wiki/File:Niagara_falls_panorama.jpg">those online</a> are better.</li></p>

<p><li>I met Kan Johar (founder of <a href="http://plurk.com">plurk.com</a>, amongst others), good times.</li></p>

<p><li>Dusty introduced me to poutine.  I found it disgusting.  I guess you need to be a Canadian before you can like it.<br> <img src="/files/poutine.jpg"/></li></p>

<p><li>Dusty and I have been to the <a href="http://linuxcaffe.ca/">Linux Caffe.</a>  The owner is a great guy, he&rsquo;s considering switching to Arch, and he wrote his whole point of sales, accounting and bookkeeping software using shell scripts, perltk and stuff.  He&rsquo;s into suckless.org stuff.   His version 2.0 will probably be based on Xmonad.<br /></p>

<p><img src="/files/linuxcaffe-pos1.jpg"/><br /></p>

<p><img src="/files/linuxcaffe-pos2.jpg"/></p>

<p></li></p>

<p>Dusty and me, somewhere on our way to the Niagara falls.<br />

<img src="/files/dustyandme.jpg"></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/off_to_toronto_july_14-28_archcon/">Off to Toronto July 14-28, Archcon</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/off_to_toronto_july_14-28_archcon/" rel="bookmark">
					<time class="entry-date" datetime="2010-07-04 11:34:08 -0400 EDT">
						July 4, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>As mentioned <a href="/uzbl_monitoring_aif_talks">earlier</a>, I'll be at <a href="http://www.archlinux.ca/archcon2010/">Archcon in Toronto</a> in a few weeks.<br />

It's a very small conference, and the first of its kind.  At the <a href="/froscon_2009_afterthoughts">last FrOSCon</a> we have been playing with the idea to hold an informal Arch conference in Europe, but those were just ideas.  Dusty and Ricardo beat us with an actual implementation.<br />

This is great, and one of the milestones in Arch Linux history.  Which is why I want to be there and help making it better.</p>

<p><a href="http://www.archlinux.ca/archcon2010/?p=116">Archcon schedule</a>.  I'll be talking about AIF and uzbl.</p>

<p>My schedule:</p>

<ul>

<li>wed. July 14: departure</li>

<li>July 14 - 21: hanging around in downtown Toronto. Not sure yet where I'll stay. probably some hostel.</li>

<li>July 21 - 28: bed and breakfast pretty close to the conference location, outside the city center</li>

<li>July 22 - 23 are the conference talks days, July 24-25 are the conference tourist days, where we'll do some touristy stuff with the conference participants</li>

<li>wed. July 28: flying back</li>

</ul>

<p>There are <a href="http://wiki.archlinux.org/index.php/Archcon_extra_activities">many things to do</a> in and around Toronto. We still need to make the planning, but the <a href="http://en.wikipedia.org/wiki/Niagara_Falls">Niagara Falls</a> are definitely on the list.</p>

<p>Finally, big thanks to <a href="http://www.elys.com/home/">Elysium Digital</a>, a technology oriented consulting company for legal matters. Apparently they use Arch Linux for many things: on the desktop, in the server room, and in the forensic lab.   They emailed me to propose sponsoring my plane tickets, and they did.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/restoring_ssh_connections_on_resume/">Restoring ssh connections on resume</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/restoring_ssh_connections_on_resume/" rel="bookmark">
					<time class="entry-date" datetime="2010-06-16 18:11:50 -0400 EDT">
						June 16, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I use <a href="http://wiki.archlinux.org/index.php/Pm-utils">pm-utils</a> for hibernation support.<br />

It has a hooks system which can execute stuff upon hibernate/suspend/thaw/resume/..., but they run as root.<br />

If you want to run stuff as a regular user you could do something like</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

su <span style="color: #19177C">$user</span> -c &lt;<span style="color: #008000">command</span>&gt;

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>..but these commands have no access to your user environment.<br /></p>

<p>In my user environment I have a variable which I need access to, namely SSH_AUTH_SOCK, which points to my agent which has some unlocked ssh keys.  Obviously you don&rsquo;t want to reenter your ssh key passwords everytime you resume.<br /></p>

<p>(In fact, I started using hibernate/resume because I got tired of having to enter 4 passwords on boot. - 1 for dm_crypt, 1 for login, 2 for ssh keys, not because it is much faster)</p></p>

<p>The solution is very simple. Use this:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

sudo pm-hibernate <span style="color: #666666">&amp;&amp;</span> <span style="color: #008000; font-weight: bold">do</span>-my-stuff.sh

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>This way, do-my-stuff.sh will be executed when you resume, after the complete environment has been restored.<br /></p>

<p>Ideal to kill old ssh processes, and setup tunnels and ssh connections again.<br /></p>

<p>I&rsquo;m probably gonna integrate this into my <a href="http://github.com/Dieterbe/microde">microDE</a></p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/uzbl_monitoring_aif_talks/">Uzbl, monitoring, AIF talks</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/uzbl_monitoring_aif_talks/" rel="bookmark">
					<time class="entry-date" datetime="2010-03-07 12:06:18 -0400 -0400">
						March 7, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I recently did two talks, for which the videos are now online.</p>

<ul>

<li><a href="http://www.uzbl.org/news.php?id=25">Uzbl lightningtalk @ fosdem 2010</a></li>

<li>Open Source Monitoring tools lightning talk @ <a href="http://www.kangaroot-showcase.be/">Kangaroot showcase</a> 2009.  This one is password protected.  If you were a participant, you should have received the pass</li>

</ul>

<p>If all goes well, I'll be at <a href="http://www.archlinux.ca/archcon2010/">ArchCon</a> this summer, where I'll be doing these talks:</p>

<ul>

<li><a href="http://www.archlinux.ca/archcon2010/?p=67">AIF: The Arch Installation Framework</a></li>

<li><a href="http://www.archlinux.ca/archcon2010/?p=73">Uzbl & web interface tools which adhere to the unix philosophy</a>. Whereas in the fosdem talk I had to focus a lot of information into a short timeslot, here I'll elaborate a bit more</li>

</ul>

<p>We're not sure yet if those talks will get videotaped.<br />

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/uzbl/index.html" rel="tag">uzbl</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/facebook_usrbincrash_php_implementation/">facebook usrbincrash php implementation</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/facebook_usrbincrash_php_implementation/" rel="bookmark">
					<time class="entry-date" datetime="2010-02-12 23:25:46 -0400 -0400">
						February 12, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Implementation for Facebook <a href="http://www.facebook.com/careers/puzzles.php?puzzle_id=2">usr bin crash</a> puzzle. (<a href="/not_working_for_facebook">how/why</a>)</p>

<p>I haven't touched the code for a few months, but better to put it online then to let it rot.<br />

<a href="http://github.com/Dieterbe/facebookpuzzles/" title="http://github.com/Dieterbe/facebookpuzzles/">http://github.com/Dieterbe/facebookpuzzles/</a></p>

<p>2 branches:</p>

<ul>

<li>master: basically what I submitted to FB, and what just works</li>

<li>withpruning: an attempt for futher optimalisation (it only improves the runtime in some cases) but I didn't finish that version and there's a bug in it somewhere</li>

</ul>

<p>In the repo you'll also find various test input files supplied by the community on <a href="http://www.facebook.com/topic.php?uid=15325934266&amp;topic=5131&amp;post=30091">the forums</a> and a script to benchmark the implementation on all inputfiles.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/not_working_for_facebook/">Not working for Facebook</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/not_working_for_facebook/" rel="bookmark">
					<time class="entry-date" datetime="2010-02-12 22:58:31 -0400 -0400">
						February 12, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>In november last year, I was contacted by Facebook HR.<br />

They found my background interesting and thought I might be a good<br />

fit for an "application operations engineer" position in Palo Alto, California. (it is<br />

basically the link between their infrastructure engineering and operations/support<br />

teams).<br />

I did a few technical interviews over phone with other app ops and engineers<br />

from CA (about the Linux kernel, lowlevel userspace, mysql, memcached, networking, programming,<br />

scalability, etc) and solved one of their optimisation puzzles.<br />

( I picked <a href="http://www.facebook.com/careers/puzzles.php?puzzle_id=2">usr bin crash</a>.  Actually I wanted to do something with <a

href="http://incubator.apache.org/thrift/">thrift</a> but <a

href="http://mail-archives.apache.org/mod_mbox/incubator-thrift-user/200911.mbox/%3C20091122202901.1f425b7f@plaetinck.be%3E">I

couldn't get it to compile</a>).

<br/>The technical interviews went well but then I had<br />

another interview which was about handling support.  As I have no experience<br />

in setting up support frameworks and procedures to hand off to separate<br />

support teams, I was/am not good enough for this position.</p>

<p>Then they suggested a role as site reliability engineer for the office in Dublin, which is more about<br />

troubleshooting, monitoring and systems management/automation.<br />

So I did some more interviews with SRE's and engineers from the London office and<br />

from Palo Alto.  Similar subjects as before, but with more of an operations/support touch to it.<br />

These also went well, except the last one, which was more about things less related to<br />

high-performance/scalability such as nfs, pam and ldap.<br />

I think I missed too many questions on the last interview.  I could come up<br />

with some excuses such as me being tired (it was the evening before our <a

href="http://www.kangaroot-showcase.be/">Kangaroot showcase</a> event, and<br />

the call being late - Facebook HR messed up a timezone conversion) but fact<br />

of the matter is: I have little experience with such "office ;-)" stuff.</p>

<p>So after 8 interviews over phone (each one about 40-60 minutes), spanning<br />

about 2 months, they let me know they would not go forward with me.<br />

That was late december, I asked for some feedback but haven't heard from<br />

them since.</p>

<p>Bottomline: it sounded quite nice but I'm pretty <a href="http://www.ted.com/talks/dan_gilbert_asks_why_are_we_happy.html">happy</a> with my current life in Belgium.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/fosdem_2010/">Fosdem 2010</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/fosdem_2010/" rel="bookmark">
					<time class="entry-date" datetime="2010-01-24 17:10:16 -0400 -0400">
						January 24, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I'll be at fosdem - 10th edition - again this year.<br />

<a href="http://www.fosdem.org"><img src="/files/blog/fosdem/going-to-2010.jpg" alt="I'm going to FOSDEM, the Free and Open Source Software Developers' European Meeting" /></a></p>

<p>I'll be presenting a <a href="http://fosdem.org/2010/schedule/events/uzbl">lightning talk</a> about <a href="http://www.uzbl.org/">uzbl</a>.<br />

Also, <a href="http://www.archlinux.org/">Arch Linux</a> guys Roman, JGC, Thomas and me will hang out at the <a href="http://fosdem.org/2010/schedule/devrooms/distributions">distro miniconf</a>.  We might join the <a href="http://fosdem.org/2010/schedule/events/dist_infrastructure">infrastructure round-table</a> panel, but there is no concrete information yet.</p>

<p>More stuff I'm looking forward to:</p>

<ul>

<li><a href="http://fosdem.org/2010/schedule/phone">fosdem maemo application</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/dist_mirrorbrain">mirrorbrain. a topic often discussed at Arch</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/dist_clicfs">clicfs</a></li>

<li><a href="http://fosdem.org/2010/news/fosdem-multiplies-things-10">a 2nd fries van!</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/openpcf">openpcf</a> (how would this compare to puppet et al?)</li>

<li><a href="http://fosdem.org/2010/schedule/events/asterisk">asterisk development</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/csync">csync</a> (reminds me of my own <a href="http://github.com/Dieterbe/ddm">ddm</a>)</li>

<li><a href="http://fosdem.org/2010/schedule/events/nosql_mongodb_intro">mongodb</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/nosql_cassandra">cassandra</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/nosql_mapreduce_couchdb">map/reduce in nosql vs sql on rdms</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/linuxkernelpatch">writing a patch for linux</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/systemtap">systemtap</a></li>

<li><a href="http://fosdem.org/2010/schedule/events/scalingfacebook">scaling facebook</a></li>

</ul>

<p>I'm suprised myself how there are much more topics of interest to me then last year, and I'm not sure if the program is even finished.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/uzbl/index.html" rel="tag">uzbl</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/arch_linux_interview_and_uzbl_article/">Arch Linux interview and Uzbl article</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/arch_linux_interview_and_uzbl_article/" rel="bookmark">
					<time class="entry-date" datetime="2010-01-11 21:30:50 -0400 -0400">
						January 11, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<ul>

<li><a href="http://www.osnews.com/story/22692/Arch_Linux_Team">Arch Linux team interview @ OSNews</a></li>

<li><a href="http://lwn.net/Articles/341245/">Uzbl @ LWN.net</a></li>

</ul>

<p>Apologies for only informing you about the second article now.  I assumed most of you follow LWN (you probably should) or found the article anyway.<br />

Of all the <a href="http://www.uzbl.org/wiki/press">articles</a> written about uzbl, no one came close to the quality of Koens work.  So even though it's a bit dated it's still worth a read.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/uzbl/index.html" rel="tag">uzbl</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/rrdtool_updating_rra_settings_and_keeping_your_collected_data/">RRDtool: updating RRA settings and keeping your collected data</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/rrdtool_updating_rra_settings_and_keeping_your_collected_data/" rel="bookmark">
					<time class="entry-date" datetime="2009-12-09 15:05:14 -0400 -0400">
						December 9, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>When you use <a href="http://oss.oetiker.ch/rrdtool/">rrdtool</a>, it can happen that you first create your databases, then collect a whole bunch of data and decide later you want more accuracy/longer periods.<br /></p>

<p>Especially when using <a href="community.zenoss.org">zenoss</a> (the monitoring solution I mostly work with at <a href="http://www.kangaroot.net/">Kangaroot</a>), which uses very conservative RRD settings by default (i.e. 5-minute intervals for only the first 50 hours).  Zenoss provides a way for you to change the way RRD&rsquo;s are created, but not to apply those settings to already existing RRD files, which I found out <em>after</em> I started monitoring everything ;)</p></p>

<p><a href="http://oss.oetiker.ch/rrdtool/doc/rrdresize.en.html">rrdresize</a> can help: it (just) adds or removes locations for rows.<br />

In my case it was not good enough because zenoss uses a variety of resolutions (step sizes), and so if you add rows to all of them rrdtool - when graphing - will often pick a higher resolution RRA that just had rows added (and hence contain unknown values), even though you have the values, albeit at a lower resolution.</p>

<p>So you need a way to update all rows in the RRA's.<br />

I <a href="http://stackoverflow.com/questions/802902/export-import-rrdtool-database-with-differents-rra/1867163#1867163">found</a> a <a href="http://code.google.com/p/pmptools/source/browse/trunk/rrd/rrdmove">perl tool</a> that does just that.  (I think, I didn't study all details).  So, you install that in your /home/zenoss for instance and then you run the following script, which creates new rrd files with the new settings and uses the perl script to copy all data into it.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/sh</span>

<span style="color: #408080; font-style: italic"># invoke me like this:</span>

<span style="color: #408080; font-style: italic"># find /usr/local/zenoss/zenoss/perf/ -name &#39;*.rrd&#39; -exec ./newrrd.sh {} \; &gt;&gt; newrrd-logfile</span>



<span style="color: #19177C">file</span><span style="color: #666666">=</span><span style="color: #19177C">$1</span>

<span style="color: #19177C">backupdir</span><span style="color: #666666">=</span>/home/zenoss/rrds-backup

<span style="color: #19177C">newdir</span><span style="color: #666666">=</span>/home/zenoss/rrds-new

<span style="color: #666666">[</span> -d <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$backupdir</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span> <span style="color: #666666">||</span> mkdir -p <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$backupdir</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">||</span> <span style="color: #008000">exit </span>2

<span style="color: #666666">[</span> -d <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$newdir</span><span style="color: #BA2121">&quot;</span>    <span style="color: #666666">]</span> <span style="color: #666666">||</span> mkdir -p <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$newdir</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">||</span> <span style="color: #008000">exit </span>2

<span style="color: #666666">[</span> -f <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$file</span><span style="color: #BA2121">&quot;</span>      <span style="color: #666666">]</span> <span style="color: #666666">||</span> <span style="color: #008000">exit </span>3



<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Processing </span><span style="color: #19177C">$file</span><span style="color: #BA2121"> ..&quot;</span>

<span style="color: #19177C">base</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;`basename &quot;</span><span style="color: #19177C">$file</span><span style="color: #BA2121">&quot;`&quot;</span>

<span style="color: #666666">[</span> ! -f <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$backupdir</span><span style="color: #BA2121">/</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span> <span style="color: #666666">||</span> mv <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$backupdir</span><span style="color: #BA2121">/</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$backupdir</span><span style="color: #BA2121">/</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span>.old <span style="color: #666666">||</span> <span style="color: #008000">exit </span>4

cp <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$file</span><span style="color: #BA2121">&quot;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$backupdir</span><span style="color: #BA2121">/</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span>

<span style="color: #008000">cd</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$newdir</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">&amp;&amp;</span> rrdtool create <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span> <span style="color: #BB6622; font-weight: bold">\</span>

--step <span style="color: #BA2121">&#39;300&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>

--start <span style="color: #BA2121">&#39;1230768000&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>

<span style="color: #BA2121">&#39;DS:ds0:GAUGE:900:U:U&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>

<span style="color: #BA2121">&#39;RRA:AVERAGE:0.5:1:122640&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>

<span style="color: #BA2121">&#39;RRA:AVERAGE:0.5:6:55536&#39;</span> <span style="color: #BB6622; font-weight: bold">\</span>

<span style="color: #BA2121">&#39;RRA:MAX:0.5:6:55536&#39;</span>

/home/zenoss/rrdremove.pl <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$backupdir</span><span style="color: #BA2121">/</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span> | grep -v <span style="color: #666666">2009</span> <span style="color: #408080; font-style: italic"># hide some output</span>

cp <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$base</span><span style="color: #BA2121">&quot;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$file</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">||</span> <span style="color: #008000">exit </span>5

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Done&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>Oh and btw, <a href="http://www.famzah.net/rrdwizard/index.php">rrdwizard</a> is a cool webapp when you&rsquo;re feeling too lazy/have forgotten how to write rrdtool commands</p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/devops/index.html" rel="tag">devops</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/ext3_logical_partition_resizing/">ext3 logical partition resizing</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/ext3_logical_partition_resizing/" rel="bookmark">
					<time class="entry-date" datetime="2009-11-01 10:17:26 -0400 -0400">
						November 1, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>You probably know you can resize primary partitions by deleting them and recreating them, keeping the starting block the same but using a higher block as ending point.  You can then increase the filesystem.<br />

But what about logical partitions?  A while back I had to resize an ext3 logical partition which ended at the end of the last logical partition.  I learned some usefull stuff but I only made some quick scratch notes and I don't remember all details so:<br />

<strong>Do not expect a nice tutorial here, it's more of a commented dump of my scratch notes and some vague memories.<br />

The information in this post is not 100% accurate</strong><br />

I wondered if I could just drop and recreate the extended partition (and if needed, recreating all contained logical partitions, the last one being bigger of course) but nowhere I could find information about that.<br />

</p>

<p>I did find various places where they said parted could "handle all partition and filesystem resizing at once".<br />

<a href="http://www.jumpingbean.co.za/blogs/mark/parted_resize_ext3_partition">this post</a> was quite useful, but he was more lucky then me I guess.<br />

In the parted documentation I couldn't find any restriction other then that xattrs don't work.<br />

But it does not support the dir_index and resize_inode features (<a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=406680">bug ticket</a>)<br />

You should be able to use tune2fs to remove these options, do the resize and then put them back.  But tune2fs can't put them back and I even had problems removing resize_inode (see below)<br />

Also, I falsely assumed parted would resize the extended partition when you tell it to resize the logical partition.</p>

<p>see here what i did, along with comments and remarks:<br />

[code]<br />

# what features are enabled?<br />

linux-staging:~# tune2fs -l | grep -i feature<br />

Filesystem features:      resize_inode dir_index filetype sparse_super large_file [has_journal]</p>

<p># remove resize_inode feature<br />

linux-staging:~# tune2fs -O ^resize_inode /dev/hda9<br />

tune2fs 1.40-WIP (14-Nov-2006)<br />

Invalid filesystem option set: ^resize_inode # HUH ?</p>

<p># okay then, lets try debugfs<br />

linux-staging:~# debugfs -w -R "feature -dir_index -resize_inode" /dev/hda9<br />

debugfs 1.40-WIP (14-Nov-2006)<br />

Filesystem features: has_journal filetype sparse_super large_file</p>

<p># lets do an e2fsck.  It gave errors but maybe that's normal (?)<br />

# I wonder whether debugfs just unsets the option flags or actually updates the filesystem to not use these features at all (in the latter case, e2fsck should be clean)<br />

linux-staging:~# e2fsck -f /dev/hda9<br />

e2fsck 1.40-WIP (14-Nov-2006)<br />

Filesystem does not have resize_inode enabled, but s_reserved_gdt_blocks<br />

is 176; should be zero.  Fix<y>? yes</p>

<p>Resize_inode not enabled, but the resize inode is non-zero.  Clear<y>? yes</p>

<p>Pass 1: Checking inodes, blocks, and sizes<br />

Inode 58 has INDEX_FL flag set on filesystem without htree support.<br />

Clear HTree index<y>? yes</p>

<p>Pass 2: Checking directory structure<br />

Pass 3: Checking directory connectivity<br />

Pass 4: Checking reference counts<br />

Pass 5: Checking group summary information<br />

Block bitmap differences:  -(5--180) -689 -(32773--32948) -(98309--98484) -(163845--164020) -(229381--229556) -(294917--295092)<br />

-(819205--819380) -(884741--884916) -(1605637--1605812) -(2654213--2654388) -(4096005--4096180) -(7962629--7962804) -(11239429--11239604)<br />

Fix<y>?<br />

Free blocks count wrong for group #0 (0, counted=177).<br />

Fix<y>? yes</p>

<p># lets doublecheck the enabled features<br />

linux-staging:~# tune2fs -l /dev/hda9 | grep -i feature<br />

Filesystem features:      has_journal filetype sparse_super # Hey ? where did 'large_file' go?</p>

<p># do the resize of the logical partition in parted</p>

<p># enable features<br />

tune2fs -O dir_index /dev/hda9<br />

debugfs -w -R "feature large_file resize_inode" /dev/hda9</p>

<p># now all should be good, right? lets do an e2fsck<br />

linux-staging:~# e2fsck -f /dev/hda9<br />

e2fsck 1.40-WIP (14-Nov-2006)<br />

Resize inode not valid.  Recreate<y>? yes</p>

<p>Pass 1: Checking inodes, blocks, and sizes<br />

Pass 2: Checking directory structure<br />

Pass 3: Checking directory connectivity<br />

Pass 3A: Optimizing directories<br />

Pass 4: Checking reference counts<br />

Pass 5: Checking group summary information<br />

Block bitmap differences:  +689<br />

Fix<y>? yes</p>

<p>/dev/hda9: ***** FILE SYSTEM WAS MODIFIED *****<br />

/dev/hda9: 132012/7038048 files (6.2% non-contiguous), 12076862/14368126 blocks</p>

<p># I also got <strong>a lot</strong> of these errors:<br />

Assertion (block < EXT2_SUPER_BLOCKS_COUNT(fs->sb)) at ../../../../libparted/fs/ext2/ext2.h:226 in function ext2_is_data_block() failed.</p>

<p># now here are some more scratch notes. I forgot exactly why and what I did, so I'm just putting them here for reference.</p>

<p>#in fdisk, delete logical, recreate, reboot and do online resize with resize2fs<br />

linux-staging:~# resize2fs /dev/hda9<br />

resize2fs 1.40-WIP (14-Nov-2006)<br />

Filesystem at /dev/hda9 is mounted on /home; on-line resizing required<br />

old desc_blocks = 4, new_desc_blocks = 5<br />

Performing an on-line resize of /dev/hda9 to 19872397 (4k) blocks.<br />

resize2fs: Invalid argument While trying to add group #512</p>

<p>linux-staging:~#  resize2fs /dev/hda9<br />

resize2fs 1.40-WIP (14-Nov-2006)<br />

Please run 'e2fsck -f /dev/hda9' first.</p>

<p>linux-staging:~# e2fsck -f /dev/hda9<br />

e2fsck 1.40-WIP (14-Nov-2006)<br />

Superblock last mount time is in the future.  Fix<y>? yes</p>

<p>Pass 1: Checking inodes, blocks, and sizes<br />

Pass 2: Checking directory structure<br />

Filesystem contains large files, but lacks LARGE_FILE flag in superblock.<br />

Fix<y>? yes</p>

<p>Pass 3: Checking directory connectivity<br />

Pass 4: Checking reference counts<br />

Pass 5: Checking group summary information</p>

<p>/dev/hda9: ***** FILE SYSTEM WAS MODIFIED *****<br />

/dev/hda9: 132012/8208384 files (6.2% non-contiguous), 12113624/16777216 blocks<br />

linux-staging:~# resize2fs /dev/hda9<br />

resize2fs 1.40-WIP (14-Nov-2006)<br />

Resizing the filesystem on /dev/hda9 to 19872397 (4k) blocks.<br />

The filesystem on /dev/hda9 is now 19872397 blocks long.</p>

<p>linux-staging:~# mount /dev/hda9</p>

<p>#  suprisingly, all data looked still intact.<br />

[/code]</p>

<p>After this experience I actually created a VM to do some testing and figured out this is the better way (no fsck errors, and goes much faster):</p>

<ul>

<li>use parted only to increase the extended partition</li>

<li>drop and recreate logical partition with fdisk</li>

<li>resize2fs the logical partition</li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/about_the_maemo_summit_2009_and_the_nokia_n900/">About the maemo summit 2009 and the nokia n900</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/about_the_maemo_summit_2009_and_the_nokia_n900/" rel="bookmark">
					<time class="entry-date" datetime="2009-10-12 21:20:39 -0400 EDT">
						October 12, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>So I'm back from the 3-day <a href="http://wiki.maemo.org/Maemo_Summit_2009">maemo summit</a> in Amsterdam.  It was very nice.  Very well organized, and Nokia definitely invested enough in catering, fancy-suited people and such to please all 400 of us.  I met several interesting people, both from the community, as well as Nokia guys.<br />

The talks were diverse, but interesting (duh?).  I will especially remember the kickoff with its fancy visual effects and loud music that set the mood straight for the entire weekend.<br />

The best moment was, of course, when it was announced that <strong>every summit participant would receive a n900.  Uncontrolled hapiness all around. </strong><br />

<br />

I had been hoping to buy/preorder the device at the event, with maybe a nice reduction.  But I didn't dare to hope on getting a device in my hands just like that.</p>

<p>So how does this work?<br />

Basically, all summit attendees were offered the following deal (I don't think anyone passed it).  I paraphrase:</p>

<p><cite>User gets to use n900 preproduction model until end of April 2010 or earlier if Nokia wants so.<br />

User provides feedback to Nokia in any form, which Nokia gets ownership of.<br />

User may not copy/reverse engineer/decompile device/material/software.  But other then that he can fully use it, hack (on) it and share information about it.<br />

No warranty or any form of compensation if the device blows up your house, breaks your arm, or submits your personal data to pastebin.com<br />

</cite></p>

<p>Definitely fair enough I would say.  I'll surely stick to my end of the deal and provide them a good dose of feedback.</p>

<p>My first experiences?  Here are the main things:</p>

<ul>

<li>I think the hardware is definitive, the software probably isn't.</li>

<li>Meets all expectations:

<ul>

<li>Complete debian-based mini-pc which fits in pocket easily.  A screen (800x480) which shows normal webpages just fine, no need for smaller pages.  Typing on keyboard is a lot slower then on a netbook.  For me the device could have been bigger so I could do 10-finger typing (I would call using a headset anyway), but I'm sure many people like the small formfactor</li>

<li>A userland we are used to: glibc, sysvinit, dbus, gstreamer, bluez, gtk, HAL, apt, and so on</li>

<li>Very nice and easy UI, high performance multitasking, 3D, many nice details seem to be implemented just when you need them, ...</li>

<li>Not just a "OS + apps" but everything can be (and usually is) integrated: i.e. contact book with the various means to reach a contact (jabber/sms/skype/cellular call/..).  when you call someone it will choose skype or cellular, whichever is best. (this probably expands to SIP and whichever means more applications will bring).  Contacts with birthdays show up in the calendar, etc.</li>

<li>Quite smooth UI. Sometimes a bit of stutter in multitask view when closing or switching apps (but hey, nothing my real PC doesn't do)</li>

<li>Many features for such a small form factor.  The hardware feels "done"</li>

<li>Battery lasts long enough.   About 30 hours for light to medium use on a new device</li>

</ul>

<p></li></p>

<p><li>Slight nuisances, mostly with the software:</p>

<ul>

<li>The microB browser needs some polishing.  It hangs when the wifi goes away</li>

<li>Some lack of consistency in UI across maemo interface and various apps (scrolling behaviour is sometimes different, "just start typing to initiate search" doesn't apply everywhere) </li>

<li>Hard to open back cover and to remove battery </li>

<li>Shell (ash) history does not (always?) get saved</li>

<li>No tools such as less, sed, curl, awk, ... by default.  No packages for them yet</li>

<li>Maps application feels incomplete.  It's not a navigation system like Tomtom (and a Nokia guy told me they aren't aiming for that)</li>

<li>It continously tries looking for network when it can't find any, even though I keep saying no</li>

</ul>

<p></ul></p>

<p>I'm keeping a detailed list of all issues I encounter, which I'll report on the bugtracker.<br />

Until now all issues I found are small, and most are fixable in a short timespan so I think the "real" devices will be there soon.<br />

I'm definitely looking forward playing more with it and hacking it.<br />

And most of all, I think I will actually begin trusting this device enough to maintain my contacts, calendar, .. and to actually use the features it brings (instead of for example ssh'ing to home and chatting from there)</p>

<p>Great work Nokia, you guys rock.</p>

<p>** update: 13-10-2009: updated the battery uptime number to 30 hours.  I measured it for real this time.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/n900/index.html" rel="tag">n900</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/nokia_n900_and_maemo_summit_2009/">nokia n900 &amp; maemo summit 2009</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/nokia_n900_and_maemo_summit_2009/" rel="bookmark">
					<time class="entry-date" datetime="2009-10-02 17:40:14 -0400 EDT">
						October 2, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I have been looking for the <a href="http://bbs.archlinux.org/viewtopic.php?pid=580045">"perfect mobile companion device"</a> already for a while.  Basically I want a "pocket PC that can do as much as possible over which i have as much control as possible so I can do things my way, but still fits in a pocket and which can do gsm and such"<br />

So, something like a netbook, but really portable, and that can also do telephony stuff.<br />

Nokia's recently announced <a href="http://maemo.nokia.com/n900/">n900</a> seems to be very close to what I'm looking for.<br />

It could have been a tad bigger (to make typing easier) but other then that it looks perfect: powerful, high resolution display, Linux with a "usual" userspace (unlike Android) to give me all freedom I'm looking for, keyboard, plenty of space and many goodies such as wifi, a-gps, fm receiver/transmitter, IR, bluetooth, digital camera, tv-out and so on.</p>

<p>This device has ignited my interest in Maemo and all things related so I'll be in Amsterdam on October 9-10-11, at the <a href="http://wiki.maemo.org/Maemo_Summit_2009">Maemo summit 2009</a>.  I was lucky enough to score a place in the <a href="http://www.ibishotel.com/gb/hotel-1556-ibis-amsterdam-centre/index.shtml">ibis hotel Amsterdam</a>, as Nokia has reserved more rooms then they could fill with invited speakers and own personnel ;-)<br />

I'm hoping it will be possible to buy a device at the conference.  The timing would be perfect.  Nokia seems to be a really cool company and so far, they haven't disappointed yet...</p>

<p>Somewhat related: a <a href="http://wiki.maemo.org/Mer">Mer (maemo alternative)</a> <a href="http://gitorious.org/~lbt">developer</a> told me he was very interested in making <a href="http://www.uzbl.org/">uzbl</a> available on Mer, so he did just that. I'm curious myself how usable uzbl will be on the n900. Only one way to find out :)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/n900/index.html" rel="tag">n900</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/opening_files_automatically_on_mainstream_linux_desktops/">Opening files automatically on mainstream Linux desktops</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/opening_files_automatically_on_mainstream_linux_desktops/" rel="bookmark">
					<time class="entry-date" datetime="2009-09-22 19:43:17 -0400 EDT">
						September 22, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Xfce/Gnu/Linux works amazingly well on my moms workstation, with one exception: opening files automatically with the correct program.</p>

<p>The two biggest culprits are:</p>

<ul>

<li>Gtk's "open file with" dialog: if any Gtk program doesn't know how to open a file it brings up this dialog that is horrible to use.  You can search through your entire VFS for the right executable.  No thumbnails, no usage of .desktop files, $PATH, autocompletion and not even limiting the scope to directories such as /usr/bin</li>

<li>Mozilla software such as Firefox and Thunderbird: they only seem to differentiate files by their mimetype, not by extension.  There are add-ons to make it easier to edit these preferences, but eventually you're in a dead end because you get files with correct extensions but unuseful mimetimes (application/octet-stream)</li>

</ul>

<p>Luckily the fd.o guys have come up with <a href="http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html">.desktop files</a>.<br />

In $XDG_DATA_HOME/applications/defaults.list you can define which applications to use for which mime type.<br />

So the only thing you need to do is call <a href="http://portland.freedesktop.org/xdg-utils-1.0/xdg-open.html">xdg-open</a> to open a file with the application you want.<br />

And that's exactly what I did. For now I just configure everything to use xdg-open and that seems to work just fine.  Oddly enough, even though the defaults.list is also based on mimetypes, files that are marked as octet-stream in Thunderbird seem to be properly recognized by xdg-open and opened with the correct program.  Or maybe this is because at the time of testing I only had octet-stream .doc files.  Anyway, we'll see.  But for now it's looking pretty good. </p>

<p>Note: somewhat related and also not very pleasant: epdfview used to say 'encrypted document.. please enter password' whenever you tried to open a non-existent file, a directory,.. basically anything else then a pdf file.  But this seems to be fixed since <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=508969">5 days ago</a>.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/snip_a_dead-simple_but_quite_powerful_text_expander_and_more/">Snip: a dead-simple but quite powerful text expander and more</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/snip_a_dead-simple_but_quite_powerful_text_expander_and_more/" rel="bookmark">
					<time class="entry-date" datetime="2009-09-14 20:22:00 -0400 EDT">
						September 14, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Inspired by <a href="http://bbs.archlinux.org/viewtopic.php?id=71938">Snippy</a> and <a href="http://lifehacker.com/351285/automate-repetitive-typing-with-snippits">snippits</a>, I wrote a simple tool called <a href="http://github.com/Dieterbe/snip">snip</a>.<br />

It helps you to automatically fill in text for you (which can be dynamically created) and/or to perform custom keypresses and operations.<br />

<br />

It works like this: you bind a key (in your WM or with <a href="http://freshmeat.net/projects/xbindkeys/">xbindkeys</a>) to launch `snip` with the `load` or `save` argument.</p>

<ul>

<li>`load` will look in a folder in your $HOME for snips (small text files) and present them through <a href="http://tools.suckless.org/dmenu">dmenu</a>.  If your snip has the executable flag it will be executed, otherwise the literal contents of the file are taken.  <a href="http://www.semicomplete.com/projects/xdotool/">xdotool</a> is used to type the output (which gets entered where your cursor is).  </li>

<li>`save` is just a convenience wrapper that uses <a href="http://freshmeat.net/projects/zenity">zenity</a> to quickly create new snips</li>

</ul>

<p>While comparable to snippits, I find it better because it presents the options with dmenu (you don't need to type the name on the beforehand manually), it uses the <a href="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html">xdg basedir spec</a> and since it uses several great, tried &amp; proven existing utilities, it does its job in less then 50 lines of shellscript.</p>

<p>I wrote some some <a href="http://github.com/Dieterbe/snip/tree/master/examples/snips/">example snips</a> which demonstrate entering static chunks of text, using xdotool for automating keypresses, aspell for automatic spell checking (and word replacing), inserting url's from your <a href="http://www.uzbl.org">uzbl</a> bookmarks/history, and some dynamic output based on current time, $USER and zenity input.<br />

I'm sure a lot of people will come up with more cool things :)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/wishlist/">Wishlist</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/wishlist/" rel="bookmark">
					<time class="entry-date" datetime="2009-09-04 16:22:03 -0400 EDT">
						September 4, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I'm starting to keep track of some things I want.  I've picked Amazon because they have many items in their database.<br />

<a href="http://www.amazon.com/gp/registry/wishlist/2K78V4LHLYBD">wishlist</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/froscon_2009_afterthoughts/">Froscon 2009 afterthoughts</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/froscon_2009_afterthoughts/" rel="bookmark">
					<time class="entry-date" datetime="2009-08-28 19:00:02 -0400 EDT">
						August 28, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><a href="http://froscon.org/">Froscon</a> was great.</p>

<ul>

<li>It was smaller then I thought, I especially assumed more activity in the devrooms (I'm too used to <a href="http://fosdem.org/">fosdem</a> which is much bigger), but hey nice conference anyway.</li>

<li>It was great to meet (some of) my Arch Linux colleagues.  Mostly the guys from Germany showed up, and Roman who is from Ukraine.</li>

<li>We all got an Arch t-shirt/polo of which we could pick the color ourselves.  Woohoo.  Thanks donators.</li>

<li>A few people also told me they had tried / were using <a href="http://www.uzbl.org">uzbl</a> (my browser project) so that was really cool.</li>

<li>I had an interesting chat with <a href="http://www.informatik.uni-koeln.de/ls_juenger/people/lange/">Thomas Lange</a>, the author of <a href="http://www.informatik.uni-koeln.de/fai/">FAI</a> (a tool to automatically mass-install systems, mostly Debian).  I've used it in the past, liked it and was somewhat inspired by it when building <a href="/AIF_the_brand_new_Arch_Linux_Installation_Framework">AIF</a>. (but some design goals are different).</li>

</ul>

<p>

Here is a picture of my "Arch releng partner" Gerhard (right) and I (left).  We've done a lot of work together and it was great to talk face to face for once.  Here we're showing (proudly) an Arch Linux Froscon disc (which is a slightly modified version of the <a href="http://www.archlinux.org/news/459/">2009.08 core images</a>):</p>

<p><a href="/files/blog/archlinux-pierre/2009-08-22_11-18-57.jpg"><img src="/files/blog/archlinux-pierre/2009-08-22_11-18-57.jpg" /></a></p>

<p>Team photo:</p>

<p><a href="/files/blog/archlinux-pierre/2009-08-22_12-53-07.jpg"><img src="/files/blog/archlinux-pierre/2009-08-22_12-53-07.jpg" /></a></p>

<p><a href="http://users.archlinux.de/~pierre/froscon/2009/">Image gallery</a>

</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/uzbl/index.html" rel="tag">uzbl</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/a_script_that_pulls_photos_from_facebook/">A script that pulls photos from facebook</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/a_script_that_pulls_photos_from_facebook/" rel="bookmark">
					<time class="entry-date" datetime="2009-08-18 17:36:21 -0400 EDT">
						August 18, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><a href="http://fbcmd.dtompkins.com/">Fbcmd</a> is pretty cool.<br />

I quickly hacked this script together which pulls all photo albums from friends on facebook, so I have them available where I want.  (It should also pull your own albums, but I don't have any so I can't check that)<br />

Maybe there are better ways to do this.  I looked at <a href="http://nerd256.diggles.net/fbfs/">fbfs</a> but it looks a bit weird.  I have no idea what the corrupted images fuss is all about.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>



<span style="color: #19177C">dir</span><span style="color: #666666">=</span><span style="color: #19177C">$HOME</span>/fbphotos

<span style="color: #19177C">cache</span><span style="color: #666666">=</span><span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">XDG_CACHE_HOME</span><span style="color: #008000; font-weight: bold">:-</span><span style="color: #19177C">$HOME</span>/.cache<span style="color: #BB6688; font-weight: bold">}</span>

<span style="color: #666666">[</span> -d <span style="color: #19177C">$cache</span> <span style="color: #666666">]</span> <span style="color: #666666">||</span> mkdir <span style="color: #19177C">$cache</span>

<span style="color: #666666">[</span> -d <span style="color: #19177C">$cache</span> <span style="color: #666666">]</span> <span style="color: #666666">||</span> <span style="color: #008000">exit </span>2

<span style="color: #408080; font-style: italic">#fbcmd=`which fbcmd`</span>

<span style="color: #19177C">fbcmd</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;php /home/dieter/fbcmd/fbcmd.php&#39;</span>



<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Fetching info about friends and myself ..&quot;</span>

<span style="color: #19177C">$fbcmd</span> FRIENDS -csv | tail -n <span style="color: #BA2121">&#39;+2&#39;</span> &gt; <span style="color: #19177C">$cache</span>/fb-users <span style="color: #408080; font-style: italic"># ID NAME</span>

<span style="color: #19177C">$fbcmd</span> WHOAMI  -csv &gt;&gt; <span style="color: #19177C">$cache</span>/fb-users



<span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000">read </span>line

<span style="color: #008000; font-weight: bold">do</span>

        <span style="color: #19177C">uid</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>  cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">1</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

        <span style="color: #19177C">uname</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">2</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Fetching list of albums for user </span><span style="color: #19177C">$uname</span><span style="color: #BA2121"> ... &quot;</span>

        <span style="color: #19177C">$fbcmd</span> ALBUMS <span style="color: #19177C">$uid</span> -csv | tail -n <span style="color: #BA2121">&#39;+2&#39;</span> &gt; <span style="color: #19177C">$cache</span>/fb-<span style="color: #19177C">$uid</span>-albums <span style="color: #408080; font-style: italic">#OWNER_NAME AID NAME SIZE</span>

<span style="color: #008000; font-weight: bold">done</span> &lt; <span style="color: #19177C">$cache</span>/fb-users



<span style="color: #008000; font-weight: bold">for</span> i in <span style="color: #19177C">$cache</span>/fb-*-albums

<span style="color: #008000; font-weight: bold">do</span>

        <span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000">read </span>line

        <span style="color: #008000; font-weight: bold">do</span>

                <span style="color: #19177C">oname</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">1</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #19177C">aid</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>  cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">2</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #19177C">aname</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">3</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #19177C">asize</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">4</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Fetching </span><span style="color: #19177C">$oname</span><span style="color: #BA2121"> album: </span><span style="color: #19177C">$aname</span><span style="color: #BA2121">&quot;</span>

                <span style="color: #19177C">$fbcmd</span> APICS <span style="color: #19177C">$aid</span> <span style="color: #19177C">$dir</span> -psize<span style="color: #666666">=1</span> -af<span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$oname</span><span style="color: #BA2121">-</span><span style="color: #19177C">$aname</span><span style="color: #BA2121">/[pid].jpg&quot;</span> -pic_skip_exists<span style="color: #666666">=</span>1

        <span style="color: #008000; font-weight: bold">done</span> &lt; <span style="color: #19177C">$i</span>

<span style="color: #008000; font-weight: bold">done</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>Here&rsquo;s a picture from <a href="http://www.countingcows.be">Counting cows</a> I grabbed from <a href="http://lievendekeyser.net/">Lievens</a> album.<br /></p>

<p><img src="/files/countingcows2009.jpg" /></p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/arch_linux_2009.08_and_froscon_2009/">Arch Linux 2009.08 &amp; Froscon 2009</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/arch_linux_2009.08_and_froscon_2009/" rel="bookmark">
					<time class="entry-date" datetime="2009-08-10 12:36:48 -0400 EDT">
						August 10, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>So, the Arch Linux <a href="http://bbs.archlinux.org/viewtopic.php?id=77680">2009.08 release</a> is now behind us, nicely on schedule.<br />

I hope people will like <a href="http://github.com/Dieterbe/aif/">AIF</a> because it was a lot of work and we didn't receive much feedback.  I personally like it to apply my <a href="/rethinking_the_backup_paradigm_a_higher-level_approach">fancy backup restoration</a> approach.<br />

But I'm sure if more people would look at the code we would find quite some design and implementation things that could be improved.  (With <a href="/uzbl_a_browser_that_adheres_to_the_unix_philosophy">uzbl</a> I was amazed how much difference it can make if many people all have ideas and opinions about every little detail)</p>

<p>Later this week I'm off to the <a href="http://www.countingcows.be/home.php">Counting Cows festival</a> in France, and the week after that (august 22-23) I'm going to <a href="http://www.froscon.org/">FrOSCon</a> in Germany where I will meet some of my Arch Linux colleagues in real life, which I'm really looking forward to.</p>

<p>If anyone wants a ride to froscon let me know.  But note I'll try to maximize my time there (leave saturday early and come back late on sunday.  I even took a day off on monday so I might stay a day longer if I find more interested people to hang out there)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/aif_automatic_lvm_dm_crypt_installations_and_test_suite/">AIF automatic lvm/dm_crypt installations and test suite</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/aif_automatic_lvm_dm_crypt_installations_and_test_suite/" rel="bookmark">
					<time class="entry-date" datetime="2009-07-22 22:36:30 -0400 EDT">
						July 22, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>We're working hard on a new <a href="http://www.archlinux.org">Arch</a> release. (should be done by <a href="http://froscon.org/">froscon</a>)</p>

<p>Amongst the slew of fixes and improvements there are also some cool new things I'm working on.<br />

First of all, I worked more on the automatic installations.  Now you can easily install an LVM based Arch system on top of dm_crypt for example.<br />

You type this command:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

aif -p automatic -c /usr/share/aif/examples/fancy-install-on-sda

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>And <strong>bam</strong> you have a complete working system with LVM, dm_crypt etc all set up.  You just need to change your keymap, hostname, network config and such (or, configure that on the beforehand in the config file for AIF)</p></p>

<p>Another thing I started working on is a very simple test suite.<br />

Basically, when launching a test, the following steps are invoked</p>

<ul>

<li>installation of an arch system with aif's automatic procedure using a certain config file</li>

<li>installation of a verification script onto the target system and configuration of the target to run the script on boot (DAEMONS variable in /etc/rc.conf)</li>

<li> if aif ended succesfully: automatic reboot.. and tada!</li>

</ul>

<p>The verification script will check things like availability (and size) of LVM volumes, amount of swap space, keyboard layout, network and so on.<br />

Here's a picture of a rough first version:</p>

<p><img src="/files/aif-test-suite-wip.png" /></p>

<p>Stay tuned!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/mysql_status_variables_caveats/">Mysql status variables caveats</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/mysql_status_variables_caveats/" rel="bookmark">
					<time class="entry-date" datetime="2009-06-06 11:33:34 -0400 EDT">
						June 6, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>While setting up Zenoss and reading <a href="http://dev.mysql.com/doc/refman/5.0/en/server-status-variables.html">Mysql documentation about status variables</a> I learned:</p>

<ul>

<li>All select_* variables ("Select statistics" graph in Zenoss) are actually about joins, not (all) selects.  This also explains why there is no clear relation to com_select (which shows the amount of selects).  ("Command statistics:selects" graph in Zenoss)</li>

<li>Com_select does not denote all incoming select commands.  If you have a hit on your query cache, com_select is <em>not</em> incremented.  So I thought we were doing less qps while in fact we were just getting more cache hits. Qcache_hits gets incremented on cache hits (but is not monitored by Zenoss)</li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
                <a href="http://localhost:1313//tags/mysql/index.html" rel="tag">mysql</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/zenoss_and_mysql_monitoring/">Zenoss &amp; Mysql monitoring</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/zenoss_and_mysql_monitoring/" rel="bookmark">
					<time class="entry-date" datetime="2009-06-06 10:35:40 -0400 EDT">
						June 6, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I've been playing with <a href="http://www.zenoss.com/">Zenoss</a> (2.4) for the first time.  Here are my thoughts:</p>

<ul>

<li>One big package that installs itself in /usr/local and copies an initscript to /etc/init.d .  Contains a mysql instance, rrdtool, python and several more binaries. (all in all about 500MB installed).  Not the cleanest way to do things but definitely easy to install/deploy.  This is also where your data will end up</li>

<li>Configuration is in a Zope-specific database (ZODB).  I prefer text files for this (easy to edit, easy to generate, version control etc). Mysql is used for the events, RRD files for measurement data.  Two fine choices there</li>

<li>When you add a host, it does a lot of things automatically (monitoring various things through snmp and even ssh.  Even crontabs and their results are tracked).  I'm sure people will have various opinions about this</li>

<li>It uses Adobe flash for interface...I mean, seriously</li>

<li>It checks for updates itself.  Very useful if you don't like package managers</li>

<li>Most stuff just works by default (eg basic snmp monitoring).  to monitor things like mysql/apache you just install a zenpack, restart zenoss, configure one or two settings and it should work.  No need to write the commands, variable replacements etc like in Nagios</li>

<li>Nice overview page per host with its current state (it shows the host' properties and other information, not just servicecheck outputs like Nagios)</li>

<li>I did have several issues about rrd files not being generated and such (even once where a manual 'python check_foo args' worked) for which I did not get human-friendly errors or in fact, no errors at all ( even in event log), but this is obviously the kind of stuff they will iron out.  Usually some other people have had the same issues and in IRC they are also quite helpful.</li>

</ul>

<p>I also tried the mysqlmonitor zenpack, which is quite nice.  You can find out what it can do at various places (<a href="http://www.zenoss.com/community/docs">extended monitoring guide</a>,  <a href="http://www.krisbuytaert.be/blog/monitoring-mysql">mysql monitoring shootout</a> etc), but here is what it does <strong>not</strong> monitor/graph:</p>

<ul>

<li>query cache (hits, inserts, lowmem_prunes, queries in cache,..)</li>

<li>query durations / #slow queries</li>

<li>returned rows /dataset sizes</li>

<li>open tables</li>

<li>replication stats</li>

<li>thread states</li>

<li>temp tables (tmp tables on disk!)</li>

<li>com_* variables other then com_select/insert/update/delete. no com_alter/commit/flush/lock_tables etc

</ul>

<p>I don't see why you can't track such things, as afaik you can easily/cheaply get them all with a 'show global status'.  (though storing them all in rrd files will take quite some space).  Imho it would be very usefull it you had more control over what (not) to monitor, maybe through zPropperties or whatever.<br />

Though it doesn't look too hard to adapt the Zenpack, so it can be done.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/monitoring/index.html" rel="tag">monitoring</a>
            
                <a href="http://localhost:1313//tags/mysql/index.html" rel="tag">mysql</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/uzbl_a_browser_that_adheres_to_the_unix_philosophy/">Uzbl.  A browser that adheres to the unix philosophy.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/uzbl_a_browser_that_adheres_to_the_unix_philosophy/" rel="bookmark">
					<time class="entry-date" datetime="2009-04-27 23:02:37 -0400 EDT">
						April 27, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I need a browser that is fast, not bloated, stores my data (bookmarks, history, account settings, preferences, ...) in simple text files that I can keep under version control, something that does not reinvent the wheel, something that I can control.</p>

<p>Well, I could not find it.<br />

So I started the <a href="http://bbs.archlinux.org/viewtopic.php?id=70700&amp;p=1">uzbl browser</a> project.<br />

The project is just a few days old, but already some developers joined me and we're having a lot of fun hacking.  One of them (Mike) was even creazy enough to register a domain for it with a website and all.<br />

So there you have it: <a href="http://uzbl.org">uzbl.org</a>.<br />

It is stil very early in the process, but some things already work.</p>

<p>Here are some of the ideals (not all implemented yet):</p>

<ul>

<li>keyboard controlled: modal with vim-like bindings, or with modifier keys</li>

<li>very simple ini-style config file</li>

<li>very minimal interface. No unnecessary interface elements</li>

<li>Things like url changing, loading/saving of bookmarks, ... are handled through external scripts that you write and call with keyboard shortcuts.  If they want to alter the behavior of uzbl (change url, reload,..) they write a command to a FIFO (spawned by the uzbl process).  Some scripts are also triggered by uzbl (like history logging or when a file needs to be downloaded) </li>

</ul>

<p><a href="http://github.com/Dieterbe/uzbl/tree/master">more</a></p>

<p>Uzbl follows the UNIX philosophy:<br />

<quote><br />

<i>Write programs that do one thing and do it well. Write programs to work together. Write programs to handle text streams, because that is a universal interface.</i></quote></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/uzbl/index.html" rel="tag">uzbl</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/poor_mans_dmenu_benchmark/">Poor mans dmenu benchmark</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/poor_mans_dmenu_benchmark/" rel="bookmark">
					<time class="entry-date" datetime="2009-04-25 11:25:26 -0400 EDT">
						April 25, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I wanted to know how responsive <a href="http://tools.suckless.org/dmenu">dmenu</a> and awk, sort, uniq are on a 50MB file (625000 entries of 80 1-byte chars each).</p>

<p>generate file:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Creating dummy file of 50MB in size (625000 entries of 80chars)&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Note: this takes about an hour and a half&quot;</span>

<span style="color: #19177C">entries_per_iteration</span><span style="color: #666666">=</span>1000

<span style="color: #008000; font-weight: bold">for</span> i in <span style="color: #BA2121">`</span>seq <span style="color: #666666">1</span> 625<span style="color: #BA2121">`</span>

<span style="color: #008000; font-weight: bold">do</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Iteration </span><span style="color: #19177C">$i</span><span style="color: #BA2121"> of 625 ( </span><span style="color: #19177C">$entries_per_iteration</span><span style="color: #BA2121"> each )&quot;</span>

        <span style="color: #008000; font-weight: bold">for</span> j in <span style="color: #BA2121">`</span>seq <span style="color: #666666">1</span> <span style="color: #19177C">$entries_per_iteration</span><span style="color: #BA2121">`</span>

        <span style="color: #008000; font-weight: bold">do</span>

                <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;`date +&#39;%Y-%m-%d %H:%M:%S&#39;` `date +%s`abcdefhijklmno`date +%s | md5sum`&quot;</span> &gt;&gt; ./dummy_history_file

        <span style="color: #008000; font-weight: bold">done</span>

<span style="color: #008000; font-weight: bold">done</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>measure speed:</p></p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Plain awk &#39;{print \$3}&#39;:&quot;</span>

<span style="color: #008000">time </span>awk <span style="color: #BA2121">&#39;{print $3}&#39;</span> dummy_history_file &gt;/dev/null



<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;awk + sort&quot;</span>

<span style="color: #008000">time </span>awk <span style="color: #BA2121">&#39;{print $3}&#39;</span> dummy_history_file | sort &gt;/dev/null

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;awk + sort + uniq&quot;</span>

<span style="color: #008000">time </span>awk <span style="color: #BA2121">&#39;{print $3}&#39;</span> dummy_history_file | sort | uniq &gt;/dev/null



<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Plain dmenu:&quot;</span>

dmenu &lt; dummy_history_file

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;awked into dmenu:&quot;</span>

awk <span style="color: #BA2121">&#39;{print $3}&#39;</span> dummy_history_file | dmenu

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;awk + sort + uniq into dmenu:&quot;</span>

awk <span style="color: #BA2121">&#39;{print $3}&#39;</span> dummy_history_file | sort | uniq | dmenu

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>Results.<br /></p>

<p>I ran the test twice about an half hour after generating the file, so in the first run, the first awk call may have been affected by a no longer complete Linux block cache.<br /></p>

<p>(I also edited the output format a bit)<br /></p>

<p>Run 1:</p></p>

<p><pre></p>

<p>Plain awk &lsquo;{print $3}&rsquo;:</p>

<p>real    0m1.253s</p>

<p>user    0m0.907s</p>

<p>sys 0m0.143s</p>

<p>awk + sort:</p>

<p>real    0m3.696s</p>

<p>user    0m1.887s</p>

<p>sys 0m0.520s</p>

<p>awk + sort + uniq:</p>

<p>real    0m15.768s</p>

<p>user    0m12.233s</p>

<p>sys 0m0.820s</p>

<p>Plain dmenu:</p>

<p>awked into dmenu:</p>

<p>awk + sort + uniq into dmenu:</p>

<p></pre><p>Run 2</p></p>

<p><pre></p>

<p>Plain awk &lsquo;{print $3}&rsquo;:</p>

<p>real    0m1.223s</p>

<p>user    0m0.923s</p>

<p>sys 0m0.107s</p>

<p>awk + sort:</p>

<p>real    0m2.799s</p>

<p>user    0m1.910s</p>

<p>sys 0m0.553s</p>

<p>awk + sort + uniq:</p>

<p>real    0m16.387s</p>

<p>user    0m12.019s</p>

<p>sys 0m0.787s</p>

<p>Plain dmenu:</p>

<p>awked into dmenu:</p>

<p>awk + sort + uniq into dmenu:</p>

<p></pre><p>Not too bad.  It&rsquo;s especially uniq who seems to cause a lot of slowdown.  (in this dummy test file, are entries are unique. If there were lots of dupes, the results would probably be different, but I suspect that uniq always needs some time to do its work, dupes or not).  The real bottleneck seems to be raw cpu power.  Not storage bandwidth at all since Linux caches it.  If uncached, I estimate the sequential read would take 1.5 seconds or so. (about 30MB/s on common hard disks)</p></p>

<p>Once the stuff gets piped into dmenu, there is a little lag but it's reasonably responsive imho.<br />

Test performed on an athlon xp @ 2GHz.  1 GB of memory.  There were some other apps running, not a very professional benchmark but you get the idea :)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/automatic_installations_with_aif/">Automatic installations with AIF</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/automatic_installations_with_aif/" rel="bookmark">
					<time class="entry-date" datetime="2009-03-14 13:15:20 -0400 EDT">
						March 14, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Yesterday I finished the first working version of AIF's <a href="http://github.com/Dieterbe/aif/blob/b6aad22d8c0657d9205314b176e31878ffbc46a4/src/core/procedures/automatic">automatic procedure</a>, along with a <a href="http://github.com/Dieterbe/aif/blob/b6aad22d8c0657d9205314b176e31878ffbc46a4/examples/generic-install-on-sda">sample config for a basic install.</a>.</p>

<p>For me personally this means I can start working on the next step towards my goal of having all my systems "metadata" centrally stored (along with my real "data"), and the possibility to reconstruct all my systems in a deployment-meets-backup-restore fashion ( see <a href="/rethinking_the_backup_paradigm_a_higher-level_approach" title="/rethinking_the_backup_paradigm_a_higher-level_approach">rethinking_the_backup_paradigm_a_higher-level...</a> )</p>

<p>The last few weeks I/we've been quite busy fixing up many things related to aif and the arch release stuff in general.  The kernel guys are now at 2.6.29-rc8, so a stable release won't be long anymore and I want to get as much things fixed before 2.6.29 is out, so we can release soon after. (with /arch/setup and /arch/quickinst replaced by aif)</p>

<p>Misc notes:</p>

<ul>

<li>Working together with Aaron and Gerhard is great.  Our interests and knowledge are diverse, so we each have our place in the releng team, but there is some overlap too.  This works out great.  Input from them (and the other developers) often brings fixes for stupid things that I've spent too much time on and was still looking over.</li>

<li>I'm also a "real" Arch developer (this actually means package maintainer) now: I maintain 1 <a href="http://www.archlinux.org/packages/?q=aif">package</a> :)</li>

<li>The 2009.02 release was a success.  I was suprised by the amount of <a href="http://www.google.be/search?q=Arch+Linux+2009.02+release">attention</a> it got (maybe because we were the first distro to ship a release that supports ext4).  I realised that all those delays to fix some (imho) details was probably the best move after all.</li>

<li>I've been looking at <a href="http://nixos.org/">nixOS</a>, which is a very interesting project. The way I see it, they combine the "functional description" part (which is on many systems handled by puppet/cfengine/kickstart/aif/...) right into their OS core. That, and some other features.  It was a bit too unstable when I tried it though.</li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/fosdem_2009/">Fosdem 2009</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/fosdem_2009/" rel="bookmark">
					<time class="entry-date" datetime="2009-02-05 21:20:15 -0400 -0400">
						February 5, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><a href="http://www.fosdem.org"><img src="/files/blog/fosdem/going-to-2009.jpg" alt="I'm going to FOSDEM, the Free and Open Source Software Developers' European Meeting" /></a></p>

<p>I'm particulary interested in:</p>

<ul>

<li>The out-of-the-box concepts of <a href="http://www.fosdem.org/2009/schedule/events/644">Exherbo</a>. I hope to see more things like <a href="http://ciaranm.wordpress.com/2009/01/26/managing-accounts-with-the-package-manager/">this</a>.</li>

<li>Various talks at <a href="http://www.fosdem.org/2009/schedule/devrooms/opensuse">OpenSuse</a> about distribution development, their build service, etc.</li>

<li>tools such as <a href="http://www.fosdem.org/2009/schedule/events/fedora_func_symbolic">func</a> and <a href="http://www.fosdem.org/2009/schedule/events/puppet">puppet</a>.</li>

<li><a href="http://www.fosdem.org/2009/schedule/events/syslinux">syslinux</a>, <a href="http://fosdem.org/2009/schedule/events/upstart">upstart</a>, <a href="http://fosdem.org/2009/schedule/events/ext4">ext4</a> etc.</li>

<li>Some <a href="http://www.fosdem.org/2009/schedule/devrooms/mysql">mysql</a> stuff and the <a href="http://www.fosdem.org/2009/schedule/events/pg_fs_io_db_perspective">filesystem i/o from a db perspective</a> talk.</li>

</ul>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/mysql/index.html" rel="tag">mysql</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/arch_linux_release_engineering/">Arch Linux release engineering</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/arch_linux_release_engineering/" rel="bookmark">
					<time class="entry-date" datetime="2009-01-22 23:11:01 -0400 -0400">
						January 22, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I don't think I've ever seen so much anxiety/impatience/hope/buzz for a new Arch Linux release. (this is because of 2.6.28 with ext4 support).<br />

The last release was 6 months ago, which is not so good.. also the arch-installer project has been slacking for a while.  But the Arch devs have been very busy and many things going on.  You know how it goes...</p>

<p>That's why some new people have stepped up to help out on a new release:<br />

Today, we are on the verge of a 2009-01 release (though that has been said so many times lately ;-) and together with Aaron we have started a new project: <a href="http://www.archlinux.org/news/430/">the Arch Linux Release Engineering team</a>.<br />

Members of this team are Aaron himself, Gerhard Brauer and me.</p>

<p>Our goals:</p>

<ul>

<li>coordinated releases following the rhythm of kernel releases (that's a release every 2-3 months baby!).</li>

<li>anticipate the availability of the kernel in the testing repo's instead of having to wait for it to go to core before building alpha/beta images</li>

<li>migration to <a href="/AIF_the_brand_new_Arch_Linux_Installation_Framework">AIF</a> as the new Arch installer (woot!)</li>

<li>testing.  Leveraging the possibilities of AIF as an unattended installer, we should be able to script full installations and health checking of the resulting system.</li>

<li>involving the community more? releasing "testing iso's" ? not sure about that. we'll see...</li>

</ul>

<p>We also have:</p>

<ul>

<li><a href="http://www.archlinux.org/mailman/listinfo/arch-releng">arch-releng mailing list</a></li>

<li><a href="http://bugs.archlinux.org/index.php?project=6">Release Engineering bugtracker</a></i>

</ul>

<p>Oh yeah AIF is mirrored @ <a href="http://projects.archlinux.org/" title="http://projects.archlinux.org/">http://projects.archlinux.org/</a> and available packaged in the <a href="http://www.archlinux.org/packages/?q=aif">official repo's</a>!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/cakephp_and_a_paradigm_shift_to_a_code_generation_based_approach/">CakePHP and a paradigm shift to a code generation based approach?</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/cakephp_and_a_paradigm_shift_to_a_code_generation_based_approach/" rel="bookmark">
					<time class="entry-date" datetime="2009-01-19 22:16:52 -0400 -0400">
						January 19, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>At my <a href="/jobhunt_over">new job</a>, I'm writing a quite full-featured web application.<br />

I've choosen to use CakePHP.<br />

Why? Well, it may be 2 years since I last used it, but I've followed the project and it's planet, and it seems to have matured and gained even more monumentum.<br />

I want to use something that is widely used so there is plenty of stuff available for it, it's RAD, it's flexible and powerful.<br />

I noticed things such as CLI support and documentation have improved tremendously too.</p>

<p>However, I find that still, the recommended (or at least "most commonly used") practices are not as efficient as they could be, and that emphasis is placed on the wrong aspects.<br />

See, even though the <a href="http://book.cakephp.org/view/113/Code-Generation-with-Bake">bake</a> tool has come a long way since I last used it, it's still used to "generate some standard models/controllers/views" and the developer can take it from there [further editing the resulting files himself].<br />

Finetuning generated code by editing the templates (in fact, only views have templates; the php code of models and controllers is hardcoded in the scripts that generate them), is still an obscure practice...<br />

Also, there are very few commandline switches (Right now you can choose your app dir, whether you want to bake a model,controller or view, and it's name.)<br />

All other things (validation rules, associatons, index/view/edit/add actions/views, which components, overwrite yes/no etc) are all handled interactively.<br />

There are also some smaller enoyances such as when you specify one option like the name of the model, it assumes you don't want interactivity and produces a model containing nothing more then the class definition and the membervariable $name, which is usually worthless.<br />

One thing that is pretty neat though, If you update $this->recursive in a model, the baked views will contain stuff for the associated things.  But so much more could be done...<br />

</p>

<p>Ideallistically speaking, the bake tool (and it libraries) should imho become much more advanced:</p>

<ul>

<li>templates for views, models and controllers.</li>

<li>choice of multiple (groups of) templates which you can choose with a commandline argument. (eg I typically have some different kinds of M/V/C's for a certain model, but there are many similarities and they can often even be categorised into groups.)</li>

<li>the ability to control all aspects of the bake process through commandline switches (or config files).  Both the things that are asked now but also $recursive level, behaviors you want to use for models, etc.</li>

<li>proper cmdline arg parsing (getline or something)</li>

</ul>

<p>We could then do a paradigm shift to actually treat your models, views and controllers as uncritical "output" code which can be deterministically regenerated (and hence doesn't need to be versionned), while the templates and the scripts to call bake become your "source", and your key asset to building the application you're working on.</p>

<p>If I had the time (or would use cake for personal projects) I would happily work on such refactorings in a clean way.<br />

For now though,  I've hacked/workarounded/patched the cake code in such a way that it behaves the way I want, while spending as little time on it as possible.<br />

For those interested, the patched code is online at <a href="http://github.com/Dieterbe/cake/tree/master" title="http://github.com/Dieterbe/cake/tree/master">http://github.com/Dieterbe/cake/tree/master</a><br />

The first rev is the original cakephp code, so you can look at the diffs if you want.</p>

<p>Changes until now ( <a href="http://github.com/Dieterbe/cake/commit/9ceb6234164ebc750c8b697a825834ca36097ce7" title="http://github.com/Dieterbe/cake/commit/9ceb6234164ebc750c8b697a825834ca36097ce7">http://github.com/Dieterbe/cake/commit/9ceb6234164ebc750c8b697a825834ca3...</a> ):</p>

<ul>

<li>Do not clear my terminal. (why is that needed anyway :/)</li>

<li>Some echo's that tell me which shells are loaded, tasks executed etc (to understand more how it all works)</li>

<li>always overwrite files.  Hey I use version control!  always bake unit tests, always bake all actions/views, except those for admin routing</li>

<li>never ask me which db to connect to, never use scaffolding, don't use helpers, don't write $useDbConfig to models (it's loaded dynamically in app_model),</li>

<li>agree with all associations except the hasOne's (I can build in exceptions/specific rules if I ever need them)</li>

<li>validation rules are specified as sql comments.  I don't want to re-answer those questions each time I rebake.</li>

</ul>

<p>See this example sql file.  When baking a model, the code will first try to find a specific rule for the model, if not found, it will look for a global rule, and if still not found, ask the question interactively.<br /></p>

<p>[code lang=&ldquo;sql&rdquo;]<br /></p>

<p>&ndash; cake validate ALL id none<br /></p>

<p>&ndash; cake validate ALL created none<br /></p>

<p>&ndash; cake validate ALL modified none<br /></p>

<p>(&hellip;)<br /></p>

<p>CREATE TABLE foos (<br /></p>

<pre><code>id serial NOT NULL,&lt;br /&gt;

name character varying(255) NOT NULL, --cake validate apc alphanumeric&lt;br /&gt;

type character varying(255) NOT NULL, --cake validate apc notempty&lt;br /&gt;

room_id integer NOT NULL, --cake validate apc numeric&lt;br /&gt;

created timestamp without time zone,&lt;br /&gt;

modified timestamp without time zone&lt;br /&gt;
</code></pre>

<p>);<br /></p>

<p>[/code]</p>

<p></ul></p>

<p>Here is the bash code which I currently use to bake all my models without any interactivity:</p>

<p>[code lang="bash"]<br />

for i in `cake bake model <<< 'q' | awk '/^[[:digit:]]/ {print $2}'` #get a list of all models<br />

do<br />

        if [ $i != Aro ] &amp;& [ $i != Aco ] &amp;& [ $i != ArosAco ]<br />

        then<br />

                echo ">>> doing $i...."<br />

                cake bake model $i<br />

        fi<br />

done<br />

[/code]</p>

<p>I may post later again about this stuff if I have something useful to say.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/jobhunt_over/">Jobhunt over.</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/jobhunt_over/" rel="bookmark">
					<time class="entry-date" datetime="2008-12-24 18:07:35 -0400 -0400">
						December 24, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>What better way to launch the new year then starting to work as a System Engineer/Developer for a consulting firm where everyone breathes Linux and Open Source?<br />

Next week I'll start at <a href="http://kangaroot.net/">Kangaroot</a>.  Woohoo.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/new_aif_release/">new AIF release</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/new_aif_release/" rel="bookmark">
					<time class="entry-date" datetime="2008-12-17 09:50:11 -0400 -0400">
						December 17, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>My holidays present for Arch devs and users: AIF alpha-0.6 !</p>

<p>* Changes since alpha 0.5:</p>

<ul>

<li>fully reworked disk subsystem:

<ul>

<li>support for lvm and dm_crypt</li>

<li>Autoprepare looks exactly the same (ui-wise) but with much cleaner code</li>

<li>Manual mode UI is entirely reworked and has a general editor (see screens)</li>

<li>Unified, more flexible/reusable backend code for partitioning, making filesystems and mounting them.  Uses structured file formats for defining partitions and filesystems</li>

<li>Rollback functionality: when something failed while processing, or user changes his mind afterwards, you can do a rollback (things like umount, lvremove etc are done automatically in the correct order) and start over/retry</li>

</ul>

<p></li></p>

<p><li>fully decoupled UI (dia/cli):</p>

<ul>

<li>

there are now generic, transparent functions for asking dates,numbers,strings,checklist,.. etc with an implementation in both ncurses (dialog) and cli.</li>

<li>all code now uses these functions, making the codebase much cleaner. (look at the code for autoprepare for instance)</li>

<li>with a simple command line flag you can toggle between running the program in cli or dialog mode.</li>

</ul>

<p></li></p>

<p><li>support for commandline args<br /></p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

/arch/aif -p interactive -d     <span style="color: #408080; font-style: italic"># runs the interactive profile with debugging enabled</span>

/arch/aif -p interactive -i cli <span style="color: #408080; font-style: italic"># runs the interactive profile in CLI mode.</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
</li></p>

<p><li>updated howto for using AUR packages</li></p>

<p><li>replaced all refs to previous name (fifa) to aif.</li></p>

<p><li>enabled date/time setting</li></p>

<p><li>a massive amount of bugfixes</li></p>

<p><li>a lot of code cleanups</li></p>

<p></ul></p>

<p>* Screenshots<br />

- AIF manual filesystems, here showing a setup with /dev/sda3 containing a dm_crypt, containing /, and /dev/sda3 containing an LVM setup with 1 LV for /home<br />

<img src="/files/aif/aif-alpha_0.6-disks-overview-dia.png" /></p>

<p>- Processing the filesystems.  The installer automatically reorders everything<br />

<img src="/files/aif/aif-alpha_0.6-disks-processing-dia.png" /></p>

<p>- Rolling back a "/ and /home on top of LVM on top of dm_crypt" setup<br />

<img src="/files/aif/aif-alpha_0.6-disks-rollback-dia.png" /></p>

<p>- a CLI shot where the partitions/filesystems of the autoprepare just have been processed<br />

<img src="/files/aif/aif-alpha_0.6-autoprepare_processed-cli.png" /></p>

<p>* Usability<br />

I tested the installer personally in virtualbox in different scenarios (ftp &amp; cdrom based, autoprepare, manually with normal disk layout,/ on lvm, dm_crypt,.. ), and all produced working installations.<br />

Although I often need to fix bugs after testing a specific scenario,  I don't re-test all scenarios each time.  YMMV<br />

Note that the installer doesn't automatically add the lvm2/encrypt modules to mkinitcpio yet, and doesn't add the right string for lvm/dm_crypt in grubs menu.lst yet.</p>

<p>There are some known issues (which are not critical, just avoid them or live with them).  Here are the biggest ones (for more, see TODO)</p>

<ul>

<li>keyboard and timezone settings from installer don't go into target systems config</li>

<li>long selections (eg packages) are very cumbersome to do in CLI mode.</li>

</ul>

<p>* How?<br />

<a href="http://github.com/Dieterbe/aif/tree/master/HOWTO" title="http://github.com/Dieterbe/aif/tree/master/HOWTO">http://github.com/Dieterbe/aif/tree/master/HOWTO</a></p>

<p>Use package aif-git from AUR.<br />

Even though I tag releases in git, I don't build packages for them.<br />

I now use the master branch as "stable" branch where I pull in code from the experimental branch after it has been tested.<br />

So the master branch (package aif-git) always contains the latest, stable code.</p>

<p>Use "/arch/aif -p interactive -d" (the interactive procedure is the port of /arch/setup)</p>

<p>Have fun,<br />

Dieter</p>

<p>PS: Thomas Baechler (arch dev) has let me know he wants AIF hosted at <a href="http://projects.archlinux.org/" title="http://projects.archlinux.org/">http://projects.archlinux.org/</a> and he will provide me access to their server so I can push to it. Sweet!!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/number_1_productivity_tip_showers/">#1 productivity tip: showers</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/number_1_productivity_tip_showers/" rel="bookmark">
					<time class="entry-date" datetime="2008-12-13 17:43:02 -0400 -0400">
						December 13, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>When you're stuck on a problem, or not even stuck but you just want to boost your creative/out-of-the-box thinking...<br />

Take a shower.  When I'm thinking about a problem and I take a shower, the ideas and thoughts just start popping up, one after each other, or sometimes even two at the same time.  It's amazing.  And it works every time.</p>

<p>Sometimes the amount of thoughts and ideas is so much that I need a piece of paper to write everything down immediately when I come out, otherwise I'll forget stuff before I leave the bathrooom.</p>

<p>If you work from home, it can be beneficial to not shower in the morning (because then the mind is fresh enough to be creative), but rather doing it somewhere before noon or in the afternoon. (of course this depends on what you're working on)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/looking_for_a_new_job/">Looking for a new job</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/looking_for_a_new_job/" rel="bookmark">
					<time class="entry-date" datetime="2008-11-24 20:30:51 -0400 -0400">
						November 24, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>The <a href="/i_just_became_a_system_and_network_architect">adventure at Netlog</a> didn't work out entirely, so <em>I'm looking for a new challenge!</em></p>

<p>My new ideal (slightly utopic) job would be:</p>

<ul>

<li>Conceptual engineering while still being close to the technical side as well, most notably system engineering and development.</li>

<li>Innovative: go where no one has gone before.

<li>Integrated in the open-source world.  (Bonus points for companies where open source is key in their business model)</li>

<p><!-- Either nearby (East Flanders, preferably the Ghent area), or far enough/international to not have travelling/i move /... -->

</ul>

<p>To get a detailed overview of my interests and skills, I refer to:</p>

<ul>

<li>My Linkedin profile: <a href="http://www.linkedin.com/in/dieterplaetinck">http://www.linkedin.com/in/dieterplaetinck</a></li>

<li>My Curriculum Vitae. <a href="/files/curriculumvitae-dieter-plaetinck-2008-11-24-EN.pdf">EN</a> / <a href="/files/curriculumvitae-dieter-plaetinck-2008-11-24-NL.pdf">NL</a> </li>

</ul>

<p><!-- Interested parties can get reference contact information at my previous employer on request. --></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/aif_the_brand_new_arch_linux_installation_framework/">AIF: the brand new Arch Linux Installation Framework</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/aif_the_brand_new_arch_linux_installation_framework/" rel="bookmark">
					<time class="entry-date" datetime="2008-11-17 11:45:25 -0400 -0400">
						November 17, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Recently I started thinking about writing my own automatic installer that would set up my system exactly the way I want.<br />

(See <a href="/rethinking_the_backup_paradigm_a_higher-level_approach" title="/rethinking_the_backup_paradigm_a_higher-level_approach">rethinking_the_backup_paradigm_a_higher-level...</a>)</p>

<p>I looked at the official Arch install scripts to see if I could reuse parts of their code, but unfortunately the code was just one big chunk of bash code with the main program and "flow control" (you must first do this step, then that), UI-code (dialogs etc) and backend logic (create filesystems, ...) all mangled up and mixed very closely together.<br />

Functionality-wise the installer works fine, but I guess the code behind it is the result of years of adding features and quick fixes without refactoring, making it impossible to reuse any of the code.</p>

<p>So I started to write <a href="http://github.com/Dieterbe/aif/">AIF: the Arch Linux Installation Framework</a> (actually it had another name until recently), with these 3 goals in mind:</p>

<ul>

<li>Make all code modular, reusable etc.  Everyone should be able to add/change/remove change certain aspects of an installation procedure easily or build custom installation relying on existing code where appropriate</li>

<li>Port /arch/setup and /arch/quickinst, so you get (almost) the same installer as before, but using totally refactored code.</li>

<li>Write my own automatic procedure for my own custom needs</li>

</ul>

<p>Right now most of the hard work is done and the ported version of /arch/setup seems to work more or less.<br />

I've posted to the arch-general mailing list and the responses I got were very positive.<br />

This is what Aaron Griffin (lead developer of Arch Linux) said:</p>

<blockquote><p>

My honest opinion is that this is awesome. You're the reason I love open source 8)</p>

<p>That said, we haven't release a 2.6.27 ISO just yet, and I need to go<br />

in panic mode and get it out this weekend. But for the next release,<br />

or even a smaller release before then, I'd *love* to incorporate this.</p>

<p>(...)</p>

<p>Just letting you know: I'm not silent because I don't care. I'm silent<br />

because I'm watching and drooling 8)

</p></blockquote>

<p>You can read the whole thread here: <a href="http://www.nabble.com/Fifa:-Flexible-Installer-Framework-for-Arch-linux-td20256427.html" title="http://www.nabble.com/Fifa:-Flexible-Installer-Framework-for-Arch-linux-td20256427.html">http://www.nabble.com/Fifa:-Flexible-Installer-Framework-for-Arch-linux-...</a></p>

<p>I've also built <a href="http://aur.archlinux.org/packages.php?SeB=m&amp;K=Dieter_be">packages</a> to make it easy to install on a current installcd.  The package also comes with a <a href="http://github.com/Dieterbe/aif/tree/master/README">readme</a> and <a href="http://github.com/Dieterbe/aif/tree/master/HOWTO">howto</a> that explain how to install and use AIF.</p>

<p>Right now I encourage people to try it out.  All known bugs are documented in the TODO file, there are probably more that I didn't discover yet.  But it should work pretty well.<br />

I'm very curious for input on the code/design level as well.</p>

<p>Hopefully the Arch guys can set me up with a bugtracker and make some sort of announcement to the community to try it out...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/handling_a_remote_rename_or_move_with_git/">Handling a remote rename/move with Git</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/handling_a_remote_rename_or_move_with_git/" rel="bookmark">
					<time class="entry-date" datetime="2008-11-17 11:29:36 -0400 -0400">
						November 17, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I recently had to rename a repo on my Github account.  Github has made this <a href="http://github.com/blog/128-let-there-be-renaming">very easy</a> but it's just one side of the issue.  Obviously you must also update any references to this remote in other clones, otherwise pushes, fetches etc won't work anymore.</p>

<p>You can do this in two ways:</p>

<ul>

<li>open .git/config and modify the url for the remote manually</li>

<li>git remote rm origin &amp;&amp; git remote add origin git@github.com:$user/$project.git</li>

</ul>

<p>That's it! All will work fine again.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/git/index.html" rel="tag">git</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/muse...wow/">Muse ... wow</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/muse...wow/" rel="bookmark">
					<time class="entry-date" datetime="2008-11-09 10:33:36 -0400 -0400">
						November 9, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Weird as it might sound, I've never bothered to listen to Muse songs.. until now.  Some people have recommended the band to me so I really had to stop ignoring this band someday.  And wow.. what have I been missing al that time :/<br />

Songs like <a href="http://www.youtube.com/watch?v=VTd6nyHuPdw">Butterflies and Hurricanes</a> and <a href="http://www.youtube.com/watch?v=W4R84e1HqvU">Citizen Erased</a> are among the most beautiful songs I've ever heard now.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/music/index.html" rel="tag">music</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/dautostart_a_standalone_freedesktop-compliant_application_starter/">dautostart, a standalone freedesktop-compliant application starter</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/dautostart_a_standalone_freedesktop-compliant_application_starter/" rel="bookmark">
					<time class="entry-date" datetime="2008-10-19 13:26:08 -0400 EDT">
						October 19, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I couldn't find a standalone application/script that implements <a href="http://standards.freedesktop.org/autostart-spec/autostart-spec-latest.html">freedesktop compliant (XDG based) autostarting</a> of applications, so I decided to write my own.<br />

The project is at <a href="http://github.com/Dieterbe/dautostart" title="http://github.com/Dieterbe/dautostart">http://github.com/Dieterbe/dautostart</a> .</p>

<p>Right now, all the basics seem to work (except "Autostart Of Applications After Mount" of the spec).<br />

It's probably not bugfree.  I hacked it together in a few hours (but it works for me :-).   Bugreports welcome!<br />

</p>

<p>Oh and btw: I got rid of Xfce too.  I realized that all I needed anyway is a good WM (for which I use compiz fusion), an application starter (I still haven't figured out if I prefer <a href="http://www.suckless.org/programs/dmenu.html">dmenu</a> or <a href="http://bbs.archlinux.org/viewtopic.php?id=56283">bashrun</a>, so I'm using both), a freedesktop-compliant autostarter and that's basically it.  Less is more!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/visual_feedback_of_the_exit_status_of_the_previous_command_in_bash/">Visual feedback of the exit status of the previous command in bash</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/visual_feedback_of_the_exit_status_of_the_previous_command_in_bash/" rel="bookmark">
					<time class="entry-date" datetime="2008-10-14 21:56:50 -0400 EDT">
						October 14, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Put this in your .bashrc, and the current directory in your PS1 will be printed green if the previous command had exit state 0, red otherwise.  No more typing 'echo $?', ' &amp;& echo ok', '|| echo failed' etc on the command line.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> <span style="color: #008000; font-weight: bold">$(</span>tput colors<span style="color: #008000; font-weight: bold">)</span> -gt <span style="color: #666666">0</span> <span style="color: #666666">]</span> ; <span style="color: #008000; font-weight: bold">then</span>

    <span style="color: #19177C">RED</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>tput setaf 1<span style="color: #008000; font-weight: bold">)</span>

    <span style="color: #19177C">GREEN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>tput setaf 2<span style="color: #008000; font-weight: bold">)</span>

    <span style="color: #19177C">RST</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>tput op<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #008000; font-weight: bold">fi</span>



bash_prompt_command<span style="color: #666666">()</span> <span style="color: #666666">{</span>

        <span style="color: #19177C">last_exit</span><span style="color: #666666">=</span><span style="color: #19177C">$?</span>

        <span style="color: #19177C">exit_to_color</span><span style="color: #666666">=</span><span style="color: #19177C">$RED</span>

        <span style="color: #666666">[</span> <span style="color: #19177C">$last_exit</span> <span style="color: #666666">==</span> <span style="color: #666666">0</span> <span style="color: #666666">]</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #19177C">exit_to_color</span><span style="color: #666666">=</span><span style="color: #19177C">$GREEN</span>

<span style="color: #666666">}</span>



<span style="color: #008000">export </span><span style="color: #19177C">PROMPT_COMMAND</span><span style="color: #666666">=</span>bash_prompt_command



<span style="color: #19177C">PS1</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;\u@\h \[\$exit_to_color\]\W\[</span><span style="color: #19177C">$RST</span><span style="color: #BA2121">\] \$&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>( Inspired by <a href="http://bbs.archlinux.org/viewtopic.php?pid=367626#p367626">this post</a> )</p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/im_done_with_gnome_and_gconf/">I&#39;m done with Gnome/Gconf</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/im_done_with_gnome_and_gconf/" rel="bookmark">
					<time class="entry-date" datetime="2008-09-29 22:01:41 -0400 EDT">
						September 29, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I'm managing my ~ in svn but using gnome &amp; gconf makes this rather hard.<br />

They mangle cache data together with user data and user preferences and spread that mix over several directories in your home  (.gconf, .gnome2 etc).<br />

The .gconf directory is the worst.  This is where many applications store all their stuff.   User preferences but also various %gconf.xml files, which seem to be updated automatically everytime 'something' happens:  They keep track of timestamps for various events such as when you press numlock or become available on pidgin.<br />

I'm fine with the fact they do that.  I'm sure it enables them to provide some additional functionality.  But they need to do it in clearly separated places (such as <a href="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html">xdg's</a> $XDG_CACHE_HOME directory)</p>

<p>While trying to apply version control to my $HOME I need to spend way too much time scripting various <i>svn reverts</i> of many of those changes (in .gnome2, .gconf/apps/*, and .gconf/desktop), and also updating many <i>svn:ignore</i> properties (although gnome/gconf are definitely not the only culprits for that.)</p>

<p>The Gnome guys make some nice stuff, that's for sure.  But what is crucially important to me seems to be a low-prio thing for them (and let's face it, many users don't care about this...).<br />

They do have a <a href="http://live.gnome.org/GnomeGoals/XDGConfigFolders">Gnome Goal</a> to adress this problem but it clearly states it's only a proposal at this time, so it can take a long time before everything gets cleaned up.  There are also some other <a href="http://brainstorm.ubuntu.com/idea/6557/">ubuntu</a> <a href="http://brainstorm.ubuntu.com/idea/1210">ideas</a>, <a href="https://blueprints.launchpad.net/ubuntu/+spec/correct-home-dir-clutter">Launchpad Blueprints</a> and <a href="http://ploum.frimouvy.org/?184-cleaning-user-preferences-keeping-user-data">blog posts</a> along these lines, so I guess there is some public interest in this.</p>

<p>I can only recommend them (and anyone else for that matter) to cleanly implement the xdg basedir spec.<br />

This means:</p>

<ul>

<li>putting a lot of thought in how and where you store your stuff, while complying to the XDG spec.</li>

<li>carefully implementing those specs &amp; guidelines</li>

<li>making really sure that whatever is in $XDG_DATA_HOME and $XDG_CONFIG_HOME is what the user expects.  Cleanly and transparantly.  Preferrably no bloat (xml) and no automatically changing config files without the user knowing. (Note that this is not clearly specified in the XDG spec.  this is my opinion.)  In $XDG_CACHE_HOME/*yourapp* you can make whatever mess you want ;-)</li>

<li>Use the <a href="http://lists.freedesktop.org/mailman/listinfo/xdg">XDG mailinglist</a>.  It can help you clear up things.</li>

</ul>

<p>I decided to go back to Xfce.<br />

Xfce is more basic then Gnome in terms of features, but being compliant with various freedesktop specs is at the top of their list.  I'm told they implement the <a href="<br />

http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html">xdg basedir spec</a> very cleanly, so I'm now back at Xfce 4.4.<br />

I see that they automatically update the files  ~/.config/Thunar/thunarrc and  ~/.config/xfce4/desktop/icons.screen0.rc with non-critical information (size of the windows/panels etc and desktop icons respectively).  Imho this belongs in $XDG_DATA_HOME dir, but then again it's not clearly specified and maybe they discussed it on the mailing list.<br />

In any case , it's looking <strong>much</strong> better then with Gnome.</p>

<p>On a related note:  I also dumped Ubuntu in favor of Arch Linux.  (I've been running Ubuntu for about a year. I used Arch on the laptop before)<br />

I was having some problems with my ubuntu setup...<br />

The network manager (I also tried wicd) could not get my networking working well in some cases (after changing to manual configuration and then rebooting several times it sometimes magically started working).<br />

Combine that with the fact that I just could not login (both in console and in gnome) if my networking wasn't entirely configured...<br />

Ubuntu is not a bad distro.  But they apply many patches on others code and hide as many system details behind fancy gui's and all kinds of daemons as they can.  It's a distro that you can get up and running fast (including things like bluetooth, laptop buttons etc) and if you're lucky, it actually works quite well.<br />

But once things start failing it's a hell to debug.<br />

Arch on the other hand is made for tweaking your system.  It exposes all guts of the system.  you need to setup and tweak everything yourself right from the start but at least it supports you with a framework to do so.<br />

(btw: pkgbuilds are quite similar to Gentoo's ebuilds)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/ddm_v04_released/">DDM v0.4 released</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/ddm_v04_released/" rel="bookmark">
					<time class="entry-date" datetime="2008-09-23 16:21:27 -0400 EDT">
						September 23, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>DDM v0.4 has been released.<br />

Since the last release many, many things have been changed/fixed/added.<br />

<br />

Here is the Changelog:</p>

<p><pre></p>

<p>4.0 (23-9-2008)</p>

<ul>
<li><p>new dataset types (dataset types are now: blob, buffer, cache, copy, direct, extension, selection)</p></li>

<li><p>new (default) actions (default actions are now: backup, checkout, commit, flush, restore, update)</p></li>

<li><p>actions and callbacks are addable/customizable/disableable etc</p></li>

<li><p>some actions for certain dataset types are now implemented that weren&rsquo;t before (see manual)</p></li>

<li><p>better choosen commandline switches. especially needed for specifying (custom) actions.</p></li>

<li><p>ddm follows XDG basedir spec now (<a href="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html" title="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html">http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html</a>).</p></li>
</ul>

<p>This affects the location of ddmrc and plugins (read on)</p>

<ul>
<li>datasets can have arbitrary names now. (so it&rsquo;s also fully compatible with the XDG usedir spec now <a href="http://freedesktop.org/wiki/Software/xdg-user-dirs" title="http://freedesktop.org/wiki/Software/xdg-user-dirs">http://freedesktop.org/wiki/Software/xdg-user-dirs</a> )</li>
</ul>

<p>In some cases you do need to make up for this by specifying one or two vars in the .ddm file. See manual.</p>

<ul>
<li><p>possibility to create plugins.</p></li>

<li><p>2 plugins come by default now:</p>

<ul>
<li><p>slidewindow (old function pluginized now)</p></li>

<li><p>get_exaile (supposed to populate selection with favorite/most-played/&hellip; music according to the exaile</p></li>
</ul></li>
</ul>

<p>music player database). this plugin is still <em>work in progress</em></p>

<ul>
<li><p>slidewindow is more flexible now (configurable subpaths, regex grepstring, &hellip;) <em>api has changed</em></p></li>

<li><p>pretend mode</p></li>

<li><p>validators for actions, repositories and datasets</p></li>

<li><p>new, better and more generic wrappers for rsync, svn, rm, cd, mkdir and &lsquo;keep&rsquo;</p></li>

<li><p>refactored exit codes</p></li>

<li><p>better validation, error handling, help information</p></li>

<li><p>better documentation (MANUAL, examples, &hellip;) comes with sources now + can be seen online @ <a href="http://github.com/Dieterbe/ddm" title="http://github.com/Dieterbe/ddm">http://github.com/Dieterbe/ddm</a>)</p></li>

<li><p>lots of changes and fixes big and small</p></li>
</ul>

<p></pre><p></p>

<p>The <a href="http://github.com/Dieterbe/ddm">ddm project on github</a> has now 2 branches:</p></p>

<ul>

<li><a href="http://github.com/Dieterbe/ddm/tree/master" title="http://github.com/Dieterbe/ddm/tree/master">http://github.com/Dieterbe/ddm/tree/master</a> (bleeding edge development will happen here)</li>

<li><a href="http://github.com/Dieterbe/ddm/tree/v0.4" title="http://github.com/Dieterbe/ddm/tree/v0.4">http://github.com/Dieterbe/ddm/tree/v0.4</a> (0.4 'stable' patches will be pushed here)</li>

</ul>

<p>It now also comes with a <a href="http://github.com/Dieterbe/ddm/tree/v0.4/MANUAL">Manual</a> and some <a href="http://github.com/Dieterbe/ddm/tree/v0.4/Examples.textile">examples</a>.</p>

<p>Have fun...</p>

<p>Oh and btw: It's probably not bug free (especially the slidewindow code)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/my_projects_are_on_github_now/">My projects are on github now</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/my_projects_are_on_github_now/" rel="bookmark">
					<time class="entry-date" datetime="2008-09-09 11:40:03 -0400 EDT">
						September 9, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I've put my (somewhat interesting) projects on <a href="http://github.com/">GitHub</a>.<br />

Git is a damn cool VCS for distributed development, and I think Github integrates with it really nicely, adding some useful aspects for following and collaborating on projects.<br />

The projects I have migrated to my <a href="https://github.com/Dieterbe">GitHub profile</a> are:</p>

<ul>

<li><a href="https://github.com/Dieterbe/ddm/tree">DDM</a>.  I've been doing quite some changes on this one lately, I hope to stabilize &amp; push soon.</li>

<li><a href="https://github.com/Dieterbe/tracks/tree">Tracks</a>.  This is an unofficial fork with my changes to the Tracks GTD tool. (mainly adding support for the GTD collecting and processing phases).  Still a work in progress.  Maybe someday it will be integrated.. we'll see.</li>

<li><a href="https://github.com/Dieterbe/phpdeliciousclient/tree">PHPDeliciousclient</a>.  This one I mainly added for convenience.  I don't really need to work on it anymore, but it could be useful for others...</li>

</ul>

<p>(I've also updated the "Projects" menu on this site)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/a_fast_way_to_get_stuff_out_of_your_head_and_into_your_gtd_inbox/">A fast way to get stuff out of your head and into your GTD inbox</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/a_fast_way_to_get_stuff_out_of_your_head_and_into_your_gtd_inbox/" rel="bookmark">
					<time class="entry-date" datetime="2008-08-13 20:42:51 -0400 EDT">
						August 13, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Often while you're occupied with something, some thought pops into your head.  Something that you want to remember/do something about.<br />

One of the key factors of a successful <a href="http://en.wikipedia.org/wiki/Getting_Things_Done">GTD</a> implementation is having the tools in place to get that stuff out of your head and into something you can trust, so you can continue your work with the smallest interruption possible.  Many GTD tools I've checked out focus on the 'action management' part of GTD, leaving out the collection and processing phases (<a href="http://www.thinkingrock.com.au/">Thinkingrock</a> is a notable exception here) and often some other things (reference system etc).</p>

<p>This is not necessarily a bad thing:  The whole GTD system is built around so many different actions and systems that some stuff can be divided into separate programs.  The only thing that matters is the global workflow, whether inside 1 program or across multiple.</p>

<p>If you use a program that does not implement the collection/processing phases, one thing thing you should <strong>not</strong> do, is skip them. You should not try to make out what an idea is, how to implement it, how to file it, which context/project/tag to assign etc on the moment it pops into your head, because it makes you loose your focus, distracts you and generally makes you less efficient.</p>

<p>I'm now trying out the <a href="http://www.rousette.org.uk/projects">Tracks</a> gtd program, which does not implement collection/processing.  The official explanation is that they try to make tracks customizable and flexible to allow you to use it the way you want, but I don't see how I could use it effectively for this.  </p>

<p>What I did is write a simple shell script, one that I trigger via a quick keyboard shortcut (ctrl+i), it pops up a Gtk input dialog box - using <a href="http://live.gnome.org/Zenity">zenity</a>, which i <a href="/gtk_dialogs_for_shell_scripts_with_zenity_and_the_ask-pass_gui_tools_for_ssh-add">blogged about earlier.</a>.  When you sumbit the form (by pressing enter) it just appends your text to a textfile.  That's it !<br />

If something goes wrong (and only then!) it will show a popup with <a href="http://www.galago-project.org">libnotify</a> so if you see nothing after submitting, you can be assured that it saved fine.<br />

  <i>Less is more.</i></p>

<p>When you are ready for processing mode (eg the 'weekly review' in gtd speak) you can then process entry by entry and enter stuff into your GTD program as necessary.</p>

<p>Dependencies:</p>

<ul>

<li>bash</li>

<li>zenity</li>

<li>notify-send (package libnotify-bin on ubuntu)</li>

</ul>

<p>Here is the file, save it as gtdinbox.sh</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>



<span style="color: #408080; font-style: italic"># A very simple script to implement the Collecting part of GTD.</span>

<span style="color: #408080; font-style: italic"># The only thing this script does is getting something out of head as quickly as possible, into a file you can trust</span>

<span style="color: #408080; font-style: italic"># See http://dieter.plaetinck.be/a_fast_way_to_get_stuff_out_of_your_head_and_into_your_gtd_inbox</span>



<span style="color: #19177C">program</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>basename <span style="color: #19177C">$0</span> .sh<span style="color: #BA2121">`</span>

<span style="color: #19177C">datadir</span><span style="color: #666666">=</span><span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">XDG_DATA_HOME</span><span style="color: #008000; font-weight: bold">:-</span><span style="color: #19177C">$HOME</span>/.local/share<span style="color: #BB6688; font-weight: bold">}</span>/<span style="color: #19177C">$program</span>

<span style="color: #19177C">inboxfile</span><span style="color: #666666">=</span><span style="color: #19177C">$datadir</span>/inbox.txt



die_error <span style="color: #666666">()</span>

<span style="color: #666666">{</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$1</span><span style="color: #BA2121">&quot;</span> &gt;&amp;2

        notify-send <span style="color: #BA2121">&#39;Gtd Inbox&#39;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$1</span><span style="color: #BA2121">&quot;</span> -i gtk-dialog-info -t <span style="color: #666666">5000</span> -u critical

        <span style="color: #008000">exit</span> <span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">2</span><span style="color: #008000; font-weight: bold">:-</span><span style="color: #19177C">2</span><span style="color: #BB6688; font-weight: bold">}</span>

<span style="color: #666666">}</span>



<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> ! -d <span style="color: #19177C">$datadir</span> <span style="color: #666666">]</span>

<span style="color: #008000; font-weight: bold">then</span>

        mkdir -p <span style="color: #19177C">$datadir</span> 2&gt; /dev/null <span style="color: #666666">&amp;&amp;</span> chmod <span style="color: #666666">700</span> <span style="color: #19177C">$datadir</span> 2&gt; /dev/null <span style="color: #666666">||</span> die_error <span style="color: #BA2121">&quot;Could not create/chmod </span><span style="color: #19177C">$datadir</span><span style="color: #BA2121">&quot;</span> 1

<span style="color: #008000; font-weight: bold">fi</span>



<span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">input</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>zenity --entry --title <span style="color: #BA2121">&quot;GTD Inbox&quot;</span> --text <span style="color: #BA2121">&quot;Enter text for gtd inbox&quot;`</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #666666">[</span> -n <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$input</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span>

<span style="color: #008000; font-weight: bold">then</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$input</span><span style="color: #BA2121">&quot;</span> &gt;&gt; <span style="color: #19177C">$inboxfile</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #666666">{</span>

                <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Entered </span><span style="color: #19177C">$input</span><span style="color: #BA2121"> into </span><span style="color: #19177C">$inboxfile</span><span style="color: #BA2121">&quot;</span>

                <span style="color: #008000">exit </span>0

        <span style="color: #666666">}</span>

        die_error <span style="color: #BA2121">&quot;Something failed while entering </span><span style="color: #19177C">$input</span><span style="color: #BA2121"> into </span><span style="color: #19177C">$inboxfile</span><span style="color: #BA2121">&quot;</span> 3

<span style="color: #008000; font-weight: bold">else</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Cancelled input into </span><span style="color: #19177C">$inboxfile</span><span style="color: #BA2121">&quot;</span>

<span style="color: #008000; font-weight: bold">fi</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/requirements_for_the_perfect_gtd_tool/">Requirements for the perfect GTD tool</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/requirements_for_the_perfect_gtd_tool/" rel="bookmark">
					<time class="entry-date" datetime="2008-08-09 16:04:45 -0400 EDT">
						August 9, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I've been reading <a href="http://en.wikipedia.org/wiki/Getting_Things_Done">GTD</a> lately and it's absolutely a great and inspiring book.<br />

Having made my home office space into a real <i>Zen</i> I want to start implementing GTD in my digital life but it seems very hard to find a good GTD tool that fully implements GTD. (even though there are a lot of tools out there)</p>

<p>The most interesting ones (each for different reasons) I've looked at so far are <a href="http://www.thinkingrock.com.au/index.php">Thinkingrock</a>, <a href="http://www.rousette.org.uk/projects/">tracks</a> and <a href="https://gna.org/projects/yagtd/">yagtd</a> (the latter requiring most work before it does everything I need, but it's also the most easy to dive into the code base). I'm keeping my eyes open because there are certainly more things to discover.</p>

<p>Even though there are probably no applications out there that can do everything I want, I just wanted to share my feature-wishlist.  These are the requirements I find that a really good tool should comply with:<br />

<br />

In order of importance (sort of):</p>

<ul>

<li><i>I want to have control over both my data and application.</i><br />

 At least half of the GTD apps out there are websites ran by an external party.  I want to run the application myself, I must have access to the source code, and I want to have my data myself.</li>

<li><i>Rapid idea collection and processing.</i><br />

  David Allen mentions the importance of this several times.  Sometimes you are doing something but come up with something else which you want to write down to continue your other stuff as quickly as you can.  Later on - in 'processing mode' - these notes must be handled one by one, and it must be easy to choose whether you want to create a new task from this note, throw it away, file/further edit as a note for something else and so on.  For some reason many GTD applications skip these very important collection and processing steps and assume their users will enter actions right away.  For now I've only seen Thingkingrock handling this nicely (or at all).  A workaround could be to use a notes-taking application such as tomboy as collection bucket, and process that every once in a while but then you'll need to copy-paste stuff from one application into another etc.  Doable but cumbersome and avoidable.</li>

<li><i>Context / project editors</i><br />

Context and projects are entities on their own. I don't want any of them disappearing/non-existing just because there are no actions that 'link to them' anymore/yet.  (which seems to be the case with yagtd).  Tracks handles this really nicely.</li>

<li><i>Advanced reference system.</i><br />

Notes/documentation (with documentation I don't mean physical files such as *.pdf or *.odt but just textual data) must be able to get filed and easily be retrieved by itself or by associated item.  A note should be able to be linked to an action or project but must also be able to stand on it's own through it's title and/or a tagging system.  Some notes can even be related to multiple projects/actions (from different projects).  In many cases I find it useful to link a project to one or more notes who are already general reference material or linked to something else.  So this goes <i>way</i> beyond the simple 'description' fields that most tools offer.  Support for holding not only text, but also hyperlinks, images, movie clips, would be a plus. (not the most important though)</li>

<li><i>File format</i><br />

An easily accessible file format is a plus for a variety of reasons.  Plaintext is the winner here (yagtd).  Tracks does not seem to support a plaintext backend but it does support an api/rss/.. and an export feature so that counts too.  ThinkingRock uses xml. (mixed feelings about that)

</li>

<li><i>action/project dependencies</i><br />

Some actions or projects can't be done at all as long as another project or action is not finished.  If you can specify this in your program, than the program can put the action/project in the 'waitingfor' section and move it  to 'next actions' when the dependencies are fulfilled. (after asking confirmation maybe)</li>

<li><i>Calendar integration</i><br />

A full featured calender does not belong in a GTD tool, ( because on a calender you also want to put non-actionable stuff like certain events, birthdays,...) but there does need to be support for exporting everything with a date on it (actions with due dates or that can only happen on specific moments each week/day/...) to a calendar.  Ical is probably the most common for this, but with an rss feed or rest api I can help myself too. (by converting it into ical or whatever)</li>

<li><i>project planning on the beforehand</i><br />

When planning a project you already know more action steps then just the next one for a project.  If you can specify these in a good way (e.g. not by abusing the project description field) the program can open the next action when you complete the current one.</li>

<li><i>Reminders</i><br />

I want to be informed automatically of stuff that *needs* to happen.  Gtk or libnotify popups are great, e-mail will do too.  Being able to respond to the notification to say 'inform me again at $foo' or 'i just did this, close the action!' are a plus.

</li>

<li><i>History</i><br />

When did I do this? What happened to item X at this date?  Questions that sometimes need an answer and it's frustrating if you don't have them.</li>

<li><i>GTD on the road</i><br />

I can use a paper notebook for collecting ideas and for quickly writing some reminders down before closing the laptop but having access to my GTD data on my phone would be really nice. (preferably by syncing the phone with my laptop to be not dependent on a network at all times) (I will be having an iphone soon)

</li>

<li><i>Integration with email</i><br />

How great would be to specify in your GTD tool 'this action is waiting for John Doe' and later, when you receive a mail from John Doe you can say 'this closes this action' ?  Or for each mail in your inbox you have some options to import the contents into your collection bucket, into a new task or into the filing system?  Practically how this could work is through an api like what tracks offers, or by dbus for desktop programs.

</li>

</ul>

<h3>About the book</h3>

<p>GTD has received a lot of hype, which made me sceptical at first but while reading the book it became clear the praise is deserved.<br />

Right from the beginning you start learning many things, and throughout the book the 'eureka' moments keep coming.  Even I who have been thinking quite a lot on how to organize my todo's, ideas and reference material am surprised by how much can be improved.  There are some points that are not new and are also mentioned in other time management books (such as 'getting a clear head') but the great part is that GTD is not only about action management, but also about project planning, personal organisation, how to manage those ideas/questions/reminders that you come up with randomly, office organisation and so on. I was afraid that some things I do/need would not be handled in the book but it's definitely not the case.  And everything is handled both in theory and in practice with a lot of thoughts, ideas and practical recommendations.  David's advice after more then 20 years of productivity consulting/training/research is something that no-one should miss.<br />

From a writers perspective: I find it also amazing how stuff that is so hard to explain is so well organized and explained in a easy to understand phrasing throughout the entire book.  Not that I know much about this field but it's clear that this part of the book also has gotten a lot of work.  In a few rare cases I found that some recommendations were not backed up enough but those were just details.</p>

<p>While reading the book (I haven't finished it yet btw) I spent several days cleaning up my room.  I started using a filing cabinet for my reference material (placed very accessibly!), organized supplies and equipment on my desk etc etc.  There is still some work to do but on the short term I want to have gotten rid of everything I don't need, and keep what I need in the places that make most sense for them, and in the end I want to know where everything is (so I never need to search) and there should be nothing where it doesn't belong...</p>

<p>My parents had to stop me from starting to clean up our entire attic...  This book definitely has changed me.  (those who know how I used to leave my stuff will understand ;-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/rethinking_the_backup_paradigm_a_higher-level_approach/">Rethinking the backup paradigm: a higher-level approach</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/rethinking_the_backup_paradigm_a_higher-level_approach/" rel="bookmark">
					<time class="entry-date" datetime="2008-07-21 20:21:51 -0400 EDT">
						July 21, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>In this post I explain my vision on the concepts of backups and how several common practices are in my opinion suboptimal and become unnecessary or at least can be done more easily by managing data on a higher level by employing other patterns such as versioning important directories and distributed data management.  </p>

<h3>The "classic" approaches</h3>

<p>There are many backup scripts/programs out there, each with their own - sometimes subtly and sometimes radically - different approach.<br />

One thing that all solutions have in common is that they choose one or more layers of the system stack to operate on.<br />

What I mean with this "system stack" is that a working to-be-backed-up system can be represented in 'layers' that form a stack, in this case specifically as far as the data on it is concerned.<br />

For a Linux system it looks a bit like this:</p>

<ol>

<li>storage hardware</li>

<li>block device</li>

<li>(LVM/dm-crypt)</li>

<li>filesystem</li>

<li>VFS</li>

<li>user/OS based concepts and patterns (home directories, dotfiles, document/workspace/music directories, ...)</li>

</ol>

<p>Most tools I've seen operate on layers 2, 4 (with optionally a little lvm help) and 5.</p>

<p><b><h7>Block device</h7></b></p>

<p>

Everyone knows dd.  It is the de-facto tool for block device backups. (usually combined with scp, gzip et all).<br />

There are also fancier tools out there that work similarly but can make differential backups.<br />

I would also like to mention <a href="http://www.partimage.org">partimage</a> here.  This tool makes dumps of partitions (block devices) but it only copies used blocks, and therefore it needs to have knowledge of the filesystem stored on the partition.<br />

Usually you run such backup methods by popping in a livecd and running a script.</p>

<p>This solution is good for when your entire hard disk has died: after restoring you have everything back: from the mbr (boot loader &amp; partition layout), dm-crypt/lvm setups, specific filesystem tweaks - although most users don't care about this - (reserved space settings, block size etc), to your entire system (installed packages, config files, home directories, ...) and all your personal data and settings.</p>

<p>But even with differential backups there are a few issues:</p>

<ul>

<li>you store lots of stuff that you actually don't need or could store more efficiently when operating on a higher layer (e.g. the raw bits and bytes of all installed binary programs vs a list of installed packages that could have been reinstalled with a clever script).</li>

<li>It becomes very hard to restore a select few files or directories, especially if you want to roll-back to different dates for different files/directories.</li>

<li>It takes a lot of time to do the backups, especially if you want to backup very frequently (e.g. daily).  If a backup script makes it hard to backup daily, then there is something wrong.</li>

</ul>

<p><b><h7>Filesystems</h7></b></p>

<p>

In this category fall the scripts/tools that do scp's, rsyncs or similar algorithms of the contents of an entire filesystem.<br />

You would usually execute this on a per-filesystem basis from either your live working environment or a liveCD.  The former is easier, the latter is safer against an inconsistent state of your filesystem.  You could do it live and use lvm snapshotting but even then you could have made a snapshot right when an application is in the middle of writing something...</p>

<p>The cool part of these sort of tools (and the one in the upcoming paragraph) compared to the previous type is that is more easy to expose the contents of your filesystem from 'inside the backup' (because it is usually just a directory with a copy of all your files), so it becomes more easy to restore specific files and directories if you would want that, although it is still not suited for roll-backs of specific files/directories to specific versions.<br />

Also, there is no strict control over what gets backed and what not.  If - for example - you decide to do a clean install of your distro (a restore of the same version or a fresh install of new version) then you probably want to copy your backed up home into the new one.  Actually merging is a better term here because you want to keep some of your personal settings, but:</p>

<ul>

<li>you also don't want to break stuff or miss new features (especially if that's how the new version of the distro works) by using old configs for newer packages.</li>

<li>there is usually some clutter in these files that you don't need anyway (temporary data such as caches, and volatile data such as what media players and IM clients like to write away).</li>

</ul>

<p>In this case ploughing through the pile of dotfiles and directories can be cumbersome.  (As far as upgrading is concerned it's not like Linux distributions help the user in this when following the 'upgrade wizard', so this manual ploughing and copying must be done anyway at some point.)<br />

There is a freedesktop standard - <a href="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html">the XDG basedir specification</a> - that improves the situation (the organisation part, not the upgrade part) but many projects don't have adopted it yet.  On the other hand you could keep a big rules list for rsync to control what goes in the backup and what not, but the list will get out of hand if you want to tightly control this.</p>

<p>More bad news is that from this layer and upwards you do not backup your MBR and filesystem settings (and whatever is in between: lvm, dm-crypt, ...).  So restoring a full system is a bit harder.  You could still do it of course by backing up the mbr separately and/or use scripts to parse fdisk/tune2fs but it gets complicated to reconstruct a dm-crypt/lvm setup.<br />

<!-- mondorescue.org operates on block device layer i think, they also talk about filesystems but they call ntfs a partition .. kan volledig systeem restoren, of het ook een filesystem kan exposen weet ik niet -->

</p>

<p><b><h7>VFS</h7></b></p>

<p>

These scripts are the ones that basically iterate over your entire VFS, check some ignore options and copy all the rest.  It's a very subtle difference with the previous category.  Especially because they are usually configured to only backup the filesystems stored on harddisks and ignore the 'virtual' stuff, so in practice the result is the same.<br />

That's also why the advantages and disadvantages are basically the same.</p>

<p>The <a href="http://blinkeye.ch/mediawiki/index.php/GNU/Linux_System_Backup_Script_(stage4)">mkstage4.sh script</a> is a well-known example in the Gentoo/Arch community.

</p>

<h3>Going one step further...</h3>

<p>Now... The way I see it, we should not focus on the goal of "making a backup of the entire system" because the result will be a mix of lots of different types of data all mangled together, not efficiently stored and not easily restorable in ways that make most sense for the specific types of data.  Also, all the "classic" approaches need to make compromises. (see advantages/disadvantages of aforementioned techniques). I'm thinking especially of the many different restore scenarios that a good backup strategy must be able to handle.</p>

<p>That's why we should work on the 6th layer: <i>the user/OS based concepts and patterns</i>.<br />

We should look at each type of data to find out what it really means to us, what we want to do with it, how to work with it and how we can store it in a way that makes most sense for each specific type of data.<br />

This gives 2 benefits:</p>

<ul>

<li>You can maximize the usefulness of your 'stuff': you can start doing things with your data that you couldn't do before: I'm thinking of versioning, making branches of stuff for specific hosts/users/... , having up-to-date subsets/copies of specific media, and so on.</li>

<li>As a <i>side-effect</i> you can also more easily create the redundancy you need to save yourself from disasters, with an easy way to restore the specific data you need.</li>

</ul>

<p><b><h7>Getting the most out of your data</h7></b></p>

<p>

I use 2 tools to help me with this</p>

<ul>

<li><a href="http://subversion.tigris.org/">svn</a></li>

<li><a href="/DDM_a_distributed_data_manager">ddm</a></li>

</ul>

<p><i>(If you don't know what <a href="/DDM_a_distributed_data_manager">ddm</a> is , have a look at the page so you get the basic concepts, especially the types of datasets)</i></p>

<p>Generally speaking, I have the following repositories on my home-server:</p>

<ul>

<li>svn: one for each of my bigger projects</li>

<li>svn: one for my collection of scripts and tools</li>

<li>svn: one for my home directories (common stuff in trunk, branches for different hosts with symlinks to common stuff where needed, svn externals to link to other repositories where needed, most ~/.* added directly)</li>

<li>svn: system-wide configuration for all my hosts: /etc, installed package lists, ... (i should put partition table/lvm/dm-crypt/filesystem settings in here too ...)</li>

<li>ddm: one for each type of media (audio, video, photo, documents, ...)</li>

</ul>

<p>To get the most out of these tools, a tightly organized, well-controlled home directory (system) is a must.<br />

This is something I actually plan to blog about in the near future.</p>

<p>Suffice it to say for now that half of the stuff that matters to me is in svn and can/should be reviewed &amp; committed daily.<br />

The other half is stored in ddm repositories, for which I usually have a selection/copy dataset and a buffer.  I just need to flush the buffers regularly and keep my ddm config in svn and I'm safe.</p>

<p>As far as <i>data</i> is concerned, I can do everything I need with svn and ddm.  The former for configs and most of my textfiles, the latter for media and other bigger binary files.  (I store all important ~/.* in svn except .mozilla stuff: these directories are big and messy and go into ddm for now)

</p>

<p><b><h7>Handling the remaining stuff</h7></b></p>

<p>

But of course, data is not the only thing of importance on your system.  Some things are not just files or directories on the system but other properties that must be backed up.  We must be able to reconstruct them, so we need to be able to 'capture' and save their essence.  I'm thinking of the bootloader, the partition table layout, the lvm/dm-crypt setup and filesystem settings (which filesystem on which partition, which block size, reserved space, ...)  Note that this is one the issues that also the filesystem/VFS backup methods suffer from.</p>

<p>For now I don't back this up myself, but I should.  I think the best way to do it is to write scripts that parse output of tools such as fdisk, lvdisplay, tune2fs, ... and store the results in svn.  Restoring this? .. read on!

</p>

<p><b><h7>Putting it all together..</h7></b></p>

<p>

Okay, so now we have some ideas how to organize our <i>data</i> to maximize their usefulness and we can perfectly restore it the way we want thanks to ddm and svn.  But there are 2 issues remaining:</p>

<ul>

<li>How do we (easily) restore <i>properties</i> such as the partition table, dm-crypt setup, specific filesystem settings?</li>

<li>How do we put everything back together to get a working system in the event we need a <i>full system restore</i>?</li>

</ul>

<p>To solve this problem, we need several things:</p>

<ul>

<li>overview meta data for your each entire system. A file that describes how your system looks like, which svn repositories must be checked out where, and what kind of ddm datasets you want for your ddm repositories and where. This file must be easily updateable.</li>

<li>A tool that can reconstruct your entire system according to the just described meta data.</li>

<li>A tool that can setup the lowest layers of your system (partition table, bootloader, dm-crypt/lvm setup, filesystems) just the way <i>you</i> want it.</li>

</ul>

<p>This is all stuff that I haven't implemented myself yet and I'm still thinking about.  For the first item we could work a text files and a few scripts, or not entirely re-invent the wheel and (ab)use svn for this.  Let / be the working copy, svn:ignore most of the system and use svn:externals to reconstruct your working copy needs (basically /home and /etc) , and put the ddm dataset directories in place (without the files that ddm manages of course), then it's just a matter of 'ddm up' in the ddm datasets and we're done.  If anyone has ideas for this let me know :)</p>

<p>For the other stuff we could use scripts that do a complete automatic installation with some scripts.<br />

From work, I have some experience with <a href="http://www.informatik.uni-koeln.de/fai/">fai</a>, but I'm not sure it can do all the stuff we discussed.  But there are certainly lots more similar tools that should be able to do the job.<br />

This may seem overkill for single, unique systems but imho it is the only good way to enjoy all the advantages previously described while also being able to completely construct a fully working and perfectly setup system.  It would definitely be advantageous to be able to use the same tools when doing a 'clean system upgrade' also!</p>

<p>So the end result of my backup strategy: my laptop, home workstation and home fileserver all use ddm and svn to manage everything of importance.  I just need to do so some svn commits and ddm buffer flushes.  To be really sure I then just have to make backups of the ddm and svn repositories on the fileserver and I'm done.<br />

There are some small issues remaining, stuff that needs to be thought of, but this is stuff that can be fixed, unlike the classic methods who are limited by design.

</p>

<p>Any questions or remarks?  Let me know!</p>

<p><!--<br />

* off-site stuff zoals website hosted on hosting accounts : code => eigen svn systeem, database moet je backups van hebben, kan met scripts bvb voor elk offsite ding doe script<br />

* full disk restore is wel nice maar heb je da echt nodig als install van vers os zo vlot kan?<br />

* vgl src code - binaries<br />

* key data zoals mysql db?  ook 'gewoon backuppen' naast ddm en svn<br />

* Mind you that all of this is from the standpoint of a desktop user.  But for other systems - like servers - i believe in a similar approach<br />

--></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/dump_your_azerty_and_querty_because_the_only_keyboard_layout_that_makes_sense_is_dvorak/">Dump your azerty and querty because the only keyboard layout that makes sense is Dvorak!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/dump_your_azerty_and_querty_because_the_only_keyboard_layout_that_makes_sense_is_dvorak/" rel="bookmark">
					<time class="entry-date" datetime="2008-06-15 21:20:00 -0400 EDT">
						June 15, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>For a while now I am typing using solely the Dvorak keyboard layout.  I roughly estimate it has been 4 or 5 months now - with the first month being a pain in the ass because i had to relearn typing pretty much from scratch - but now my typing speed is starting to exceed what it used to be in querty, and I still have much headroom to improve.</p>

<p>For those who have no clue what I'm talking about: think for 30 seconds which characters you type the most and which the least (eg: which characters occur the most/least in the language you type?).</p>

<p>Ok you got them?  Now look at your keyboard and spot where these characters are.  Now consider where your fingers are most of the time (if you've never learned to type: the 'base position' for your fingers is on the middle row).  Notice anything strange?</p>

<p>Now how take a look at this picture:<br />

<img src="/files/blog/netlog/22103670_7137111_15223282.jpg" /><br />

Definitely quite unconventional, but doesn't it make sense?</p>

<p>Dvoraks benefits are both technical (faster typing speed) and physical (less strain on your fingers, less chance for injuries such as <a href="http://en.wikipedia.org/wiki/Repetitive_strain_injury">rsi</a>)<br />

If you would like more information, I highly recommend <a href="http://dvzine.org">dvzine.org</a>.  They have a <a href="http://dvzine.org/zine/01-toc.html">web comic</a> that tells you all you want to know and helps you start using Dvorak</p>

<p>Sure, learning a new keyboard layout is not easy.  The first weeks are a pain.  And it takes a few months to get back up to speed.  But I'm 23 years old and I hope I will be typing for about 50 more years.  Considering that I find it well worth switching!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/announcing_the_netlog_developer_pages/">Announcing the Netlog Developer Pages</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/announcing_the_netlog_developer_pages/" rel="bookmark">
					<time class="entry-date" datetime="2008-05-24 12:39:28 -0400 EDT">
						May 24, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>At work, we've setup the <a href="http://netlog.com/go/developer">Netlog Developer Pages</a></p>

<p>It is the place where you can/will find all information around our OpenSocial implementation, our own API, skin development, sample code and so on.<br />

We've also launched a <a href="http://en.netlog.com/go/developer/group">group</a> where you can communicate with fellow developers and Netlog employees.<br />

The page also features a <a href="http://en.netlog.com/go/developer/blog">blog</a> where you can follow what is going on in the Netlog Tech team.</p>

<p>PS: We've also updated our <a href="http://en.netlog.com/go/inside/view=jobs">jobs page</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/netlog/index.html" rel="tag">netlog</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/windows_sucks/">Windows sucks</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/windows_sucks/" rel="bookmark">
					<time class="entry-date" datetime="2008-05-01 14:22:17 -0400 EDT">
						May 1, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I had to fix a problem at <a href="http://www.plaetinck.be">my dad's company</a>...<br />

"The network was broken."</p>

<p>It was a NetBEUI network connecting some windows stations - it has been running for years - and now suddenly the nodes couldn't find eachother.<br />

One of the boxes (windows 2000 iirc) had 2 network cards, one for the network, the other not used for anything (not even connected).  Disabling the latter - not even touching the former - fixed half of the network.</p>

<p>There was another box that couldn't find any other node in the network.  This happened to be a box of which the ps/2 mouse broke.  It had a usb mouse connected but since it was windows 95 it was not supported.  I removed the usb mouse and attached another ps/2 mouse.  This fixed not only the mouse but also the box could suddenly find the other boxes again....</p>

<p>Windows really does suck.</p>

<p>And the worst part is: even though all is fine now, I have no clue for how long it will work, and what will be the cause the next time it will be broken?</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/i_survived_lcl_31_3_2008/">I survived LCL 31-3-2008</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/i_survived_lcl_31_3_2008/" rel="bookmark">
					<time class="entry-date" datetime="2008-04-19 12:10:11 -0400 EDT">
						April 19, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>On 31-3-2008 <a href="http://www.lcl.be">LCL</a>, one of the most used datacenters in Belgium - and the only one with a 0% downtime record in Belgium - had major power issues with their datacenter in Diegem, bringing lots of Belgian parties offline.  (more specifics <a href="http://www.google.be/search?q=lcl+diegem+power+failure">on the net</a>).</p>

<p>If you're one of the sysadmins of a website with 35M members and 150M hits per day this means you're in for an exciting night ...</p>

<p>Long story short: LCL couldn't bring the power back up fast enough so we rented our own generator.  After rushing to Brussels we ( The Netlog ITS-team) could sit in the offices upstairs.  But after a while they had to close it down but we could stay in a room nearby (without furniture).   After that we went to Steven's appartment in Machelen.  We worked about 30 hours in a row, getting our sites back up and running (mostly fixing corrupted databases).  Our friends from the devteam also did some great achievements the next day, by using the redundancy of denormalized database layouts they could restore nearly all missing content that had vanished because of table repairs.</p>

<p>Here is some footage:</p>

<h3>Netlog homepage</h3>

<p><img src='/files/blog/netlog/23296980.jpg'><br />

<a href="/files/blog/flickr/2378844832_7163d9b28b_o.png">hi-res version</a></p>

<h3>At LCL</h3>

<p><img src='/files/blog/netlog/22103670_10474680_23396287.jpg'><br />

Toon &amp; Nicolas</p>

<p><img src='/files/blog/netlog/22103670_3331347_23396512.jpg'><br />

Kenny</p>

<p><img src='/files/blog/netlog/22103670_7040556_23396414.jpg'><br />

Steven - Jakob - Lorenz</p>

<p><img src='/files/blog/netlog/22103670_15039122_24732436.jpg'><br />

Jakob - Steven - me - Kenny</p>

<h3>At Steven's appartment</h3>

<p>No pics made here, just a silly video ;)</p>

<p><object width="425" height="355"><br />

<param name="movie" value="http://www.youtube.com/v/pnsCiypcBPk&amp;hl=en"></param>

<param name="wmode" value="transparent"></param><embed src="http://www.youtube.com/v/pnsCiypcBPk&amp;hl=en" type="application/x-shockwave-flash" wmode="transparent" width="425" height="355"></embed></object></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/netlog/index.html" rel="tag">netlog</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/ddm_a_distributed_data_manager/">DDM : a Distributed Data Manager</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/ddm_a_distributed_data_manager/" rel="bookmark">
					<time class="entry-date" datetime="2008-03-29 20:28:16 -0400 EDT">
						March 29, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><b>UPDATE: this information is outdated.  See <a href="http://github.com/Dieterbe/ddm/tree/master" title="http://github.com/Dieterbe/ddm/tree/master">http://github.com/Dieterbe/ddm/tree/master</a> for latest information.</b></p>

<h3>Introduction</h3>

<p>If you have multiple sets of data (e.g.: music, images, documents, movies, ...) and you use these on more then one system ( e.g. a laptop and a file server) then you probably also have some 'rules' on how you use these on your systems.  For example after capturing new images you maybe put them on your laptop first but you like to sync them to your file server frequently.  On the other hand you also want all your high-res images (stored on the server) available for editing on the laptop, and to make it more complicated you might have the same images in a smaller format on your server (for gallery programs etc.) and want these (or a select few albums of them) available on the road. </p>

<p>The more different types of data you have and the more you have specific work flows the harder it becomes to keep your data as up to date as possible and consistent on your boxes.  You could manually rsync/(s)cp your data but you end up in having a mess (at least that's how it turned out on my boxes). Putting everything under version control is great for text files and such, but it's not an option for bigger (binary) files.</p>

<p>I wanted to keep all my stuff neatly organised in my home directories and I want to create good work flows with as minimum hassle as possible, so I decided to write DDM: the Distributed Data Manager.</p>

<h3>Disclaimer</h3>

<p>The code is far from finished.  Some features are still missing and there will be bugs in it.  I'm even still thinking about the concepts themselves.   Don't blame me if ddm deletes the wrong files or causes your computer to blow up.</p>

<h3>Concepts</h3>

<p>DDM is a bash script that manages your data, distributed over multiple (*nix) systems.  You tell it how you want to work with your data and ddm will do the copying, deleting, syncing, committing, updating, ... for you.<br />

It uses simple things like cp, rsync and svn for this.<br />

Configuration is done through simple text files that will be sourced.</p>

<p>Ddm works with repositories: these are data stores on your server which should never be edited by hand.  A repository can be a svn repository or something as simple as a directory shared over the network ( through NFS, SMB, ... )</p>

<p>I highly recommend <a href="http://wiki.autofs.net/">autoFS</a> as auto mounter.  It is very easy, yet powerful and flexible.</p>

<h4>Vocabulary</h4>

<ul>

<li>repotype: the type of your repo.  currently this is either 'svn' (subversion) or 'vfs' ( any position in your VFS, the underlying technology is up to you. although autofs+nfs will be most useful)</li>

<li>dataset name: The name of your dataset. e.g. 'movies'</li>

<li>dataset type (see below)</li>

<li>action: commit, update, checkout</li>

</ul>

<h4>Dataset types</h4>

<ul>

<li>selection: a copy of a subset of the data in the repo (e.g. your favourite movies of all your movies)</li>

<li>buffer: temporary storage to be flushed to the repo regularly (e.g. new images or stuff you just downloaded)</li>

<li>copy: (default): a copy of all content in the repo (an svn working copy or a directory using rsync)</li>

<li>extension: contains unique content that you don't want on your server (e.g. temporary files)</li>

<li>direct: a (symlink to a) local mount point for a remote location. useful for big collections</li>

</ul>

<p>So basically you tell ddm to perform an action on a dataset of a specific type.<br />

Note that some actions wouldn't make sense for some dataset types ( e.g. commit on a selection or extension) and thus don't need to be implemented, while others perform really basic operations (an update of a vfs copy is just an rsync) or just wrap around something else (notably the svn actions just wrap around the svn tool)<br />

Keep in mind though that everything can be overridden through .ddm files in dataset directories.</p>

<h4>Configuration</h4>

<p>Ddm is configured through:</p>

<ul>

<li>a .ddm file in your home directory. (needed)</li>

<li>a .ddm file in your dataset directories (optional)</li>

<li>the directory name of your dataset (read on) (optional)</li>

</ul>

<p>To specify the dataset type, the easiest way is to add suffixes to your directories. eg video-selection.  This is not a must and can be specified in the .ddm file in the dataset directory. For the 'copy' dataset type you don't need to specify anything (it's default)<br />

Unless overridden, ddm will construct the repo path as follows:  </p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">$TYPE_BASE</span>/<span style="color: #19177C">$TYPE_PREFIX$DATASET_NAME$TYPE_SUFFIX</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>(if unclear, read on)</p></p>

<p>In the .ddm file in your dataset directory you can override defaults.</p>

<h5>~/.ddm</h5>

<p>This is how my file looks like.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">ALLOWED_REPO_TYPES</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;svn vfs&#39;</span>

<span style="color: #19177C">DEFAULT_REPO_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;vfs&#39;</span>



<span style="color: #19177C">SVN_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;https://server/svn/repos/&#39;</span>

<span style="color: #19177C">SVN_PREFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;ddm-&#39;</span>

<span style="color: #19177C">VFS_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;/net/server/home/dieter/ddm-repo&#39;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>These are all the options you can specify:</p></p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">SVN_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">SVN_PREFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">SVN_SUFFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">VFS_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>  

<span style="color: #19177C">VFS_PREFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">VFS_SUFFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>



<span style="color: #19177C">DEFAULT_REPO_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;vfs&#39;</span>

<span style="color: #19177C">ALLOWED_REPO_TYPES</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;vfs&#39;</span>

<span style="color: #19177C">IGNORE_DATASET_REMOTE_SVN</span><span style="color: #666666">=0</span> <span style="color: #408080; font-style: italic">#nag if the repo url figured out is not the same as the one in &#39;svn info&#39;. you should leave this 0</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<h5>dataset/.ddm</h5></p>

<p>For an example see below.  Possible options are these:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">DATASET_LOCAL</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#path to dataset locally (including type suffix if any)</span>

<span style="color: #19177C">DATASET_REMOTE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#path to dataset remotely (or locally if network mount)</span>

<span style="color: #19177C">DATASET_PATH</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#just the path (until parent directory of dataset)</span>

<span style="color: #19177C">DATASET_DIR_NAME</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#like $DATASET_LOCAL but no path </span>

DATASET_DIR_NAME_REL  <span style="color: #408080; font-style: italic"># identifier to dataset, taken against pwd ( could be &#39;.&#39;,&#39;..&#39;, nothing at all, dirname, full path, ..)</span>

<span style="color: #19177C">DATASET_NAME</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#like $DATASET_DIR_NAME but no type suffix</span>

<span style="color: #19177C">DATASET_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">REPO_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>



<span style="color: #408080; font-style: italic">#you can override the following callbacks (example see below)</span>

precheckout

docheckout

postcheckout



precommit

docommit

postcommit



preupdate

doupdate

postupdate

<span style="color: #666666">]]</span>&gt;
</pre></div>
<h4>Invocation</h4></p>

<p><pre>&lt;![CDATA[</p>

<p>dieter@dieter-mbp:~$ ddm -h</p>

<p>usage: ddm options</p>

<p>OPTIONS:</p>

<p>-d                Dataset (name of directory)</p>

<p>-h                Show this message</p>

<p>-m                Message (used for commits in svn, ignored otherwise)</p>

<p>-u                Update</p>

<p>-c                Commit</p>

<p>-o                Checkout (default repo type)</p>

<p>-O <repo-type>    Checkout using specific repo type (one of: svn vfs)</p>

<p>-t <dataset-type> Specify dataset-type (selection,copy, &hellip;) (only honoured for checkouts)</p>

<p>-v                Verbose</p>

<p>]]&gt;</pre><h4>Examples</h4></p>

<h5>Update my video-selection.</h5>

<p>The directory is ~/video-selection.  It contains episodes that I'm watching<br />

The .ddm file looks like this</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

doupdate<span style="color: #666666">()</span>

<span style="color: #666666">{</span>

	slidewindow mplayer <span style="color: #666666">10</span> 1

<span style="color: #666666">}</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>This means that ddm will look in my bash history and look for the movie files in this directory I have played (using &ldquo;mplayer video-selection/<em>somefile</em>).<br /></p>

<p>It will then delete all the ones I&rsquo;ve already seen, except the latest one (parameter 3). It will also fetch the next 10 episodes (parameter 2)</p></p>

<p><pre>&lt;![CDATA[</p>

<p>dieter@dieter-mbp:~$ ddm -u -v -d video-selection/</p>

<p>Included /home/dieter/video-selection/.ddm</p>

<p>action update on dataset name video type selection</p>

<p>Deleting old files&hellip; (3 items).</p>

<ul>
<li><p>/home/dieter/video-selection/910 - The One With Christmas In Tulsa.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/911 - The One Where Rachel Goes Back To Work.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/912 - The One With Phoebes Rats.avi&hellip; success</p></li>
</ul>

<p>Keeping these files&hellip; (1 items).</p>

<ul>
<li>/home/dieter/video-selection/913 - The One Where Monica Sings.avi</li>
</ul>

<p>Copying new files&hellip; (10 items).</p>

<ul>
<li><p>/home/dieter/video-selection/914 - The One With The Blind Dates.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/915 - The One With the Mugging.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/916 - The One With The Boob Job.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/917 - The One With The Memorial Service.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/918 - The One With The Lottery.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/919 - The One With Rachels Dream.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/920 - The One With The Soap Opera Party.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/921 - The One With The Fertility Test.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/922 - The One With The Donor.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/923 - 924 - The One In Barbados.avi&hellip; success</p></li>
</ul>

<p>finished</p>

<p>]]&gt;</pre><h4>Download</h4></p>

<p>The code is licensed under <a href="http://www.gnu.org/licenses/gpl-3.0.txt">Gpl v3</a><br />

You can dowload it <a href="/files/ddm" onClick="javascript:urchinTracker ('/files/ddm');">here</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/tweaking_lighttpd_stat_performance_with_fcgi-stat-accel/">Tweaking Lighttpd stat() performance with fcgi-stat-accel</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/tweaking_lighttpd_stat_performance_with_fcgi-stat-accel/" rel="bookmark">
					<time class="entry-date" datetime="2008-03-03 21:12:42 -0400 -0400">
						March 3, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>If you serve lots of (small) files with Lighttpd you might notice you're not getting the throughput you would expect.  Other factors (such as latencies because of the random read patterns ) aside, a real show stopper is the stat() system call, which is a blocking system call ( no parallelism ).  Some clever guys thought of a way to solve this : a fastcgi program that does a stat(), so when it returns Lighty doesn't have to wait because the stat information will be in the Linux cache.  And in the meanwhile your Lighty thread can do other stuff.  

<br/>

(in Lighty 1.5 there will be a native way for asynchronous stat() calls but for 1.4 this hack works pretty damn well)</p>

<p>This is explained on the <a href="http://trac.lighttpd.net/trac/wiki/HowtoSpeedUpStatWithFastcgi"> HowtoSpeedUpStatWithFastcgi</a> page on the <a href="http://trac.lighttpd.net/trac/"> Lighty wiki</a>.</p>

<p>Now, for <a href="http://www.netlog.com">Netlog</a> we needed to add some http headers ( Cache-Control: max-age, ETag, Expires and Last-Modified ) so we patched up the code a bit to do that, and a bit of other stuff.</p>

<p>Ofcourse this is documented on <a href="http://trac.lighttpd.net/trac/wiki/FcgiStatAccelWithMoreHttpHeaders">the FcgiStatAccelWithMoreHttpHeaders page on the Lighty wiki</a></p>

<p>Have fun !</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&lt;!</span>[CDATA[

<span style="color: #408080; font-style: italic">/*</span>

<span style="color: #408080; font-style: italic">  Originally written by Fobax.</span>

<span style="color: #408080; font-style: italic">  Edited by darix to support controlling thread count at runtime. </span>

<span style="color: #408080; font-style: italic">  Edited by poison and Dieter_be to support some http headers derived from the files.</span>



<span style="color: #408080; font-style: italic">  Please do not remove any of the above.</span>

<span style="color: #408080; font-style: italic">  </span>

<span style="color: #408080; font-style: italic">  compile with: </span>



<span style="color: #408080; font-style: italic">  $ gcc -lfcgi -lpthread fcgi-stat-accel.c -o fcgi-stat-accel</span>



<span style="color: #408080; font-style: italic">  fcgi-stat-accel will use the PHP_FCGI_CHILDREN environment variable to set the thread count.</span>



<span style="color: #408080; font-style: italic">  The default value, if spawned from lighttpd, is 20.</span>

<span style="color: #408080; font-style: italic">*/</span>



<span style="color: #BC7A00">#include &quot;fcgi_config.h&quot;</span>



<span style="color: #BC7A00">#include &lt;pthread.h&gt;</span>

<span style="color: #BC7A00">#include &lt;sys/types.h&gt;</span>

<span style="color: #BC7A00">#include &lt;unistd.h&gt;   </span>

<span style="color: #BC7A00">#include &quot;fcgiapp.h&quot;  </span>

<span style="color: #BC7A00">#include &lt;string.h&gt;   </span>

<span style="color: #BC7A00">#include &lt;sys/types.h&gt;</span>

<span style="color: #BC7A00">#include &lt;sys/stat.h&gt; </span>



<span style="color: #BC7A00">#include &lt;stdlib.h&gt;</span>

<span style="color: #BC7A00">#include &lt;stdio.h&gt; </span>



<span style="color: #BC7A00">#include &quot;etag.h&quot;</span>

<span style="color: #BC7A00">#include &quot;buffer.h&quot;</span>





<span style="color: #BC7A00">#define THREAD_COUNT 20</span>





<span style="color: #BC7A00">#define FORBIDDEN(stream) \</span>

        FCGX_FPrintF(stream, <span style="color: #BA2121">&quot;Status: 403 Forbidden</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">Content-Type: text/html</span><span style="color: #BB6622; font-weight: bold">\r\n\r\n</span><span style="color: #BA2121">&lt;h1&gt;403 Forbidden&lt;/h1&gt;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>);

<span style="color: #BC7A00">#define NOTFOUND(stream, filename) \</span>

        FCGX_FPrintF(stream, <span style="color: #BA2121">&quot;Status: 404 Not Found</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">Content-Type: text/html</span><span style="color: #BB6622; font-weight: bold">\r\n\r\n</span><span style="color: #BA2121">&lt;h1&gt;404 Not Found&lt;/h1&gt;</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">%s&quot;</span>, filename);

<span style="color: #BC7A00">#define SENDFILE(stream, filename, headers) \</span>

        FCGX_FPrintF(stream, <span style="color: #BA2121">&quot;%sX-LIGHTTPD-send-file: %s</span><span style="color: #BB6622; font-weight: bold">\r\n\r\n</span><span style="color: #BA2121">&quot;</span>, headers, filename);



<span style="color: #BC7A00">#define EXPIRATION_TIME (int) 60*60*24*30</span>





<span style="color: #B00040">int</span> <span style="color: #0000FF">genheaders</span> (<span style="color: #B00040">char</span><span style="color: #666666">*</span> mybuffer, <span style="color: #B00040">size_t</span> bufferlen, <span style="color: #008000; font-weight: bold">const</span> <span style="color: #B00040">char</span><span style="color: #666666">*</span> file)

{

        <span style="color: #B00040">char</span> timebuf[<span style="color: #666666">32</span>]; <span style="color: #408080; font-style: italic">//possibly unsafe   </span>

        <span style="color: #B00040">char</span> lastmodbuf[<span style="color: #666666">32</span>]; <span style="color: #408080; font-style: italic">//possibly unsafe</span>

        <span style="color: #B00040">char</span> etag[<span style="color: #666666">128</span>]; <span style="color: #408080; font-style: italic">//possibly unsafe</span>

        <span style="color: #008000; font-weight: bold">struct</span> stat statbuf;

        <span style="color: #B00040">time_t</span> exp;

        <span style="color: #B00040">time_t</span> lastmod;  

        buffer <span style="color: #666666">*</span>etag_raw;

        buffer <span style="color: #666666">*</span>etag_ok ;

 

        <span style="color: #408080; font-style: italic">//create buffers for Etag</span>

        etag_raw <span style="color: #666666">=</span> buffer_init();

        etag_ok <span style="color: #666666">=</span> buffer_init();

                

        <span style="color: #408080; font-style: italic">// Stat the file</span>

        <span style="color: #008000; font-weight: bold">if</span> (stat (file, <span style="color: #666666">&amp;</span>statbuf) <span style="color: #666666">!=</span> <span style="color: #666666">0</span>)

        {

                <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">-1</span>;

        }



        <span style="color: #408080; font-style: italic">// Clear the buffer</span>

        memset (mybuffer, <span style="color: #666666">0</span>, bufferlen);



        <span style="color: #408080; font-style: italic">// Get the local time</span>

        exp <span style="color: #666666">=</span> time (<span style="color: #008000">NULL</span>) <span style="color: #666666">+</span> EXPIRATION_TIME;

        lastmod <span style="color: #666666">=</span> statbuf.st_mtime;



        strftime (timebuf, (<span style="color: #008000; font-weight: bold">sizeof</span> (timebuf) <span style="color: #666666">/</span> <span style="color: #008000; font-weight: bold">sizeof</span> (<span style="color: #B00040">char</span>)) <span style="color: #666666">-</span> <span style="color: #666666">1</span>, <span style="color: #BA2121">&quot;%a, %d %b %Y %H:%M:%S GMT&quot;</span>, gmtime (<span style="color: #666666">&amp;</span>(exp)));

        strftime (lastmodbuf, (<span style="color: #008000; font-weight: bold">sizeof</span> (lastmodbuf) <span style="color: #666666">/</span> <span style="color: #008000; font-weight: bold">sizeof</span> (<span style="color: #B00040">char</span>)) <span style="color: #666666">-</span> <span style="color: #666666">1</span>, <span style="color: #BA2121">&quot;%a, %d %b %Y %H:%M:%S GMT&quot;</span>, gmtime (<span style="color: #666666">&amp;</span>(lastmod)));



        etag_create(etag_raw, <span style="color: #666666">&amp;</span>statbuf, ETAG_USE_SIZE);

        etag_mutate(etag_ok, etag_raw);



        buffer_free(etag_raw);



        snprintf (mybuffer, bufferlen, <span style="color: #BA2121">&quot;Cache-Control: max-age=%d</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">ETag: \%s</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">Expires: %s</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">Last-Modified: %s</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">&quot;</span>, EXPIRATION_TIME, etag_ok<span style="color: #666666">-&gt;</span>ptr, timebuf , lastmodbuf);



        buffer_free(etag_ok);



        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;

}

 

<span style="color: #008000; font-weight: bold">static</span> <span style="color: #B00040">void</span> <span style="color: #666666">*</span><span style="color: #0000FF">doit</span>(<span style="color: #B00040">void</span> <span style="color: #666666">*</span>a){

        FCGX_Request request;

        <span style="color: #B00040">int</span> rc;

        <span style="color: #B00040">char</span> <span style="color: #666666">*</span>filename;

        <span style="color: #B00040">char</span> extraheaders[<span style="color: #666666">192</span>];

        <span style="color: #B00040">int</span> r;



        FCGX_InitRequest(<span style="color: #666666">&amp;</span>request, <span style="color: #666666">0</span>, FCGI_FAIL_ACCEPT_ON_INTR);



        <span style="color: #008000; font-weight: bold">while</span>(<span style="color: #666666">1</span>){

                <span style="color: #408080; font-style: italic">//Some platforms require accept() serialization, some don&#39;t. The documentation claims it to be thread safe</span>

<span style="color: #408080; font-style: italic">//              static pthread_mutex_t accept_mutex = PTHREAD_MUTEX_INITIALIZER;</span>

<span style="color: #408080; font-style: italic">//              pthread_mutex_lock(&amp;accept_mutex);</span>

                rc <span style="color: #666666">=</span> FCGX_Accept_r(<span style="color: #666666">&amp;</span>request);

<span style="color: #408080; font-style: italic">//              pthread_mutex_unlock(&amp;accept_mutex);</span>



                <span style="color: #008000; font-weight: bold">if</span>(rc <span style="color: #666666">&lt;</span> <span style="color: #666666">0</span>)

                        <span style="color: #008000; font-weight: bold">break</span>;



        <span style="color: #408080; font-style: italic">//get the filename</span>

                <span style="color: #008000; font-weight: bold">if</span>((filename <span style="color: #666666">=</span> FCGX_GetParam(<span style="color: #BA2121">&quot;SCRIPT_FILENAME&quot;</span>, request.envp)) <span style="color: #666666">==</span> <span style="color: #008000">NULL</span>){

                        FORBIDDEN(request.out);

        <span style="color: #408080; font-style: italic">//don&#39;t try to open directories</span>

                }<span style="color: #008000; font-weight: bold">else</span> <span style="color: #008000; font-weight: bold">if</span>(filename[strlen(filename)<span style="color: #666666">-1</span>] <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;/&#39;</span>){

                        FORBIDDEN(request.out);

        <span style="color: #408080; font-style: italic">//open the file</span>

                }<span style="color: #008000; font-weight: bold">else</span> <span style="color: #008000; font-weight: bold">if</span>((r <span style="color: #666666">=</span> genheaders (extraheaders, <span style="color: #666666">191</span>, filename)) <span style="color: #666666">!=</span> <span style="color: #666666">0</span>){

                        NOTFOUND(request.out, filename);

        <span style="color: #408080; font-style: italic">//no error, serve it</span>

                }<span style="color: #008000; font-weight: bold">else</span>{

                        SENDFILE(request.out, filename, extraheaders);

                }



                FCGX_Finish_r(<span style="color: #666666">&amp;</span>request);

        }

        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">NULL</span>;

}



<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">void</span>){

        <span style="color: #B00040">int</span> i,j,thread_count;

        <span style="color: #B00040">pthread_t</span><span style="color: #666666">*</span> id;

        <span style="color: #B00040">char</span><span style="color: #666666">*</span> env_val;



        FCGX_Init();



        thread_count <span style="color: #666666">=</span> THREAD_COUNT;

        env_val <span style="color: #666666">=</span> getenv(<span style="color: #BA2121">&quot;PHP_FCGI_CHILDREN&quot;</span>);

        <span style="color: #008000; font-weight: bold">if</span> (env_val <span style="color: #666666">!=</span> <span style="color: #008000">NULL</span>) {

                j <span style="color: #666666">=</span> atoi(env_val);

                <span style="color: #008000; font-weight: bold">if</span> (j <span style="color: #666666">!=</span> <span style="color: #666666">0</span>) {

                        thread_count <span style="color: #666666">=</span> j;

                };

        };



        id <span style="color: #666666">=</span> malloc(<span style="color: #008000; font-weight: bold">sizeof</span>(<span style="color: #666666">*</span>id) <span style="color: #666666">*</span> thread_count);



        <span style="color: #008000; font-weight: bold">for</span> (i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> thread_count; i<span style="color: #666666">++</span>) {

                pthread_create(<span style="color: #666666">&amp;</span>id[i], <span style="color: #008000">NULL</span>, doit, <span style="color: #008000">NULL</span>);

        }



        doit(<span style="color: #008000">NULL</span>);

        free(id);  

        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;  

}

]]<span style="color: #666666">&gt;</span>
</pre></div>
</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/netlog/index.html" rel="tag">netlog</a>
            
                <a href="http://localhost:1313//tags/perf/index.html" rel="tag">perf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/im_not_going_to_fosdem_2008/">I&#39;m not going to Fosdem 2008</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/im_not_going_to_fosdem_2008/" rel="bookmark">
					<time class="entry-date" datetime="2008-02-12 20:37:50 -0400 -0400">
						February 12, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I wish I could put this on my webpage :</p>

<p><a href="http://www.fosdem.org"><img src="/files/blog/fosdem/going-to-2008.jpg" alt="I'm going to FOSDEM, the Free and Open Source Software Developers' European Meeting" /></a><br />

<br />

Fosdem looks interesting again : talks about iogrind , scons , cakephp , virtualbox , openAFS , ...<br />

No Gentoo devroom this year but drupal , debian , embedded , X , gnome rooms would have interested me too ( mostly gtk/glib for the latter )</p>

<p>Oh and about the reason I'm not going?  The <a href="http://corporate.netlog.com">company</a> is taking us to <a href="http://www.valdisole.it/">Val di Sole</a> where we will ski, snowboard and apres-ski for 4 days !  w00t ! This kicks even more ass then Fosdem :P</p>

<p>PS : I'm considering going to <a href="http://lac.linuxaudio.org/">LAC 2008</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/netlog/index.html" rel="tag">netlog</a>
            
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/per_directory_bash_history/">Per-directory bash history</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/per_directory_bash_history/" rel="bookmark">
					<time class="entry-date" datetime="2008-01-30 21:37:31 -0400 -0400">
						January 30, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I've been thinking about how a specific bash history for each directory could improve productivity, and unlike what I feared it was actually pretty easy to find a solution on the net.

<br />

Quote from an <a href="http://www.debian-administration.org/articles/543#comment_17">anonymous reply on debian-administration.org</a></p>

<p><br/></p>

<p><cite></p>

<p>So I use the following bash function:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic"># Usage: mycd &lt;path&gt;</span>

<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic">#  Replacement for builtin &#39;cd&#39;, which keeps a separate bash-history</span>

<span style="color: #408080; font-style: italic">#   for every directory.</span>

<span style="color: #008000; font-weight: bold">function</span> mycd<span style="color: #666666">()</span>

<span style="color: #666666">{</span>

   <span style="color: #008000">history</span> -w <span style="color: #408080; font-style: italic"># write current history file</span>

   <span style="color: #008000">builtin cd</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$@</span><span style="color: #BA2121">&quot;</span> <span style="color: #408080; font-style: italic"># do actual cd</span>

   <span style="color: #008000">local </span><span style="color: #19177C">HISTDIR</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HOME</span><span style="color: #BA2121">/.dir_bash_history</span><span style="color: #19177C">$PWD</span><span style="color: #BA2121">&quot;</span> <span style="color: #408080; font-style: italic"># use nested folders for history</span>

   <span style="color: #008000; font-weight: bold">if</span>  <span style="color: #666666">[</span> ! -d <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HISTDIR</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span>; <span style="color: #008000; font-weight: bold">then</span> <span style="color: #408080; font-style: italic"># create folder if needed</span>

      mkdir -p <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HISTDIR</span><span style="color: #BA2121">&quot;</span>

   <span style="color: #008000; font-weight: bold">fi</span>

   <span style="color: #008000">export </span><span style="color: #19177C">HISTFILE</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HISTDIR</span><span style="color: #BA2121">/bash_history.txt&quot;</span> <span style="color: #408080; font-style: italic"># set new history file</span>

   <span style="color: #008000">history</span> -c  <span style="color: #408080; font-style: italic"># clear memory</span>

   <span style="color: #008000">history</span> -r <span style="color: #408080; font-style: italic"># read from current histfile</span>

<span style="color: #666666">}</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
</p>

<p>and then set it up with the following in my bashrc:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #008000">shopt</span> -s histappend

<span style="color: #008000">alias cd</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;mycd&quot;</span>

<span style="color: #008000">export </span><span style="color: #19177C">HISTFILE</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HOME</span><span style="color: #BA2121">/.dir_bash_history</span><span style="color: #19177C">$PWD</span><span style="color: #BA2121">/bash_history.txt&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
</cite></p>

<p>Great stuff.  It would be nice to be able to use both the global and the directory-specific history by combining with an extra modifier key .<br />

( eg arrowup/pageup/c^r for global and alt+arrowup/alt+pageup/alt+c^r for the directory-specific one )</p>

<p>If I ever come up with / find something to do this I'll let you know...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/the_key_to_mastering_a_musical_instrument/">The key to mastering a musical instrument ...</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/the_key_to_mastering_a_musical_instrument/" rel="bookmark">
					<time class="entry-date" datetime="2008-01-19 23:36:06 -0400 -0400">
						January 19, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>The key to mastering a musical instrument is learning an other.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/music/index.html" rel="tag">music</a>
            
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/hacking_into_my_router_by_brute_force_http_authentication/">Hacking into my router by brute-forcing http authentication</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/hacking_into_my_router_by_brute_force_http_authentication/" rel="bookmark">
					<time class="entry-date" datetime="2007-11-28 22:11:51 -0400 -0400">
						November 28, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I forgot the username and password to access the web panel of my router.<br />

Luckily I knew some possible usernames and some patterns that I could have used to construct my password, so I just had to try all the combinations... Too much work to do manually but easily done when scripted.</p>

<p>Here is the php script that I came up with.  (obviously stripped of my personal stuff).  It got my account in less then a second :)</p>

<p><strong>DISCLAIMER</strong>:  Don't use this code for anything illegal!  I'm not responsible for what you do with this!</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;![CDATA[

<span style="color: #BC7A00">&lt;?php</span>

<span style="color: #19177C">$host</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;&#39;</span>;

<span style="color: #19177C">$port</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;&#39;</span>;

<span style="color: #19177C">$url</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;/&#39;</span>;

<span style="color: #19177C">$users</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">array</span>();

<span style="color: #19177C">$passes</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">array</span>();

tryme(<span style="color: #19177C">$host</span>,<span style="color: #19177C">$url</span>,<span style="color: #19177C">$port</span>);

<span style="color: #008000; font-weight: bold">foreach</span>(<span style="color: #19177C">$users</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #19177C">$user</span>) {

   <span style="color: #008000; font-weight: bold">foreach</span>(<span style="color: #19177C">$passes</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #19177C">$pass</span>) {

      tryme(<span style="color: #19177C">$host</span>,<span style="color: #19177C">$url</span>,<span style="color: #19177C">$port</span>,<span style="color: #19177C">$user</span>,<span style="color: #19177C">$pass</span>);

   }

}



<span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">tryme</span>(<span style="color: #19177C">$host</span>,<span style="color: #19177C">$url</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;/&#39;</span>,<span style="color: #19177C">$port</span> <span style="color: #666666">=</span> <span style="color: #666666">80</span>, <span style="color: #19177C">$user</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">null</span>,<span style="color: #19177C">$pass</span> <span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">null</span> ) {

   <span style="color: #19177C">$result</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;FAIL&quot;</span>;

   <span style="color: #008000; font-weight: bold">if</span>(tryAccess(<span style="color: #19177C">$host</span>,<span style="color: #19177C">$url</span>,<span style="color: #19177C">$port</span>, <span style="color: #19177C">$user</span>,<span style="color: #19177C">$pass</span>)) <span style="color: #19177C">$result</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;SUCCESS&quot;</span>;

   <span style="color: #008000; font-weight: bold">if</span>(<span style="color: #19177C">$user</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #19177C">$pass</span>) <span style="color: #19177C">$userpass</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;user </span><span style="color: #BB6688; font-weight: bold">$user</span><span style="color: #BA2121"> pass </span><span style="color: #BB6688; font-weight: bold">$pass</span><span style="color: #BA2121"> &quot;</span>;

   <span style="color: #008000; font-weight: bold">else</span> <span style="color: #19177C">$userpass</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot; without username &amp; password&quot;</span>;

   <span style="color: #008000; font-weight: bold">echo</span>(<span style="color: #BA2121">&quot;Tried </span><span style="color: #BB6688; font-weight: bold">$userpass</span><span style="color: #BA2121"> &gt; </span><span style="color: #BB6688; font-weight: bold">$result\n</span><span style="color: #BA2121">&quot;</span>);

}



<span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">tryAccess</span>(<span style="color: #19177C">$host</span>,<span style="color: #19177C">$url</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;/&#39;</span>,<span style="color: #19177C">$port</span> <span style="color: #666666">=</span> <span style="color: #666666">80</span>, <span style="color: #19177C">$user</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">null</span>,<span style="color: #19177C">$pass</span> <span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">null</span>)  {

   <span style="color: #19177C">$fp</span> <span style="color: #666666">=</span> <span style="color: #666666">@</span><span style="color: #008000">fsockopen</span> (<span style="color: #19177C">$host</span>, <span style="color: #19177C">$port</span>, <span style="color: #666666">&amp;</span><span style="color: #19177C">$errno</span>, <span style="color: #666666">&amp;</span><span style="color: #19177C">$errdesc</span>);

   <span style="color: #008000; font-weight: bold">if</span> (<span style="color: #666666">!</span><span style="color: #008000">is_resource</span> (<span style="color: #19177C">$fp</span>)) {

      <span style="color: #008000; font-weight: bold">echo</span>(<span style="color: #BA2121">&quot;Could&#39;t not open socket to server: </span><span style="color: #BB6688; font-weight: bold">$errno</span><span style="color: #BA2121"> - </span><span style="color: #BB6688; font-weight: bold">$errdesc\n</span><span style="color: #BA2121">&quot;</span>);

      <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">false</span>;

   }

   <span style="color: #666666">@</span><span style="color: #008000">fputs</span> (<span style="color: #19177C">$fp</span>, <span style="color: #BA2121">&quot;POST </span><span style="color: #BB6688; font-weight: bold">$url</span><span style="color: #BA2121"> HTTP/1.1</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">&quot;</span>);

   <span style="color: #666666">@</span><span style="color: #008000">fputs</span> (<span style="color: #19177C">$fp</span>, <span style="color: #BA2121">&quot;Host: </span><span style="color: #BB6688; font-weight: bold">$host\r\n</span><span style="color: #BA2121">&quot;</span>);

   <span style="color: #666666">@</span><span style="color: #008000">fputs</span> (<span style="color: #19177C">$fp</span>, <span style="color: #BA2121">&quot;Connection: close</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">&quot;</span>);

   <span style="color: #008000; font-weight: bold">if</span>(<span style="color: #19177C">$user</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #19177C">$pass</span>) {

      <span style="color: #666666">@</span><span style="color: #008000">fputs</span> (<span style="color: #19177C">$fp</span>, <span style="color: #BA2121">&quot;Authorization: Basic &quot;</span> <span style="color: #666666">.</span> <span style="color: #008000">base64_encode</span> (<span style="color: #BA2121">&quot;</span><span style="color: #BB6688; font-weight: bold">$user</span><span style="color: #BA2121">:</span><span style="color: #BB6688; font-weight: bold">$pass</span><span style="color: #BA2121">&quot;</span>) <span style="color: #666666">.</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">&quot;</span>);

   }

   <span style="color: #666666">@</span><span style="color: #008000">fputs</span>(<span style="color: #19177C">$fp</span>,<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\r\n</span><span style="color: #BA2121">&quot;</span>);

        

   <span style="color: #19177C">$reply</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;&#39;</span>;

   <span style="color: #19177C">$success</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">true</span>;

   <span style="color: #008000; font-weight: bold">while</span> (<span style="color: #666666">!@</span><span style="color: #008000">feof</span> (<span style="color: #19177C">$fp</span>)) {

      <span style="color: #19177C">$line</span> <span style="color: #666666">=</span> <span style="color: #666666">@</span><span style="color: #008000">fgets</span> (<span style="color: #19177C">$fp</span>, <span style="color: #666666">1024</span>);

      <span style="color: #008000; font-weight: bold">if</span>(<span style="color: #008000">strpos</span>(<span style="color: #19177C">$line</span>,<span style="color: #BA2121">&#39;401 Unauthorized&#39;</span>)) <span style="color: #19177C">$success</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">false</span>;

      <span style="color: #19177C">$reply</span> <span style="color: #666666">.=</span> <span style="color: #19177C">$line</span>; 

   }

   <span style="color: #666666">@</span><span style="color: #008000">fclose</span> (<span style="color: #19177C">$fp</span>);

   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #19177C">$success</span>;

}

<span style="color: #BC7A00">?&gt;</span>

]]&gt;
</pre></div>
</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/gtk_dialogs_for_shell_scripts_with_zenity_and_the_ask-pass_gui_tools_for_ssh-add/">gtk dialogs for (shell)scripts with zenity and the ask-pass gui tools for ssh-add</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/gtk_dialogs_for_shell_scripts_with_zenity_and_the_ask-pass_gui_tools_for_ssh-add/" rel="bookmark">
					<time class="entry-date" datetime="2007-11-25 18:45:41 -0400 -0400">
						November 25, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Phew! where to start?  Probably at <a href ="http://www.chimeric.de/blog/2007/1107_mounting_external_truecrypt_volumes_interactively">this blogpost</a>.  It's about making it very easy to work with external encrypted volumes. I'm not going to talk about the article itself but about a great tool i discovered thanks to it: Zenity.  It's an LGPL-licensed program written in C by some guys from Gnome and Sun. You can call it from any script and present a user with a gtk widget such as a password-dialog, filechooser, calendar, ... It has <a href="http://www.linuxmanpages.com/man1/zenity.1.php">many possibilities</a>.<br />

This is great if you want to run scripts on the terminal or even without a terminal (scripts automatically started by your desktop environment) and need user input.</p>

<p>This immediately made me think of using this together with ssh-add, because i was getting a bit tired to open a console and add my key by typing the ssh-add command for every X session. (For the record: ssh-add without any arguments is enough for most users: it looks for keys with default names, but i have multiple keys with some speial names so...)<br />

(I can easily retrieve the right command by typing ssh-add*arrowup* but still it's cumbersome.. see <a href="/my_favorite_bash_tricks">this page for the bash-trick</a>)</p>

<p>Of course I realized I was probably not the only one with this idea so I googled a bit and looked in the <a href="http://www.hmug.org/man/1/ssh-add.php">ssh-add manpage</a>, and I found out some cool stuff!<br />

It turned out ssh-add has support for such scenarios and offers the $SSH_ASKPASS environment variable for this.  Since the system I'm currently using on my laptop (which i converted from Arch to xubuntu 7.10 but that's another story :-)) doesn't have this variable set by default I could of course set it myself, but it can be even easier then this...</p>

<p>When the $SSH_ASKPASS variable is not set, ssh-add will try to execute /usr/bin/ssh-askpass by default.  I figured this out by typing this in a console:<br />

ssh-add *mykey* < /dev/null<br />

This revealed that there are already some utilities specifically for this purpose!  Let's see...:</p>

<p><pre>&lt;![CDATA[</p>

<p>dieter@dieter-mbp:~$ aptitude search askpass</p>

<p>p   gtk-led-askpass                                                - GTK+ password dialog suitable for use with ssh-add</p>

<p>p   ssh-askpass                                                    - under X, asks user for a passphrase for ssh-add</p>

<p>p   ssh-askpass-fullscreen                                         - Under Gnome2, asks user for a passphrase for ssh-add</p>

<p>p   ssh-askpass-gnome                                              - interactive X program to prompt users for a passphrase for ssh-add</p>

<p>]]&gt;</pre><p>I decided to install ssh-askpass-gnome even though I use xfce.  And it works great :D</p></p>

<p>After installing this you can just put your ssh-add line in the settings panel called "autostarted Applications" from Xfce and for your next session it will show a nice gtk popup to ask for your password and it works like a charm :)<br />

However, since i use multiple keys, i used to use the globbing operator (*) but this doesnt work anymore with this method.  I guess that makes sense as the globbing operator is probably a bash built-in...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/video_of_me_drumming/">Video of me drumming</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/video_of_me_drumming/" rel="bookmark">
					<time class="entry-date" datetime="2007-11-04 18:28:17 -0400 -0400">
						November 4, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I recorded a little drumvideo while practicing.<br />

It's just some improvisation... Find the mistakes! ;-)</p>

<p>Recorded with 2 shure SM57's, an M-audio mobilepre USB and the iSight cam in my macbook pro.</p>

<p>The mic setup had to be close enough to sound direct and focused without too much reverb, and still far enough to allow all instruments too come through.   After some experimenting I decided to place the mics behind the kit, next to me ( one each side), just below the height of the hips.  I think I have found a pretty good compromise.</p>

<p>The video is hosted on <a href="http://youtube.com/watch?v=qJLEnnFDDyU">youtube</a> and on <a href="http://nl.netlog.com/go/videos/videoid=554832">netlog</a></p>

<p> No effects have been applied (except for the fade-out at the end)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/real-life/index.html" rel="tag">real life</a>
            
                <a href="http://localhost:1313//tags/drums/index.html" rel="tag">drums</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/simple_command_to_retrieve_stuff_from_ram_after_closing_or_crashing_an_application/">Simple command to retrieve stuff from RAM after closing/crashing an application</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/simple_command_to_retrieve_stuff_from_ram_after_closing_or_crashing_an_application/" rel="bookmark">
					<time class="entry-date" datetime="2007-09-15 15:32:24 -0400 EDT">
						September 15, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>After an app is closed or crashed, the data is still in your RAM and you can very easily get it back by grepping /proc/kcore.<br />

thanks Martin for this tip!<br />

<a href="http://www.matusiak.eu/numerodix/blog/index.php/2007/09/10/recover-lost-stuff-from-memory" title="http://www.matusiak.eu/numerodix/blog/index.php/2007/09/10/recover-lost-stuff-from-memory">http://www.matusiak.eu/numerodix/blog/index.php/2007/09/10/recover-lost-...</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/emulating_two-dimensional_%28or_even_multi-dimensional%29_arrays_in_bash/">Emulating two-dimensional (or even multi-dimensional) arrays in bash</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/emulating_two-dimensional_%28or_even_multi-dimensional%29_arrays_in_bash/" rel="bookmark">
					<time class="entry-date" datetime="2007-08-26 12:49:42 -0400 EDT">
						August 26, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Ever needed to use arrays of two or more dimensions but got stuck on Bash limited array support which provides only 1 dimension?</p>

<p>There is a trick that let's you dynamically create variable names.  Using this, you can emulate additional dimensions.<br />

</p>

<p>Here's a simple example for an array with 2 dimensions:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#set the value of my_array[i][j] where i = 25 and j = 10 to &quot;value&quot;</span>



<span style="color: #19177C">var</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;my_array25-10&quot;</span>

<span style="color: #408080; font-style: italic">#or like this: I=25;J=10;var=&quot;my_array$I-$J&quot;</span>



<span style="color: #008000">declare</span> <span style="color: #19177C">$var</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;value&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#retrieve the value of my_array[i][j] where i = 5 and j = 10</span>

<span style="color: #19177C">var</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;my_array5-10&quot;</span>

<span style="color: #408080; font-style: italic">#or like this: I=5;J=10;var=&quot;my_array$I-$J&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BB6688; font-weight: bold">${</span>!var<span style="color: #BB6688; font-weight: bold">}</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>Thanks to the guys from #bash on freenode for their help and their excellent <a href="http://wooledge.org/mywiki/BashFAQ">bash faq</a></p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/nagios_monitoring_in_your_desktop_panel_aka_xfce_genmon_panel_plugin_rules/">Nagios monitoring in your desktop panel aka Xfce Genmon panel plugin rules!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/nagios_monitoring_in_your_desktop_panel_aka_xfce_genmon_panel_plugin_rules/" rel="bookmark">
					<time class="entry-date" datetime="2007-08-05 16:42:46 -0400 EDT">
						August 5, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>FOSS is written by users, for users, and what I've been doing/experiencing this afternoon is a perfect example of that.<br />

First of all take <a href="http://www.xfce.org">Xfce</a>: a lightweight but sleek and flexible Desktop Environment.  Then take a look at the <a href="http://goodies.xfce.org/">Xfce Goodies project</a>, more specifically the <a href="http://goodies.xfce.org/projects/panel-plugins/start">Panel Plugins</a> page.  There are plenty of panel plugins to make your life easier: they check your mail, you can control your media player, they can show how your pc performs, built-in dictionaries, translate tools or command lines, show weather forecasts and so on.</p>

<p>Now, for <a href="http://corporate.netlog.com">work</a> I need to keep an eye on <a href="http://www.nagios.org/">Nagios</a>, (Nagios is a great FOSS host/service monitoring web application) but I don't like periodically checking the same webpage over and over again:<br />

news should come to me, not the other way around.</p>

<p>Now, I had already found an excellent <a href="https://addons.mozilla.org/en-US/firefox/addon/3607">Nagios Checker Firefox extension</a> but then I would need to have Firefox open all the time, which I don't.<br />

So at first I wanted to write my own panel plugin that would let me allow seeing the most important Nagios status information but then I came across the coolest Xfce panel plugin of them all: the <a href="http://goodies.xfce.org/projects/panel-plugins/xfce4-genmon-plugin">Genmon plugin</a>.  This is a plugin which you can add as many times to your panel as you want, and for each instance you can configure a script that it should run, and the frequency of it.  Like this you can create your own simple scripts (in php, bash, perl, python,...) which generate content (eg: text and images to be shown on the panel, tooltip, on-click action etc) and the Genmon plugin takes care of the rest.</p>

<p>This is exactly what I've done and in less then an hour everything was working just like I wanted :-)<br />

Well, not exactly: apparently the on-click action is bound to the image you show.  I would rather show no image at all and just show text with an on-click action bound to it, but this seems not possible so I had to use an icon.  This made my panel a bit larger (as text is shown beneath the icon, you can't configure it to place it next to it) Also it would be neat if I could work with colors: red for hosts who are down, green for those who are up etc.  Some details I could achieve if I would make my hands dirty, but for now I don't have time to enhance the Genmon plugin or to write my own, so I just live with it ;-)</p>

<p>Anyways, enough talk.</p>

<p>Here is a screenshot:</p>

<p><img src="/files/xfce_genmon_nagios_script.png"/></p>

<p>The cursor is not on the screenshot but I was obviously hoovering over the panel plugin to show the tooltip.<br />

You can also see at the left the notes plugin and the mail checker plugin and at the right the volume control, trash applet, battery monitor, systray, clock and action button(s) panel plugins.</p>

<p>And here is the source code of my bash script</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>



<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic"># Written by Dieter Plaetinck</span>

<span style="color: #408080; font-style: italic"># Licensed under the GPL V3</span>

<span style="color: #408080; font-style: italic"># See gnu.org/licenses/gpl-3.0.html</span>

<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic"># works for Nagios 2.x No idea about 3.x </span>





<span style="color: #19177C">URL</span><span style="color: #666666">=</span>https://&lt;yourhost&gt;/nagios/cgi-bin/tac.cgi

<span style="color: #19177C">USERNAME</span><span style="color: #666666">=</span>username

<span style="color: #19177C">PASSWORD</span><span style="color: #666666">=</span>password



<span style="color: #19177C">PAGE</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>curl -s -k -u <span style="color: #19177C">$USERNAME</span>:<span style="color: #19177C">$PASSWORD</span> <span style="color: #19177C">$URL</span><span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_DOWN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>           <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=4&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_UNREACHABLE</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>    <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=8&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_UP</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>             <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=2&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_PENDING</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>        <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=1&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>



<span style="color: #19177C">SERVICES_CRIT</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>        <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=16&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_WARN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>        <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=4&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_UNKNOWN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>     <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=8&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_OK</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>          <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=2&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_PENDING</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>     <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=1&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;img&gt;scripts/nagios.gif&lt;/img&gt;&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;txt&gt;</span><span style="color: #19177C">$HOSTS_DOWN</span><span style="color: #BA2121">-</span><span style="color: #19177C">$SERVICES_CRIT</span><span style="color: #BA2121">/</span><span style="color: #19177C">$SERVICES_WARN</span><span style="color: #BA2121">&lt;/txt&gt;&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;tool&gt;Hosts: </span><span style="color: #19177C">$HOSTS_DOWN</span><span style="color: #BA2121"> down / </span><span style="color: #19177C">$HOSTS_UNREACHABLE</span><span style="color: #BA2121"> unreachable / </span><span style="color: #19177C">$HOSTS_UP</span><span style="color: #BA2121"> up / </span><span style="color: #19177C">$HOSTS_PENDING</span><span style="color: #BA2121"> pending</span>

<span style="color: #BA2121">Services: </span><span style="color: #19177C">$SERVICES_CRIT</span><span style="color: #BA2121"> crit / </span><span style="color: #19177C">$SERVICES_WARN</span><span style="color: #BA2121"> warn / </span><span style="color: #19177C">$SERVICES_UNKNOWN</span><span style="color: #BA2121"> unknown / </span><span style="color: #19177C">$SERVICES_OK</span><span style="color: #BA2121"> ok / </span><span style="color: #19177C">$SERVICES_PENDING</span><span style="color: #BA2121"> pending&lt;/tool&gt;&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;click&gt;firefox https://&lt;yourhost&gt;/nagios&lt;/click&gt;&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>At my company we use https, If you use http I don&rsquo;t know if the authentication method is the same. If not check the -d flag for curl.<br /></p>

<p>The icon is just one I took from the nagios page and resized it a bit.  The script will be running in your home directory (even though you can put it anywhere you want)</p></p>

<p>PS: does anyone know a good Apple Keychain- like daemon that I can query from other scripts to receive passwords? Preferably GTK ones that do not pull in Gnome deps.  So I don't have to store passwords in cleartext... (and I need this anyway for other purposes :p)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/netlog/index.html" rel="tag">netlog</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/upgrading_drupal_the_easy_way/">Upgrading Drupal the easy way</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/upgrading_drupal_the_easy_way/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-29 15:57:23 -0400 EDT">
						July 29, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I just upgraded this site to <a href="http://drupal.org/drupal-5.2">Drupal 5.2</a>.  The package came with upgrading instructions consisting of 11 steps to complete the upgrade proces, but after reading it a few times I realized it could be done easier.</p>

<p>Here is a synthesized version of the upgrade instructions that came with the package:</p>

<ol>

<li>Backup your database and Drupal directory.  Especially your site settings, custom modules and themes, and files folder.</li>

<li>Log on as the user with user ID 1.  User ID 1 needs to be logged in so that you can access update.php (step 9) which can only be run by user ID 1.  Do not close your browser until step 10 is complete.</li>

<li>Place the site in "Off-line" mode, to mask any errors from site visitors.</li>

<li>Disable contributed modules and switch to a core theme</li>

<li>Remove all of the old files and directories from the Drupal installation directory.</li>

<li>Unpack the new Drupal files and directories into the Drupal installation directory.</li>

<li>Copy the backed up files/directories from step 1 to the Drupal installation directory.</li>

<li>Verify the new configuration file to make sure it has the latest and correct information.</li>

<li>Re-install contributed modules.   Check if they are compatible with the new version</li>

<li>Run update.php by visiting <a href="http://www.example.com/update.php" title="http://www.example.com/update.php">http://www.example.com/update.php</a></li>

<li>Finally, return site to "Online" mode</li>

</ol>

<p>Now, the thing is you don't have to do things like disabling contributed modules and themes if you install them right away instead of later on.</p>

<p>So, here are my simplified instructions:</p>

<ol>

<li>Unpack the drupal 5.2 folder on your local system</li>

<li>Copy all your specific folders/files (files, themes, modules and settings.ini) to the right place in this folder</li>

<li>Login as user 1</li>

<li>Enable offline mode</li>

<li>Delete all files of your Drupal installation on the webhost</li>

<li>Upload the files from the drupal 5.2 folder to your webhost</li>

<li>go to <a href="http://www.example.com/?q=user" title="http://www.example.com/?q=user">http://www.example.com/?q=user</a> and login again</li>

<li>Run <a href="http://www.example.com/update.php" title="http://www.example.com/update.php">http://www.example.com/update.php</a></li>

<li>Enable online mode</li>

</ol>

<p>These instructions worked fine for upgrading from 5.1 to 5.2.  If you do are more drastic upgrade (e.g. from 4 to 5) you should only follow this method if you don't have any contributed themes/modules because otherwise you need to upgrade your modules.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/drupal/index.html" rel="tag">drupal</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/bye_cakephp_bye_dauth_hello_drupal/">Bye CakePHP, bye dAuth... Hello Drupal!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/bye_cakephp_bye_dauth_hello_drupal/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-19 00:34:51 -0400 EDT">
						July 19, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I'm afraid the time has come to say goodbye to CakePHP, and to the projects I've been working on for it.<br />

I still like Cake ... In fact, the further development of 1.2 goes the more I like it (well, generally spoken that is ... because there are some minor things I don't like but that's not important now).  The truth of the matter is I like to develop, I like the php language and I enjoy working with Cake.<br />

But .. all the sites I currently work on are all community sites or blogs, and although some of them have some specific requirements, in the end it's all very generic and a full blown content management system like Drupal proves much more useful and feature full then developing my own application in a web application framework such as Cake. (even if that's becoming easier and easier to do)</p>

<p>I think Drupal is a magnificent CMS because it is plug and play (I need that because my time is getting pretty sparse lately!) but also because it has a pretty active community: there are so many 3rd party modules being developed, and usually you can just upload the module in your modules folder , enable it from your control panel and presto!</p>

<p>Also Drupal seems to have a pretty slick API, this is important for me because I will still need to program some stuff every once in a while because not everything I need is available yet. </p>

<p>If I would ever use Cake again, I would probably abuse it as a console application framework (especially for it's simple datalayer), or of course if I would have to create a very customized web application such as I did <a href="/masterproef">recently</a>, but none is planned in the forseeable future.</p>

<p><em>A special note about dAuth:</em><br />

CakePHP 1.2 will have an auth component included, I don't know the current state but as far as I know it's not (and never will be, judging my talks with a cake dev) as advanced as dAuth.  However, this is not necessarily a bad thing:<br />

The further I've tried to perfect the safeguarding of the confidentiality of the password (trough hashing it, using the challenge response paradigm, etc) the more I've come to realize you can never get a perfect result on plain http using js/php.  Just switch to https and you get great encryption where you don't need to bother about the confidentiality of a password, and it's almost no hassle.  So these are things that shouldn't be in your php/js code, which saves you a lot of efforts and is perfectly secure (at least: the aspect of confidentiality!</p>

<p>But.. another part of the system were the "added bits" of security such as the brute force detection.  I hope the cake guys will include something like that in their auth component because I think this is a must.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/drupal/index.html" rel="tag">drupal</a>
            
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/assymetric_keys_instead_of_passwords_for_ssh_authentication_to_increase_security_and_convenience/">Assymetric keys instead of passwords for SSH authentication to increase security and convenience</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/assymetric_keys_instead_of_passwords_for_ssh_authentication_to_increase_security_and_convenience/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-14 20:22:38 -0400 EDT">
						July 14, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I've been using <a href="http://www.openssh.com/">OpenSSH</a> already for a while and although I've seen mentions of "public key authentication" and "RSA encryption" several times in it's config files, I never decided to figure out what it did exactly, and stuck to password authentication.  But now the guys at work explained how it works and after reading more about it, I'm totally hooked on it!</p>

<p>It's a feature in ssh protocol version 2 (thus it's around for already a while, e.g. we can all use it without updating something) which essentially comes down to this: you generate an asymmetric key pair and distribute the public key to all remote hosts. When logging in to that host, the host will encrypt a random integer, which only you can decrypt (using the private key) and hence prove your identity.  Too secure your private key you'll store it encrypted with a password.  Ssh-agent (which is bundled with openssh) is the tool that interacts with ssh to perform this task: when logging in to a host, ssh-agent will open the private key for you automatically <em>if it can decrypt it with the password it receives from you</em>  But the problem is you'll have to load (enter your password and decrypt the key) each time again.</p>

<p>This is where <a href="http://www.gentoo.org/proj/en/keychain/index.xml">keychain</a> comes in, or you can use <a href="http://www.phil.uu.nl/~xges/ssh/">SSH Agent</a> (don't confuse this with the ssh agent that comes with openssh) if you're a Mac user and like gui's.  These tools basically ask you your passwords for all private keys you wish to use in a session (with session I mean "the whole time of using your computer"), decrypt the encrypted key on your hard disk and cache the decrypted key in ram, so it can be used in all terminals you open.</p>

<p>For more information:<br />

<a href="http://www.ibm.com/developerworks/library/l-keyc.html">OpenSSH key management, Part 1: Understanding RSA/DSA authentication</a><br />

<a href="http://www.ibm.com/developerworks/library/l-keyc2/">OpenSSH key management, Part 2: Introducing ssh-agent and keychain</a><br />

<a href="http://www.ibm.com/developerworks/linux/library/l-keyc3/">OpenSSH key management, Part 3: Agent forwarding and keychain improvements</a> (freaks only ;-))</p>

<p>Have fun</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/the_perfect_gtk_music_player_can_exaile_replace_amarok/">The perfect GTK music player: can Exaile replace Amarok?</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/the_perfect_gtk_music_player_can_exaile_replace_amarok/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-08 12:50:50 -0400 EDT">
						July 8, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I've always liked Amarok: it does everything I always wanted, <em> and more</em>.  It looks perfect in every way ...<br />

But .. it uses the QT library, and although there are tricks to make QT applications more fit in with your gtk desktop/theme it will never fit in perfectly, not only graphically but also because you still need to load the qt libraries when you want to listen to some music and it is built to interact with the KDE desktop environment.</p>

<p>So, I've been looking for an alternative, a GTK application strong enough to actually be able to replace Amarok, the king of all software music players.</p>

<h3>Requirements</h3>

<p>First a list of features I would like to see in my new music player.  Let's keep it real: I don't think there is <em>any</em> music player out there that does everything listed here, not even Amarok.  I can live with some missing features, as long as it has the most important ones.  The other features might be added later on anyway, and who knows, maybe I'll start contributing to a project if I really like it...</p>

<p>In order of importance:</p>

<ul>

<li>Last.fm submitting</li>

<li>Jack output</li>

<li>Advanced management of songs/albums/artists and playlists with ratings (not just bookmarks)</li>

<li>Last.fm stream listening</li>

<li>Ipod support</li>

<li>Radio streams</li>

<li>Podcasts</li>

<li>Artist/album/song information fetching from Wikipedia</li>

<li>File system monitoring (Inotify) so that it detects the new songs when I add them to my file system</li>

<li>Lyrics</li>

<li>Volume normalization (either through <a href="http://replaygain.hydrogenaudio.org/">ReplayGain</a> or just automatically) (if this is not built-in I can always route through a compressor/limiter myself)</li>

</ul>

<p>Stuff that other people like, but I don't need/want/care about:</p>

<ul>

<li>On screen display (when a new song starts)</li>

<li>Visualizations</li>

<li>Musicbrainz(*)</li>

<li>CD-ripping (not the task of a music player imho)</li>

</ul>

<p>(*): I absolutely love Musicbrainz and use it all the time but I don't think it is functionality to be put in a music player.  I use the Musicbrainz Picard tagger to organize my collection.  Putting all the needed functionality inside the media player would make it very bloated.  So in theory I actually wouldn't need any tag editing at all in my music player<br />

(this could be a discussion in it's own merit: why don't we get rid of all tag editing functionality in all music players and use decent, separate utilities such as the Musicbrainz Picard tagger to tag your collection?)</p>

<h3>Contenders</h3>

<p>It struck me how many GTK music players there are out there, and especially how similar some of them are.</p>

<ul>

<li><a href="http://www.sacredchao.net/quodlibet/">Quod Libet</a>: written in python, pretty advanced (podcasts, shoutcasts, Last.fm submissions, reg-exp song searching)</li>

<li><a href="http://www.musicpd.org">mpd</a>: although I like a daemon based approach (I sometimes don't have X open - pretty seldomly though - ) it (even combined with any of the graphical front ends) doesn't offer anything close to my requirements</li>

<li><a href="http://banshee-project.org">Banshee</a>: built on Mono. Has podcasts, ipod support, smart playlists, and even inotify support but didn't even compile on Gentoo, so never mind...</li>

<li><a href="http://www.listen-project.org/">Listen</a>: written in python, it looks pretty advanced: podcasts, shoutcasts, Last.fm, Wikipedia fetching, ... it can even create playlists for you based on your Last.fm account</li>

<li><a href="http://live.gnome.org/Rhythmbox">Rhythmbox</a>: Gnomes music player inspired by Apple's iTunes.  featuring internet radio, ratings, lyrics, artwork, Last.fm, podcasts, cd-ripping, ipod writing (only partial !), plugins, file system monitoring (I think through polling, not through inotify).  According to some people it's pretty buggy and I can only agree: version 0.10 (latest)  crashed many times on me :(</li>

<li><a href="http://www.exaile.org">Exaile</a> I kept the best one for the end ;-).  It's another one written in python, inspired by Amarok and hence has many similar features.  In addition to that you can also get guitar tabs with it. (why no drum tabs? ;-) ) According to somebody on trac it's <a href="http://exaile.org/trac/ticket/485">better then Listen</a>.

</li>

</ul>

<h3>is Exaile a worthy alternative?</h3>

<p>Description on the <a href="http://www.exaile.org/">Exaile website</a>:<br />

<cite><br />

Exaile is a music player aiming to be similar to KDE's Amarok, but for GTK+ and written in Python. It incorporates many of the cool things from Amarok (and other media players) like automatic fetching of album art, handling of large libraries, lyrics fetching, artist/album information via Wikipedia, Last.fm submission support, and optional iPod support via a plugin.<br />

In addition, Exaile also includes a built-in SHOUTcast directory browser, tabbed playlists (so you can have more than one playlist open at a time), blacklisting of tracks (so they don't get scanned into your library), downloading of guitar tablature from fretplay.com, and submitting played tracks on your iPod to Last.fm<br />

</cite><br />

The description pretty much sums up all there is about Exaile.<br />

However I want to add it also supports podcasts and streaming radio.<br />

You can also rate all your tracks and it has some smart playlists (depending on ratings, newest, random, top tracks, ...)<br />

It uses sqlite (no MySql support like Amarok, which is not a big miss)<br />

The fact that it allows to have multiple playlists / radio's / ... open in tabs is a killer feature! (Amarok guys: implement this too!)<br />

Another cool thing are the <a href="http://www.exaile.org/plugs">plugins</a> which add even more functionality, and it's very easy to install them from inside the program, enabling goes instantly (without the need of a restart)<br />

Also, it can output via jack, because it uses the GStreamer framework.  It does however create a new jack instance for each song, so each time a song changes, it drops the current jack output and creates a new one.  I don't like this, because each time have to re-attach my routings, maybe there is some automated way to do this (with <a href="http://qjackctl.sourceforge.net/">qjackctl</a> or something?) but I haven't figured it out yet.  If anyone knows more about this, let me know!</p>

<p>When last.fm submission fails (eg when your connection is down) it doesn't keep a queue to resend later like Amarok does, also it currently doesn't offer Last.fm radio streaming.<br />

When searching through your collection the results aren't updated instantly: it takes a second or so (just like when using Amarok, so that's fine)<br />

I don't think Exaile can automatically mount your Ipod for you.  But I don't think this is the task of the media player:  You can always use a deamon (or your DE) to do that (I use thunar-volman in Xfce for that).  The media player should however work well with the device, after it's mounted.  In Exaile the Ipod plugin works pretty well, when you mount your Ipod you can make it connect to it, show you the playlists and songs, and you can add songs and playlists just like in Amarok.  I couldn't, however, edit the playlist that was on the Ipod and creating and deleting a new playlist was a bit buggy (gui still showing old entry with some random ascii characters instead of not showing the playlist anymore)</p>

<p>As a last negative point, it seems to not support inotify as of yet.  You can configure it to systematically re-scan your collection every specific interval which is okay, but doesn't come close to inotify (especially for huge collections)</p>

<p>So, to conclude I would say Exaile is a worthy alternative for Amarok, which is a huge thing to say.  It doesn't offer everything Amarok does, but it does have most important features and even offers some - useful ones - that Amarok doesn't have.  And I never had it to crash or anything like that, it behaved well and stable.</p>

<p>The project is however pretty young and it is being actively developed.  Which is a must because some features still need to be implemented (such as inotify support and Last.fm streaming)<br />

But I see much activity on trac, especially in <a href="http://www.exaile.org/trac/tags/'last.fm'">the domain of Last.fm</a> where I can see that <a href="http://www.exaile.org/trac/ticket/299">support for Last.fm streams is scheduled for the next minor release (0.2.11)</a> so I'm not worrying and I'm using Exaile full time right now.</p>

<p>I haven't deleted Amarok just yet, but I don't think that will take very long ;-) </p>

<p>Don't take my word for it, but if I ever find the time for it,  I would even like to get intimate with the code base and do some contributions.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/music/index.html" rel="tag">music</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/webpages_should_not_contain_add_to_digg_delicious_technorati_links/">Webpages should not contain &#34;add to Digg / Del.icio.us / Technorati /...&#34; links</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/webpages_should_not_contain_add_to_digg_delicious_technorati_links/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-08 12:38:38 -0400 EDT">
						July 8, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I don't like pages / articles / blog posts /.. accompanied by "Digg this", "add to Del.icio.us" or "add to Technorati" links.<br />

Why not? Because this is meta level functionality.  Not functionality of the blog/article/page in question, but on a higher level.  And thus this should be handled on a higher level: the web browser.  Just like we can create and manage bookmarks (I mean the old fashioned ones, not the delicious ones) in our browser: this is not the task of a web page. (we all know how silly "bookmark this" links look on a page, right?)</p>

<p>Whether you like these kind of services or not is up to you (personally I think the most popular content is often the most subjective,   biased and close minded, not to mention too mainstream for "real" geeks but that's another story) but people who are serious about it should just make sure they can do it for any page they visit (eg use a Firefox extension to enable digging and adding to delicious) so we can get rid of this ugly clutter that is put on some pages.</p>

<p>I know not every browser supports this already (either by default or by extending it with (3rd party) plug-ins) and even if it is, not everyone enables this functionality, so it's a bit a chicken and egg problem.</p>

<p>But then again, most web2.0 people already use a browser that supports it, or will support it in the very near future, so let's get rid of this inappropriately placed meta-functionality !</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/afgestudeerd_graduated/">Afgestudeerd - graduated</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/afgestudeerd_graduated/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-04 15:23:01 -0400 EDT">
						July 4, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Foreign visitors: yeay I graduated today \o/</p>

<p>Dutchies: joepie, afgestudeerd...<br />

Vandaag proclamatie gehad, ben geslaagd met voldoening, zelfs geen enkele buis \o/<br />

En een 12/20 voor de <a href="/masterproef">Masterproef</a> :-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/thesis/index.html" rel="tag">thesis</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/dauth/">dAuth</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/dauth/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-02 13:19:14 -0400 EDT">
						July 2, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>dAuth is a secure authentication system for CakePHP.</p>

<p>It uses techniques such as the challenge-response paradigm, customizable multiple-stage password hashing, brute force (hammering) detection, session hijacking prevention etc.</p>

<p><a href="http://bakery.cakephp.org/articles/view/introduction-to-dauth-v0-3" onClick="javascript:urchinTracker('bakery.cakephp.org/articles/view/introduction-to-dauth-v0-3');">Read all about it</a></p>

<p>You can download the files separately on the before mentioned page or get the <a href="http://letthemcodecake.com/learning-cakephp/dauth-v03-tarball/" onClick="javascript:urchinTracker('letthemcodecake.com/learning-cakephp/dauth-v03-tarball/');">tarball</a> that somebody was kind enough to create.<br />

(damn I'm lazy today)</p>

<p>I don't maintain this any more!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/dauth/index.html" rel="tag">dauth</a>
            
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/phpdeliciousclient_a_php_cli_client_to_administer_delicious_accounts/">PhpDeliciousClient, a php cli client to administer del.icio.us accounts</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/phpdeliciousclient_a_php_cli_client_to_administer_delicious_accounts/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-01 16:52:51 -0400 EDT">
						July 1, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>PhpDeliciousClient is a console based client for doing maintenance on Del.icio.us accounts.<br />

I wrote it because - to my knowledge - there currently is no good program (including the personalized del.icio.us web page itself) that lets you make changes to your del.icio.us data in a powerful, productive manner. (with data I primarily mean tags. Posts and bundles are considered less important).</p>

<p>You probably are familiar with the fact that a Delicious account (or any tag based meta data organizing system, for that matter) can soon become bloated:  It gets filled with way too many tags.  Among those tags several of them mean the same (fun, funny, humor, ...) or include the other (humor, jokes, ...)  You can group them in bundles but even then you need to add all the tags to a post if you want it to appear in the results for that tag.  Not very convenient. Also, if you have your del.icio.us bookmarks available in Firefox, you'd have a menu with several hundreds of entries (one for each tag), each menu containing usually just a few (or worse: just one) entry.</p>

<p>When I got in this situation I tried to fix it, but it was a hell of a task to do this on the Delicious webpage itself, and I although I found some other tools they were far to basic, outdated, dependent on other stuff or just not meant for this kind of task, so I decided to write my own.</p>

<p>The result is a php command line program called <a href="/php_delicious_client">PhpDeliciousClient</a> (as you can see, I added it to the menu on the left too), which uses the <a href="http://www.ejeliot.com/pages/php-delicious">PhpDelicious</a> library to access the Del.icio.us api.</p>

<p>The primary focus of the program is to help you to bring your tags in balance, in an as efficient way as possible.  Other stuff, which can be done just fine on the delicious page (editing single posts, changing your password, ...) is not implemented.  </p>

<p>It's a bit hacky, I don't give any guarantees but I can tell I used it to edit <a href="http://del.icio.us/Dieter_be">my own Del.icio.us page</a>, going from about 400 tags to about 80 without any problems.</p>

<p>That said, head over to <a href="/php_delicious_client">the PhpDeliciousClient project page</a> for some more information, and to download it ;-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/php_delicious_client/">PhpDeliciousClient</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/php_delicious_client/" rel="bookmark">
					<time class="entry-date" datetime="2007-06-29 13:52:21 -0400 EDT">
						June 29, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h3>Introduction</h3>

<p>PhpDeliciousClient is a CLI program for administering your Delicous account.  When you invoke it from the command line you have some methods to administer your tags and your posts.</p>

<p>It's written in PHP and uses <a href="http://www.ejeliot.com/">Ed Eliot's</a> <a href="http://www.ejeliot.com/pages/php-delicious">PhpDelicous</a> class to contact the del.icio.us api. (included in download)<br />

PhpDeliciousClient is licensed under the GPL v2, while the PhpDelicious class is licensed under the BSD license.</p>

<h3>Why?</h3>

<p>The main reason I started developing it is because administering your account on the del.ico.us web interface can be cumbersome.<br />

This is especially true in the case of balancing your tags:<br />

After a while, your del.icio.us account can get unbalanced: this is when you have many tags, but most of them only contain a few posts (very often even just one! ).<br />

So you would want to balance them again, by deleting and renaming some very specific tags so that you get a collection consisting of less tags (who are more general) and contain about 10 ~ 30 posts each.  Maybe you even also want to delete or rename some general ones who have way to many associated posts.<br />

If you want to do this via the del.icio.us web interface you could either go to your personal page, click a tag, and delete the tag manually from each associated post.  Or you could go to the delete or rename tag pages.  On these pages you have a form where you can select an existing tag from a dropdown (which usually is huge) and choose to delete or rename it (depending on which page you are on).  Then you would need to go to the form again and do this again for each tag.</p>

<p>With this tool, you can get a list of tags with certain conditions.  Eg "show me all tags who have between 1 and 3 associated posts".  You can then loop through that list and for each tag the tool will present you the option to delete, rename or skip it.</p>

<p>Of course it can do more, but this was my focus: making balancing an account as pleasant as possible.  Other features, such as adding or editing single posts are considered less important as these things can be done just fine on the del.icio.us page.</p>

<h3>Current state</h3>

<p>Currently the tool seems to do what it is intended to (and pretty well, at least for me: I cleaned up my account from about 400 to 80 tags during development of this program).<br />

However I don't give any warranty, the tool is only moderately documented, performs little to no user input checking and isn't very well tested so don't expect any higher quality then that of the average Microsoft product.<br />

This program shouldn't empty your del.icio.us account or blow up your computer but if it does I cannot be held responsible.</p>

<h3>Supported features</h3>

<ul>

<li>[t] View Tag: Based on the name of tag you enter, you can see the associated posts and edit or rename the tag.</li>

<li>[ts]  View Tags: Shows you all tags based on certain criteria:

<ul>

<li>lowerlimit: the minimum amount of times a tag has to be associated to a post</li>

<li>upperlimit: the maximum amount of times a tag has to be associated to a post</li>

<li>hard limit: the maximum number of tags you wish to edit/view at once</li>

</ul>

<p>You can decide to view associated posts for each tag, and you can choose wether to only show the tags, or to present you a menu with options for each one.  I usually use the latter, along with associated posts viewing enabled.</li>

<li>[p] View Post: shows you the first hit based on a tag and url*</li>

<li>[ps] View Posts: shows you all posts based on a tag and url*</li>

<li>[lu] Date of last update: Shows you the time when the data (on the serverside) last changed</li>

</ul>

<p>*: url based searching is still buggy, I'm working on it.</p>

<h3>Plans for the future</h3>

<p>My goals for upcoming releases are (aside from bug fixing) to add features to let you do stuff that you currently can't do or at least not in a productive manner.  </p>

<h4>Known bugs to be fixed</h4>

<ul>

<li>URL-based post querying doesn't work</li>

<li>Timezone not taken into account or something like that, because the "last updated" date has a 2hrs offset for me</li>

<li>During list iteration tags that have been renamed/deleted already still appear in posts for other tags</li>

<li>Issue less load on the Del.icio.us webservice by using the updated date (gonna take a look at Ed's caching system for that)</li>

</ul>

<h4>Features I have on my mind</h4>

<ul>

<li>Try to hide password as it is typed in by user</li>

<li>When a tag has many associated posts, automatically show them more concisely</li>

<li>An "are you sure?" thing when you want to rename to a tag that already has many (say: 40) associated posts</li>

<li>A mode to only show tags that differ one letter, or differ several letters, as long as they have enough in common (say: 2/3, 1/2 or user configurable)</li>

<li>An improved commandline that allows commands/queries like "rm tag1 tag2 tag3"

</ul>

<h3>Prerequisites</h3>

<ul>

<li>A shell (such as bash)</li>

<li>PHP 4 or higher, with php-cli enabled (default)</li>

<li>A del.icio.us account, preferrably a very messy one</li>

</ul>

<h3>Download</h3>

<p><a href="http://users.edpnet.be/dieter/php_delicious_client_v05.zip" onClick="javascript:urchinTracker ('/files/php_delicious_client_v05.zip');">release v0.5 (1-7-2007)</a></p>

<h3>Installation</h3>

<p>Unpack the archive and put the directory somewhere on your system.  On Linux /usr/local/bin/ is usually a good choice.<br />

Make sure pdclient.php has the executable flag (x).  If the directory is in your $PATH, you can just type pdclient.php on your console, otherwise you need to type &lt;path to program&gt;/phpdeliciousclient/pdclient.php or edit your $PATH.</p>

<p>You could also create a symlink in a good directory: <em>ln -s &lt;path to program&gt;/phpdeliciousclient/pdclient.php /usr/local/bin/pdclient</em></p>

<h3>Usage</h3>

<p>I choose a mysql-like syntax for invoking the program.  Valid options are:</p>

<ol>

<li><em>pdclient.php</em></li>

<li><em>pdclient.php --help</em></li>

<li><em>pdclient.php --user &lt;delicious username&gt;</em></li>

<li><em>pdclient.php --user &lt;delicious username&gt; --password</em></li>

<li><em>pdclient.php --user &lt;delicious username&gt; --password &lt;delicious password&gt;</em></li>

</ol>

<p>With method #4, the program will ask your password upon execution.  With the other methods this doesn't happen.  You can always update your account information from the menu. (<em>account setup</em>)</p>

<p>In the program prompt you can always type 'h' to get help.  Aside from that, just try the options, you'll figure it out in no time.</p>

<h3>Bug reports &amp; feature requests</h3>

<p>You can report bugs or file feature requests through the comment system on this page. Choose an appropriate title and prefix it with "Bug: " or "Feature: "</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/getting_statistics_about_events_that_dont_trigger_page_requests_with_google_analytics/">Getting statistics about events that don&#39;t trigger page requests with Google Analytics</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/getting_statistics_about_events_that_dont_trigger_page_requests_with_google_analytics/" rel="bookmark">
					<time class="entry-date" datetime="2007-06-24 19:27:42 -0400 EDT">
						June 24, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>You probably already heard of <a href="www.google.com/analytics">Google Analytics</a>.  It's a pretty nice program that (<em>basically</em>) gathers data about visits of your site and creates reports of it.  It works by including some JavaScript code on your page, so that each page request triggers a call to the Analytics tracker sending along some data such as which page is requested and which resolution was used. (no personal or other privacy-sensitive data is sent).  But here is the deal!  I just discovered that you can also track <a href="http://www.google.com/support/googleanalytics/bin/answer.py?answer=55597&amp;topic=11012">events that don't require page requests!</a><br />

Think of links to files or to external locations, JavaScript events (Ajax anyone?) or even Flash events (but who is crazy enough to use Flash anyway?).</p>

<p>The principle is very easy: similar to normal page loads which trigger a call of the JavaScript function <em>urchinTracker()</em> you just add <em>onClick="javascript:urchinTracker('/this-is-something-i-want-to-track');"</em> to your hyperlink.<br />

You can even work with subdivisions.  The examples on the help pages for <a href="http://www.google.com/support/googleanalytics/bin/answer.py?answer=55529">download</a> and <a href="http://www.google.com/support/googleanalytics/bin/answer.py?answer=55527">outbound</a> links propose <em> urchinTracker('/downloads/map');</em> and <em><br />

urchinTracker('/outgoing/example_com');</em> respectively.</p>

<p>Now we also know why Google <a href="http://www.google.com/support/googleanalytics/bin/answer.py?answer=66983#0.1.1_step4">says</a> the "normal" tracking code should be put at the end of the page, right before the <em>&lt;/body&gt;</em> tag.  I always wondered why they recommend this weird location.  This is because calls like the ones above should happen prior to the "normal" one.</p>

<p>If only I had known this earlier.  I would love to have known an accurate number of downloads of my thesis text (and the number of unique downloaders) :-)</p>

<p>For those who don't have Google Analytics setup yet:<br />

<a href="drupal.org/">Drupal</a> users should install the <a href="http://drupal.org/node/49388">Drupal Google Analytics</a> module.<br />

<a href="www.cakephp.org/">CakePHP</a> users can put the <a href="http://www.google.com/support/googleanalytics/bin/answer.py?answer=66983#0.1.1_step4">Tracking code</a> in the layout file or even in an element.</p>

<p>Have fun tracking all events on your website!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/drupal/index.html" rel="tag">drupal</a>
            
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/bye_google_sandbox/">Bye, Google sandbox!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/bye_google_sandbox/" rel="bookmark">
					<time class="entry-date" datetime="2007-06-18 12:01:13 -0400 EDT">
						June 18, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Today I'm finally out of Google's Sandbox.</p>

<p>Google has this system called the sandbox where new pages go into for 6 months, in order to prevent scammers/spammers from resurrecting dummy pages - and scoring well in Google - all the time.<br />

During these 6 months a page will score very bad in search results, even if it should rate very well for the specific keywords.</p>

<p>Smart people will look at my first post, dated 03/04/2007, but keep in mind that before this blog existed I already had a dummy page with my name on (the keywords I want to score on) as soon as I could because back then I already knew I wanted to put a blog here and I wanted to get out of the sandbox as soon as possible.</p>

<p>I know some people who kept forgetting my URL and didn't find it in Google, well, you will find me now!</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/cory_doctorow_you_cant_make_bits_harder_to_copy/">You can&#39;t make bits harder to copy</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/cory_doctorow_you_cant_make_bits_harder_to_copy/" rel="bookmark">
					<time class="entry-date" datetime="2007-06-02 13:06:40 -0400 EDT">
						June 2, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I just watched <a href="http://www.youtube.com/watch?v=xgXwmXpaH2Q">Cory Doctorow's talk</a> which is part of the Authors@Google series on youtube.</p>

<p>He made some great points about where the (music) industry gets/does it wrong and about some fundamental flaws in our law systems (especially with regards to copyright).  All of which are of course results of the challenges imposed by the "information age". (which I also introduced in <a href="/open_source_softwarepatenten_vanuit_ethisch_perspectief">my paper about open source and software patents (dutch)</a>)</p>

<p>I never really looked into the technical side of DRM but Cory made it very clear:<br />

DRM systems such as AACS are just "giving the cyphertext, the cypher and the key to the attacker and relying on him to not combining those except under circumstances as you dictate" which is of course - from a technical/cryptographic point of view - plain nonsense.  It just doesn't work and can't be made to work (although some companies like to make believe their clients without technical backgrounds that it is possible).<br />

Hence his quote <em>"you can't make bits harder to copy"</em>.<br />

Our friend Wesley (aka profoX) also <a href="http://wesley.debianbox.be/2007/01/14/hd-dvd-aacs-gekraakt/">pointed out this fundamental problem earlier.</a></p>

<p>Go check it out! I found it a bit hard to follow at times but you can pick up interesting stuff from it, and it encourages further thinking.  If I had seen this video earlier I would haved mentioned/discussed some of his points in my <a href="/open_source_softwarepatenten_vanuit_ethisch_perspectief">paper (dutch)</a>.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/information-age/index.html" rel="tag">information age</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/drag_n_drop_tutorial_with_cakephp_ajax_prototype_scriptaculous/">Drag &#39;n drop tutorial with the CakePHP 1.2 Ajax helper, Prototype framework and Scriptaculous library</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/drag_n_drop_tutorial_with_cakephp_ajax_prototype_scriptaculous/" rel="bookmark">
					<time class="entry-date" datetime="2007-05-29 21:25:13 -0400 EDT">
						May 29, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h3>Introduction</h3>

<p>During the development of my <a href="/masterproef">thesis</a> I wanted to create a drag 'n drop interface.  But I never did anything like that, I never used CakePHP's Ajax helper and neither made I ever use of more advanced functionalities of Scriptaculous/Prototype.  Hell I even never touched Ajax before this! </p>

<p>Although there are some basic CakePHP/Ajax tutorials out there, I still had a hard time because some knowledge about Ajax (in CakePHP) was assumed in all of those.  After a lot of googling I even found a tutorial called <a href="http://www.dustinweber.com/blog/_archives/2007/4/4/2859177.html">CakePHP: Sortable AJAX Drag &amp; Drops - The Basics</a>  <br/>"Perfect!" I thought, until after staring at the article for a long while and I started to notice nowhere in the article "$ajax->drag", "$ajax->drop" or "$ajax->dropRemote" is used.  (those are calls on the CakePHP Ajax helper to enhance objects to become draggable, or to become a dropbox where draggables can be dropped into).  So the only more or less suited tutorial about drag 'n drop was actually about sorting and didn't use the drag/drop function calls at all.  Even though it contains very useful information.</p>

<p>Long story short:  I finally got it working (thanks to Krazylegz and kristofer and possibly others too, it has been a while so I may forget someone ;-), and learned a lot in the process.  I will share what I learned with you guys so that hopefully it's a bit easier for you then what I had to go through.</p>

<h3>Prerequisites</h3>

<p>CakePHP.  I used 1.2 but I think this will work on 1.1 too (because the Ajax helper is in there for a long time.  it's even fully documented in the 1.1 manual)<br />

Scriptaculous &amp; Protoype libraries.  See <a href="http://manual.cakephp.org/chapter/helpers">the cake manual</a> on how to install these.  Don't close this page after installing the libs, because it also explains the possibilities of the Ajax helper and is a reference that you <em>will</em> need!  The <a href="http://api.cakephp.org/1.2/class_ajax_helper.html">api reference</a> reveals even more possibilities, but the former page should do.</p>

<h3>Let's get started!</h3>

<p>Instead of showing a really simple example, I'll give a skeleton example based on a webstore-scenario.  You can have multiple articles (draggables) and 2 droppables: a cart and a thrashbin.  Dropping an article in the cart adds the article to your order (which I usually keep in the session) and updates the view accordingly, dragging it from the cart into the thrashbin removes it from the session and updates the view too.<br />

I've left out the basics such as sql, models and controller business logic, and focused on the Ajax specifics.</p>

<p>The view-code can be combined in different elements but for simplicity let's assume there is only 1 view file.<br />

Keep in mind that each object where you want to assign some functionality to (such as draggable, droppable) must have a unique DOM id.  It doesn't matter if it's a div or span or p or whatever, as long as it has a unique id.</p>

<p>The view looks like this:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">&lt;![CDATA[</span>

<span style="color: #BC7A00">&lt;?php</span> <span style="color: #008000; font-weight: bold">foreach</span>(<span style="color: #19177C">$articles</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #19177C">$article</span>)<span style="color: #666666">:</span> <span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">&lt;div id=&quot;&lt;?php</span> <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$article</span>[<span style="color: #BA2121">&#39;Article&#39;</span>][<span style="color: #BA2121">&#39;id&#39;</span>]; <span style="color: #BC7A00">?&gt;&quot;&gt;</span>

<span style="color: #BC7A00">   &lt;?php</span> <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$article</span>[<span style="color: #BA2121">&#39;Article&#39;</span>][<span style="color: #BA2121">&#39;description&#39;</span>]; <span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">&lt;/div&gt;</span>

<span style="color: #BC7A00">&lt;?php</span> <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$ajax</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">drag</span>(<span style="color: #19177C">$article</span>[<span style="color: #BA2121">&#39;Article&#39;</span>][<span style="color: #BA2121">&#39;id&#39;</span>],<span style="color: #008000; font-weight: bold">array</span>(<span style="color: #BA2121">&#39;revert&#39;</span><span style="color: #666666">=&gt;</span><span style="color: #008000; font-weight: bold">true</span>)); <span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">/*</span>

<span style="color: #BC7A00">   the revert thing will make the draggable return to it&#39;s original position.  Set this to false and the object will stay where you put it.</span>

<span style="color: #BC7A00">   This does not have anything to do with a function call being made btw, that&#39;s the job for the draggables</span>

<span style="color: #BC7A00">*/</span>

<span style="color: #BC7A00">&lt;?php</span> <span style="color: #008000; font-weight: bold">endforeach</span>; <span style="color: #BC7A00">?&gt;</span>





<span style="color: #BC7A00">&lt;div id=&quot;cart&quot;&gt;</span>

<span style="color: #BC7A00">   &lt;?php</span> <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">requestAction</span>(<span style="color: #BA2121">&#39;/controller/showcart&#39;</span>); <span style="color: #BC7A00">?&gt; // this call is not necessary.  You can use it to fill the &lt;div&gt; with some content to start with</span>

<span style="color: #BC7A00">&lt;/div&gt;</span>



<span style="color: #BC7A00">&lt;div id=&quot;thrashbin&quot;&gt;</span>

<span style="color: #BC7A00">&lt;/div&gt;</span>



<span style="color: #BC7A00">&lt;?php</span>

   <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$ajax</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">dropRemote</span>(<span style="color: #BA2121">&#39;cart&#39;</span>,<span style="color: #008000; font-weight: bold">null</span>,<span style="color: #008000; font-weight: bold">array</span>(<span style="color: #BA2121">&#39;url&#39;</span> <span style="color: #666666">=&gt;</span> <span style="color: #BA2121">&#39;/controller/addarticle/&#39;</span>,<span style="color: #BA2121">&#39;with&#39;</span><span style="color: #666666">=&gt;</span><span style="color: #BA2121">&#39;{draggedid:element.id}&#39;</span>,<span style="color: #BA2121">&#39;update&#39;</span><span style="color: #666666">=&gt;</span><span style="color: #BA2121">&#39;cart&#39;</span>));

   <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$ajax</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">dropRemote</span>(<span style="color: #BA2121">&#39;thrashbin&#39;</span>,<span style="color: #008000; font-weight: bold">null</span>,<span style="color: #008000; font-weight: bold">array</span>(<span style="color: #BA2121">&#39;url&#39;</span> <span style="color: #666666">=&gt;</span> <span style="color: #BA2121">&#39;/controller/removearticle/&#39;</span>,<span style="color: #BA2121">&#39;with&#39;</span><span style="color: #666666">=&gt;</span><span style="color: #BA2121">&#39;{draggedid:element.id}&#39;</span>,<span style="color: #BA2121">&#39;update&#39;</span><span style="color: #666666">=&gt;</span><span style="color: #BA2121">&#39;cart&#39;</span>));

<span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">/*</span>

<span style="color: #BC7A00">   these two calls make objects with DOM id&#39;s &#39;cart&#39; and &#39;thrashbin&#39; droppable.  When an object is dropped into them, the actions defined by &#39;url&#39; are called.</span>

<span style="color: #BC7A00">   The &#39;with&#39;=&gt;&#39;{draggedid:element.id} passes the id of the dropped element to the function that is called (on the background, no page refresh or anything like that!).</span>

<span style="color: #BC7A00">   The update thing makes sure that the entire output of the requestAction call is displayed inside the &lt;div id=&quot;cart&quot;&gt;&lt;/div&gt;.</span>

<span style="color: #BC7A00">   So that means that the page will update the part of the page which is specified (dom id &#39;cart&#39;) when the output from the requestAction call is received</span>

<span style="color: #BC7A00">*/</span>

<span style="color: #BC7A00">]]&gt;</span>
</pre></div>
<p></p>

<p>The controller would have functions like this:</p></p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">&lt;![CDATA[</span>

<span style="color: #BC7A00">&lt;?php</span>



<span style="color: #408080; font-style: italic">// this function can be used to show initial contents of the cart.</span>

<span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">showcart</span>(){

    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">set</span>(<span style="color: #BA2121">&#39;articles&#39;</span>,<span style="color: #008000; font-weight: bold">false</span>); <span style="color: #408080; font-style: italic">/* no articles bought yet */</span>

    <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">render</span>(<span style="color: #BA2121">&#39;cart&#39;</span>);

    <span style="color: #408080; font-style: italic">// (read on to find out more about this view)</span>

}



<span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">addarticle</span>(){

<span style="color: #408080; font-style: italic">/*</span>

<span style="color: #408080; font-style: italic">   The DOM id of the element that has been dragged into here can be found in $this-&gt;params[&#39;form&#39;][&#39;draggedid&#39;].</span>

<span style="color: #408080; font-style: italic">   You can use that id to do something like $this-&gt;Article-&gt;findById() to add the article to the session.</span>

<span style="color: #408080; font-style: italic">   At the end of this function the entire contents of the &lt;strong&gt;view&lt;/strong&gt; file will be returned (and rendered inside the &lt;div&gt; with DOM id &#39;cart&#39;.)</span>

<span style="color: #408080; font-style: italic">   The layout won&#39;t be rendered, only the view, since this is an Ajax call (the difference is autodetected by Cakes RequestHandler) </span>

<span style="color: #408080; font-style: italic">   You could do something like this:</span>

<span style="color: #408080; font-style: italic">*/</span>

   <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">set</span>(<span style="color: #BA2121">&#39;articles&#39;</span>, <span style="color: #19177C">$all_bought_articles_from_the_session</span>);

   <span style="color: #19177C">$this</span><span style="color: #666666">-&gt;</span><span style="color: #7D9029">render</span>(<span style="color: #BA2121">&#39;cart&#39;</span>);

}



<span style="color: #408080; font-style: italic">// this function is similar to the one above but instead removes one article from the session and renders the same view ;-)</span>

<span style="color: #008000; font-weight: bold">function</span> <span style="color: #0000FF">removearticle</span>(){

}

<span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">]]&gt;</span>
</pre></div>
<p></p>

<p>The view controller/cart.ctp could look something like this:</p></p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">&lt;![CDATA[</span>

<span style="color: #BC7A00">&lt;ul&gt;</span>

<span style="color: #BC7A00">&lt;?php</span> <span style="color: #008000; font-weight: bold">foreach</span>(<span style="color: #19177C">$articles</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #19177C">$artikel</span>)<span style="color: #666666">:</span><span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">&lt;li&gt;&lt;?php</span> <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #19177C">$article</span>[<span style="color: #BA2121">&#39;Article&#39;</span>][<span style="color: #BA2121">&#39;id&#39;</span>]; <span style="color: #BC7A00">?&gt;&lt;/li&gt;</span>

<span style="color: #BC7A00">&lt;?php</span> <span style="color: #008000; font-weight: bold">endforeach</span>; <span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">&lt;/ul&gt;</span>



<span style="color: #BC7A00">&lt;?php</span> <span style="color: #008000; font-weight: bold">if</span>(<span style="color: #666666">!</span><span style="color: #19177C">$articles</span>) <span style="color: #008000; font-weight: bold">echo</span> <span style="color: #BA2121">&quot;No articles in the cart!&quot;</span>; <span style="color: #BC7A00">?&gt;</span>

<span style="color: #BC7A00">]]&gt;</span>
</pre></div>
<p></p>

<p>There you have it.  All explanations are inside the sources, I hope it&rsquo;s clear enough.  If not, just ask :-)</p></p>

<h3>Common misconceptions</h3>

<p>From reading many (outdated?) articles about Ajax in cake I noted a lot of information that was not correct.  Here they are:</p>

<ul>

<li>It is <em>not</em> necessary to explicity pass the 'ajax' layout as an argument to the render call.  Eg you don't need to do this:  $this->render('cart', 'ajax');  You can do $this->render('cart'); (or even no explicit render call at all, if the view file is the same as the action name of your controller) Cakes RequestHandler automatically detects when it's dealing with an ajax call, and in that case won't render the layout, only the view.</li>

<li>It is <em>not</em> necessary to declare the UTF-8 character encoding in your layout or view</li>

<li>You <em>don't</em> need $this->autoRender =false; in the controller.  Unless maybe you absolutely don't want to render anything.</li>

</ul>

<h3>The end</h3>

<p>There you have it.  I hope everything is clear.  If not, ask on !</p>

<p>For those who don't have it already, I really recommend <a href="http://www.getfirebug.com/">The firebug firefox extension</a>.  Not only is it a great aid when designing, it's also perfectly suited for debugging Ajax calls.  It can show you exactly what happens when you drag an item in a droppable, what request is being made, what is being returned, etc.<br />

This is explained in this movie:<a href="http://www.youtube.com/watch?v=W4jXAaEMp2M">Introduction to Debugging AJAX Application with Firebug</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/open_source_softwarepatenten_vanuit_ethisch_perspectief/">Open source en softwarepatenten vanuit een ethisch perspectief</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/open_source_softwarepatenten_vanuit_ethisch_perspectief/" rel="bookmark">
					<time class="entry-date" datetime="2007-05-29 00:53:08 -0400 EDT">
						May 29, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Voor school moest ik een ethisch verslag schrijven.<br />

Hier moesten 3 elementen in voorkomen:</p>

<ul>

<li>Inleidende tekst / Persoonlijke reflectie over beroeps- en bedrijfsethiek</li>

<li>Ethische beschouwingen bij het eindwerk</li>

<li>Uitgebreidere verhandeling met ethische beschouwingen over een vraagstuk naar keuze uit het domein van wetenschap, techniek, beroeps- en bedrijfsleven.  In mijn geval is dit vraagstuk naar keuze "open source en softwarepatenten" geworden</li>

</ul>

<p>Zoals sommigen onder jullie weten vind ik ethiek een heel belangrijk aspect in het leven en ik ben dan ook blij dat ik het issue van open source en softwarepatenten verder heb kunnen uitdiepen, want dit is iets waar ik in geinteresseerd ben.</p>

<p>Mijn werkje kan je <a href="/files/portfolio_ethiek_dieter_plaetinck(nl).pdf">hier</a> downloaden.  Lees het gerust door en laat me weten wat je ervan vindt!</p>

<p>Een heel interessant artikel dat ik ben tegengekomen (wel, eigenlijk mailde de docent van Ethiek het me door ;-) is <a href="http://www.kakupesa.net/kakk/docs/culteng2006_preprint.pdf">Community Ethics and Challenges to Intellectual Property</a> geschreven door Kaido Kikkas.  Neem ook dit zeker door want die kerel slaat de nagel op de kop!<br />

Bovenstaande tekst heeft ook het levensverhaal van Edward Howard Armstrong aangehaald.  Toen ik hierover las heb ik direct zijn hele <a href="http://en.wikipedia.org/wiki/Edwin_Howard_Armstrong">biografie op wikipedia</a> doorgenomen. In het kort komt het er op neer dat die persoon enkele geniale uitvindingen heeft gedaan, maar het bedrijf waarvoor hij werkte heeft via dure rechtzaken hem in de zak gezet en geruineerd.  Uiteindelijk ging zijn huwelijk en zijn hele leven eraan kapot.  En dan heeft hij zelfmoord gepleegd.<br />

Ongelooflijk hoe ver het egoisme van een bedrijf kan gaan.  Laten we dan ook leren uit de geschiedenis en kritisch staan tegenover de nieuwe elementen waar we tegenover staan zoals intellectuele eigendommen en patenten.  We willen toch niet dezelfde fouten maken?</p>

<p>In mijn zoektocht naar meer info over deze man stootte ik op deze pagina: <a href="http://world.std.com/~jlr/doom/doom_eng.htm">doomed engineers</a>.  Neem deze even door!</p>

<p>Last but not least wil ik bij deze ook iedereen de film <a href="http://www.revolution-os.com/">Revolution OS</a> aanraden.  Het is al lang geleden dat ik hem gezien heb, maar hij geeft een prima beeld over de opgang van vrije software (en Linux in het bijzonder), en je leert er vooral ook bij over enkele onethische praktijken van softwaregiganten, you know which one I mean...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/information-age/index.html" rel="tag">information age</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/thesis_finished/">Thesis finished</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/thesis_finished/" rel="bookmark">
					<time class="entry-date" datetime="2007-05-24 16:55:34 -0400 EDT">
						May 24, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Yesterday, after a night of searching and fixing spelling errors, things that could be better explained and other small details,<br />

I got my thesis printed and delivered the six books to my school.<br />

<br />

I updated the <a href="/masterproef">masterproef</a> page where you can now download the full 79 page report.</p>

<p>Thanks to <a href="http://www.lievendekeyser.net/">Lieven</a> for staying up late proposing corrections for my thesis.  ( He knows all about how it is for a student who still has to do some work in those last few hours... hehe )<br />

Also thanks <a href="http://blog.sanderfiers.com/">Sander</a>! He woke up at 7 'o clock to burn my CD's (my cd-burner is broken) and driving me to <a href="http://www.guthorel.be/kopieservice.html"> Guthorel copy center</a> ( who offer a great service btw!  And they were pretty cheap: 54 euro's for printing and binding 6 reports)<br />

Also thanks to Stefan for burning me that extra 7th disk which - apparently - was needed instead of 6 :p</p>

<p>Of course I have more people to thank, but they are already mentioned in my report ;-)</p>

<p>Now let's hope I get some good results for all the hard work that went into this ;-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/thesis/index.html" rel="tag">thesis</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/i_just_became_a_system_and_network_architect/">I just became a &#34;System &amp; Network Architect&#34;</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/i_just_became_a_system_and_network_architect/" rel="bookmark">
					<time class="entry-date" datetime="2007-04-17 20:11:07 -0400 EDT">
						April 17, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I just signed my contract at <a href="http://incrowd.be/">Incrowd</a>, the company behind sites such as <a href="http://redbox.be/">redbox</a> and <a href="http://www.facebox.com/">facebox</a>.</p>

<p>I will be working there in a team of all young, enthusiastic people.  Among those, some people are already familiar to me:  my old friend <a href="http://www.lievendekeyser.net/">Lieven</a> (we've played in a band together but kept in touch afterwards) and my ex-classmate <a href="http://www.jurriaanpersyn.com/">Jurriaan</a>.  Both of them love their jobs btw :-).</p>

<p>My official title is "System &amp; Network architect".<br />

Things I will be doing there is  keeping the "lower level" (hardware, network, databases) secure, stable and performing well.<br />

There will be quite some variety: working together with the dev-team, optimizing where possible, but also testing fancy hardware and software setups, hacking some code, deciding which routes we'll take and administering the systems.<br />

Of course it will be in a <a href="http://en.wikipedia.org/wiki/Free_software">sane</a> <a href="http://en.wikipedia.org/wiki/Open_standard">environment</a> :-)  Otherwise I would never have signed.</p>

<p>Those who know me well will see that all this stuff is actually the kind of things I'm messing with in my spare time (among others of course), so these are things that I'm really interested in.  I'm anxious to start, I even already have a few ideas in my head for stuff I want to check/propose, but of course I'll have to wait a bit:  I have to finish my <a href="/masterproef">thesis</a>, then exams, then (hopefully ;-) ) graduate and after a small vacation my term starts.</p>

<p>PS: We (I can say this now ;-) are still hiring, check our <a href="http://incrowd.be/jobs.html">jobs</a> page.</p>

<p>UPDATE: Incrowd <a href="http://corporate.netlog.com/blog/2007/04/facebox-becomes-netlog/">has become</a> <a href="http://nl.netlog.com/">Netlog</a> </p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/netlog/index.html" rel="tag">netlog</a>
            
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/debian_changing_route_the_end_of_the_perfect_server_distribution/">Debian changing route: the end of the perfect server linux distribution?</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/debian_changing_route_the_end_of_the_perfect_server_distribution/" rel="bookmark">
					<time class="entry-date" datetime="2007-04-10 11:58:30 -0400 EDT">
						April 10, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>From the very little experience I have with <a href="http://www.debian.org/">Debian</a>, and from the stuff I've been reading about it, I think I can safely say Debian has always been a special distribution: packages always take very long to get into the stable tree, because Debian wanted to be a rock solid system where packages go through a lot of testing.  ("We release it when it's done")  The end result is a distro where you don't have the latest software, neither as much flexibility as, say <a href="http://www.gentoo.org/">Gentoo</a> or <a href="http://www.archlinux.org">Arch</a>: You'd many times need to adapt your way of doing things to the "Debian way" (or be prepared to look for help in really obscure places and probably break things) but the end result is a stable distro where everything works very decently.  That, combined with no licensing fees (unlike for example <a href="http://www.redhat.com">Red hat</a>), make it the perfect choice for a server in small companies, where money is more important then features such as professional support or official certifications.</p>

<p>However, it seems like Debian is taking a route that will make it lose it's advantages over other distributions in the server market:<br />

On april 8th <a href="http://www.debian.org/News/2007/20070408">Debian released version 4.0</a>.  But very soon an <a href="http://www.linux-watch.com/news/NS5673962628.html">article</a> popped up and drew my attention.<br />

It complains about several problems such as multiple NIC's just not working.  After reading this, I skimmed over <a href="http://www.debian.org/releases/etch/i386/release-notes/ch-information.en.html">"potential problems" in their release notes</a>, and what do we see?  Many small issues that could have been fixed by just taking a bit longer, often accompanied by lines such as "Although<br />

<package x> has been tested extensively, you may experience minor problems...".  Problems varying from devices not being created to environment variables blindly being overwritten.  (Come on, how hard is it too prevent that?)<br />

So Debian is changing their release mechanism (or was this just a one-timer?  Even then it's bad practice), thereby loosing it's major benefits over other distributions on the servermarket.<br />

Personally I don't think issues like these will make server administrators switch to something else, but they'll sure have some work on their hands if they decide to upgrade ;-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/figuring_out_cakephp_new_authcomponent/">Figuring out CakePHP&#39;s new AuthComponent</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/figuring_out_cakephp_new_authcomponent/" rel="bookmark">
					<time class="entry-date" datetime="2007-04-07 15:52:48 -0400 EDT">
						April 7, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>In the Cake community, there has always been much interest in authentication/authorization systems.  The issue of authentication has been addressed in several add-ons provided by the community, such as <a href="http://bakery.cakephp.org/articles/view/147">DAuth</a> (written by me), <a href="http://bakery.cakephp.org/articles/view/99">OthAuth</a> (written by <a href="http://www.devmoz.com/blog">Crazylegs</a>) and <a href="http://bakery.cakephp.org/tags/view/auth">many others</a>.</p>

<p>However, one of the additions to the 1.2 branch which is currently in active development , is a built-in auth module.  A module that isn't finished yet but it sure is worth it looking at.  (In fact I'm thinking about making a new dAuth version built on cake's own auth system.).  As most bakers know, there is very little information about the 1.2 branch in general, and the auth component in specific.  So what I will try to do, is delve in the code, mess with it, and explain my findings in this post.   For this first post it will be more trying to decipher the source code, messing with it will probably for a little later on.<br />

Disclaimer: not everything I'll say here will be correct, first of all because I'm not able to fully understand every piece of the source code (yet), secondly because the 1.2 api is still changing.</p>

<p>The version i use for this post is svn head. (revision 4758 at time of writing)</p>

<h3>The header</h3>

<p>So let's just open <a href="http://api.cakephp.org/1.2/auth_8php-source.html">cake/libs/controller/components/auth.php</a>.<br />

Reading the first comment we immediately see "Manages user logins and permissions."  This looks very important to me.  Seems like this component handles both authentication and access control.  It seems like the AuthComponent is able to interact with  the <a href="http://manual.cakephp.org/chapter/acl">ACL</a> system that we know from the 1.1 branch.  Multiple uses of the AclComponent ($this->Acl inside the component) confirm this.</p>

<h3>Member variables</h3>

<p>The AuthComponent has quite some member variables, the most important ones seem to me:</p>

<ul>

<li><strong>$userModel</strong> (aro's) &amp; <strong>$objectModel</strong> (aco's)</li>

<li><strong>$loginAction</strong>:  url for login action, null by default but we should set this (to something like 'users/login') when we want to use the component in our application. As usual AppController's beforeFilter() seems like a good place for that.</li>

<li><strong>$validate</strong>:  set to 'actions' or 'objects', depending on what you want to check the access for.  Actually there are more options, read on.  However: on first sight it seems like combinations of objects-actions aren't possible...Anyone knows more about this?</li>

<li><strong>$_loggedIn</strong>:  true/false</li>

<li><strong>$allowedActions</strong>: no user validation on these actions</li>

</ul>

<h3>Functions</h3>

<p>Now, let's move on to the available functions (the most important ones that is) ...</p>

<ul>

<li>

<strong>initialize(&amp;$controller)</strong> seems to be a new ( in 1.2) callback.<br />

Dispatcher calls $controller->_initComponents(), which (controller.php) in turn calls $component->init($this), which calls $tempComponent->initialize($controller).<br />

So this function is called automatically, and when that happens $controller->params are all copied to $this->params (by value).  Some more stuff happens but I don't think it's very important at this time.</li>

<li>The <strong>startup(&amp;$controller)</strong> callback is familiar to 1.1 users.  It is called in the startup-phase of the component, shortly after the initialize callback.  What happens here?

<ul>

<li>The password in $controller->data is hashed by using a call to "Security::hash(CAKE_SESSION_STRING . $password)". (called via $this->hashPasswords() which calls $this->password().<br />

After that $this->data = $controller->data;</li>

<li>A check whether ($this->allowedActions == array('*') || in_array($controller->action, $this->allowedActions)).<br />

In this case no further processing is needed: access is granted, i don't know why we return false here, though</li>

<li>Then we have 2 cases:<br />

Either we are at the login action (defined by $loginAction like mentioned earlier), or we are somewhere else.  I think it will be clear what happens when you study the code, but I do think it's important to mention that the actual login happens at line 274 ($this->login($data), function definition at 470).<br />

The identify function at line 624 is important too.  I guess this one checks the credentials.<br />

If we are somewhere else then $loginAction, access is checked at line 293 (function isAuthorized(), function definition at 332.<br />

Inside this function, $validate is assigned to $type, so it seems like not only 'actions' and 'objects' are valid values, but also 'association' and 'controller'.  I don't really get why this is made so complicated (the __authType() step for example.).</li>

</ul>

<p></li></p>

<p><li>Another callback new in 1.2 is <strong>shutdown(&amp;$controller)</strong>.  Unlike initialize, this one is mentioned on <a href="http://cake.insertdesignhere.com/posts/view/17">Nate&rsquo;s blog</a>.  It removes &lsquo;Auth.redirect&rsquo; from the session when the user is logged in.</li></p>

<p></ul></p>

<h3>Conclusion</h3>

<p>This was only a slight introduction, more research (and thus explanations) will happen later on and you can also expect some sample code.  Give me some time though ;-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/kwartee_4_2007_verslag/">Kwartee 4 2007 verslag</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/kwartee_4_2007_verslag/" rel="bookmark">
					<time class="entry-date" datetime="2007-03-19 12:09:06 -0400 EDT">
						March 19, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Dit weekend (17-18 maart) ben ik naar <a href="http://www.formaat.be/index.php?l1=5&amp;l2=18&amp;l3=19&amp;l4=129">Kwartee 4</a> geweest.<br />

<a href="http://www.formaat.be/index.php?l1=5&amp;l2=18&amp;l3=19">Kwartee weekends</a> worden georganiseerd door <a href="http://www.formaat.be/">Formaat</a> (vroeger bekend als VFJ) en ging door in <a href="http://www.destelheide.be/">vormingscentrum destelheide</a> te Dworp (dichtbij Halle, ten zuiden van Brussel).<br />

Twee man sterk (Steven en ik) vertegenwoordigden we <a href="http://www.jhsjatoo.org/">jeugdhuis SjaTOo</a>.</p>

<p>Steven volgde "bekijk het nuchter", een beleidsthema dat de drugs- en alcoholproblematiek behandelt.  In eerste instantie leek "ik ben nieuw in de rvb" voor mij heel interessant.  Ik zit ondertussen wel bijna een jaar in de rvb, maar een goed overzicht van alle belangrijke factoren heb ik nog niet gehad.  Dit ging echter niet door wegens te weinig geinteresseerden.  Alhoewel ik Stevens thema het beste alternatief vond wou ik toch iets anders doen, kwestie van globaal gezien zoveel mogelijk informatie te vergaren (de meeste jeugdhuizen komen met 4 a 8 personen).  Dan heb ik voor "cre-activiteit" gekozen.  Een thema waarbij je originele activiteiten leert bedenken en hoe je best promotie kan voeren.  Leek mij wel interessant.</p>

<p>Zaterdagmorgen moesten we in Wetteren de trein van 8:24 hebben.  Opstaan om 7uur gaat nooit goed, zeker niet op zaterdag, en nog minder als je de avond ervoor actief gekwist hebt bij de <a href="http://users.skynet.be/ksjlaarne/">ksj laarne</a>.<br />

Maar goed, alles ging volgens plan: een lift met de auto, 2 treinritten, een busreis en een kleine ochtendwandeling verder arriveerden we stipt op tijd om 10u.</p>

<p>De sessies zelf vielen voor mij een beetje tegen.  Pas op, ik heb vanalles bijgeleerd, maar ik had meer verwacht.  Op zaterdag hebben we vooral ideeen uitgewisseld tussen de jeugdhuizen onderling om zo tot nieuwe, originele activiteiten te komen.  Wat dacht je van een "oma- en oparty" waarbij jongeren verkleed gaan als bejaarden, of avonden waarbij iedereen op een podium zit zodat ze een stuk hoger zitten dan de toog?  Op zondag hebben we heel kort gezien hoe je goeie affiches maakt en hebben we een kleine oefening gedaan over hoe je een originele uitnodiging maakt of promotie voert in het algemeen.  De rest van de tijd (ongeveer de helft van het totaal) was basically gevuld met spelletjes en gesprekken die weinig of geen verband houden met een jeugdhuis.  Dit vond ik zonde van de tijd.<br />

Stevens sessies waren heel hands-on en leerrijk, gaande van praktische workshops (hoe rol je een joint, hoe herken je iemand die drug x of y heeft gebruikt,...) tot het uitwisselen van ervaring en adviezen over hoe je je beleid kan vorm geven.<br />

Gelukkig krijgen we hier achteraf nog een "syllabus" van, die ik (en de rest van het bestuur, medewerkers,...) nog eens kunnen nalezen. </p>

<p>Een ander aspect, dat minstens even belangrijk is als de sessies op zich, zijn de collega's die je ontmoet, waarmee je tussendoor ideeen kan uitwisselen, discussieren, en natuurlijk ook genoeg minder serieus kan zijn ;-).<br />

Velen zien dit weekend dan ook meer als een soort vakantie (en daar zit de fuif op zaterdagavond ook wel voor iets tussen) en bekijken de sessies als plezante tussendoortjes.</p>

<p>Op zondagavond, na het afscheid van formaat en onze nieuwe kennissen werd het tijd om huiswaarts te keren.<br />

Gelukkig kregen we een lift van Stijn en Pieter van <a href="http://www.jeugdhuisplectrum.be/">jeugdhuis 't plectrum</a> want de uren van de verschillende treinen kwamen niet meer zo mooi overeen.<br />

Thuisgekomen redelijk vroeg het bed in, want wat extra slaap kon ik wel gebruiken.</p>

<p>Nog eens een Kwartee meedoen zie ik zeker zitten, hopelijk krijgen we de volgende keer nog wat meer volk (medewerkers) mee :-)<br />

En nu verder aan het eindwerk werken...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/fosdem_2007_review/">Fosdem 2007 review</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/fosdem_2007_review/" rel="bookmark">
					<time class="entry-date" datetime="2007-03-15 21:02:41 -0400 EDT">
						March 15, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Every year, during a special weekend in February, the <a href="http://www.ulb.ac.be/">University Libre of Brussels</a> suddenly becomes a little more geeky.<br />

It's that time of the year when many European (and some inter-continental) colleagues join us at<br />

<a href="http://www.fosdem.org">Fosdem: the Free and Open source Software Developers' European Meeting</a> (more info <a href="http://www.fosdem.org/about/fosdem">here</a>).</p>

<p><a href="http://www.fosdem.org/2007/">This years edition</a> took place in the weekend of 24 - 2 - 2007.  And I was there, for the first time.  Saturday and Sunday :-)</p>

<p>Like usual the <a href="http://www.fosdem.org/2007/schedule/days">schedule</a> was pretty full, with lots of things happening at the same time, and only one thing a human being is able to attend at the same time.  Luckily however the 2 biggest rooms (Janson and Chavanne) were videotaped and the <a href="http://www.fosdem.org/2007/media/video">videos</a> are always made available online afterwards.  So knowing that, I could safely follow other rooms if I found those more interesting.</p>

<h3>Saturday</h3>

<p>The first talk started at 10:00h, and it's about an hour drive, if you don't get lost.<br />

But I need my sleep, especially the sparse kind of sleep after Friday evenings.  (same goes for my buddy <a href="http://ghosty.be/">Geert</a> who I could ride along with).  We headed off at 11h, and arrived somewhere around 12:30.  (Let's blame Brussels' bad road signaling for that).  </p>

<p>Missed the opening talks, and the "status of software patents" and "liberating java" talks which I'm was really interested in, but hey they were taped so no problemo ;-). During lunch break I explored the stands a bit, talked with some guys and picked up some reading material.</p>

<p>At the <a href="http://www.gentoo.org/">Gentoo</a> stand there was no merchandise to be found.  I asked whether merch would arrive, but they said they were afraid not.  (and they were right).  No Gentoo merchandise, that was bummer.  I really wanted a t-shirt or something like that.  Gentoo is one of my favorite distros.</p>

<p>At the gnome stand they had made a panel were people could write their favorite things (or things they hate) about gnome on post-its.  There were things like "gnome should use QT" replied by "qt should use gtk" and all kinds of jokes.  Then there was this guy who was repositioning all the post-it's in the shape of letters of kde.  I use neither (I use <a href="http://www.xfce.org/">xfce</a>) but this sure was a cool place to hang out during breaks.  </p>

<p>After that I followed the <a href="http://www.fosdem.org/2007/schedule/events/xorg">X.org talk</a>, <a href="http://www.fosdem.org/2007/schedule/speakers/keith+packard">Keith</a> (the project leader) was a real-funpants and told us all about the developers involved with Xorg.  Where they live, their tasks, favorite beers, and so on.  More of a talk for the community then the developers.</p>

<p>Next was <a href="http://www.fosdem.org/2007/schedule/events/aiglx">the aiglx one</a>.  Actually I preferred attending <a href="http://www.fosdem.org/2007/schedule/events/linuxbios">linuxBIOS</a> which I just find more interesting.  Besides, thanks to my nvidia card i can run GLX_EXT_texture_from_pixmap without aiglx or xgl, but hey, I guess the other guys are less fortunate so I decided to stick with them.  I can always check linuxBIOS later :-).   This talk was pretty advanced.  A real developers-talk you could say.  I certainly couldn't follow ;-)</p>

<p>After that came a talk about the state of <a href="http://www.fosdem.org/2007/schedule/events/linux_kernel"> the Linux kernel</a>.  It was quite interesting, again, this was a talk aimed at developers, which I'm totally not, but I'm a bit familiar with the kernel (running <a href="http://www.gentoo.org/">Gentoo</a> and following <a href="http://kerneltrap.org/">kerneltrap</a> a bit has it advantages) so I could follow, more or less.</p>

<p>Next I followed <a href="http://www.fosdem.org/2007/schedule/events/donators_return">the donators return</a> thing where people who donated (like me) can <a href="http://fosdem.org/2007/support/donate">win prizes</a>.  I didn't win anything but hey, still I felt the money was well spent.  (and I also got a free t-shirt ;-) )  One of <a href="http://www.sun.com/desktop/workstation/ultra20/">these</a> would certainly fit in my room though ;-))</p>

<p>One thing I just had to attend was the Gentoo devroom.  like I said: Gentoo is one of my favorite distributions.  Also, it was our Belgian irc-friend <a href="http://www.fosdem.org/2007/schedule/speakers/dimitry+bradt">Dimitry (aka diox)</a> who gave his talk so I just couldn't miss <a href="http://www.fosdem.org/2007/schedule/events/gentoo_future_discussion">his talk about Gentoo's future</a>.  This was the first devroom I followed and it was totally different then any other talk: it was more of an interactive talk between the devs and the audience.  In the audience were some real devs, but also lot's of "normal" communitypeople.  Next to me there even was a guy who was very new to Gentoo.  I was happy to tell him all about paludis, overlays and other concepts and terms of Gentoo.</p>

<p>After that, there were no more talks to attend, so I went by some stands again (to check if Gentoo merchandise might have arised, among others), met Geert again and, although it was pretty hard to find our way back in the (now darkened) city of Brussels, we managed to drive back home.</p>

<h3>Sunday</h3>

<p>A new day, and wow, so many cool talks to attend: metasploit, drupal, security testing, mozilla, mono, gplv3, the list goes on.  Luckily many of them were in Janson/Chavanne so I could safely skip these and head for...</p>

<p>the Gentoo devroom.  (yeah, sorry, Gentoo here Gentoo there.  My other favorite distro <a href="http://www.archlinux.org/">Arch Linux</a> wasn't featured anywhere, so Gentoo got all the attention)<br />

I missed the "programing with paludis" one (ouch! I would have liked that one) but I was there to hear <a href="http://www.fosdem.org/2007/schedule/speakers/mike+frysinger">Mike</a> talk about <a href="http://www.fosdem.org/2007/schedule/events/gentoo_council">Gentoo's inner workings</a>.  He told us all about Gentoo's history and how (by who) the project is managed.  That Daniel (the founder of Gentoo) left and came back (I found it remarkable he didn't mention <em>why</em> he left (to work at Microsoft).    Guess that wasn't important enough for the community)</p>

<p>After that <a href="http://www.fosdem.org/2007/schedule/speakers/chris+gianelloni">Chris</a> talked about <a href="http://www.fosdem.org/2007/schedule/events/gentoo_tinderbox_testing">the process that happens for making releases</a>.  I was impressed.</p>

<p>To fill the gap between 13h and 14h I wanted to follow <a href="http://www.fosdem.org/2007/schedule/events/jabber_oneteam">this</a> talk.  I have no idea what oneteam is, but I like jabber.  The room was stuffed with people though, and when opening the door you literally felt warm air coming out, so I decided to let the jabber guys in their oven :-)</p>

<p>After that some more Gentoo talks: <a href="http://www.fosdem.org/2007/schedule/events/gentoo_community_distro">"what makes Gentoo a community based distribution"</a> by <a href="http://www.fosdem.org/2007/schedule/speakers/christel+dahlksjaer">Christel</a> didn't make me believe Gentoo is any more community based then most other open source Linux distributions, but hey Christel was quite a joker and the community vibe in the room was nice.</p>

<p>After that <a href="http://www.fosdem.org/2007/schedule/speakers/marius+mauch">Marius</a> did a <em>great</em> job explaining the ins and outs of portage -especially the new ones- in his talk <a href="http://www.fosdem.org/2007/schedule/events/gentoo_portage">Portage: a look under the surface</a>.</p>

<p>After that <a href="http://www.fosdem.org/2007/schedule/speakers/alexander+faeroey">Alexander</a> did a talk called <a href="http://www.fosdem.org/2007/schedule/events/gentoo_bugday">future of the bugday project</a>.  This was pretty much the kind of information you get by reading the forums/newsletters.  Nothing new, but I don't think the talk intended to make groundbreaking revelations either ;-)</p>

<p>17 'o clock.  Damn.. time went fast.. Fosdem pretty much coming to end, luckily there was another nice topic I was really interested in: <a href="http://www.fosdem.org/2007/schedule/events/embedded_security_devices">Linux on embedded security devices</a>.  This talk wasn't very good though:   No kernel revelations.  No open source code.  No in-depth explanations.<br />

Basically a company showing it's product: an embedded device running Linux, running customized code and a presentation showing a scheme showing where they used technologies like SSL, dns or dhcp.  Boring...  And a little demo.<br />

Nice to see, but nothing more then that.</p>

<p>I think it must have been after this talk I went back to the stands to find <a href="http://christophe.vandeplas.com/">Christophe (aka chri)</a>, who I hadn't met yet but I had helped him a bit getting <a href="http://code.google.com/p/weids/">weids, the "Webbased Information Display System"</a> (which was created for fosdem) to work.<br />

After talking some time with chri the <a href="http://www.fsfeurope.org/">Free Software Foundation: Europe</a> got my attention, and I couldn't resist buying one of their lovely t-shirts.  I can't remember how much it cost me, but it was pretty expensive.  No problem though, as I know the money is in very good hands.</p>

<p>After that me and Geert drunk a beer, and then drove home again.</p>

<p>Fosdem was good.</p>

<h2>Did you know...?</h2>

<ul>

<li>I invited the <a href="http://www.cakephp.org/">CakePHP</a> guys to come?  Unfortunately none of them came, but maybe I can convince them next year!</li>

<li>The catering was allright and very, very cheap (and also run by volunteers)</li>

<li>Fosdem is mentioned in this <a href="http://www.gentoo.org/news/en/gwn/20070305-newsletter.xml">Gentoo newsletter</a>.  Including a picture of all the devs, shot by SeJo (sunday afternoon iirc)</li>

<li>You'll find many pictures <a href="http://www.fosdem.org/2007/media/pictures">here</a></li>

</ul>

<h2>Conclusion</h2>

<p>Most of the talks are aimed at developers, and developers certainly are the guys that should come.  Fosdem is the perfect place to meet, discuss (with both developers of your own team, as with devs of other projects that you depend on), learn and hack some code together.</p>

<p>For the community it's another story.  Many of the talks are too hard to follow, and those talks that are aimed at the community usually don't offer more information then what you would find on the websites, forums/mailinglists or newsletters.<br />

The fact that you can download lots of video material is great.  If you stay home you can still make up for it by watching the movies.<br />

It's cool to meet people though.  And if you want to visit stands of different projects (for example to buy merchandise).  That's imho the best reason for non-developers to come to fosdem.  But that's personal of course.</p>

<p>So who's coming with me to fosdem 2008? :-).</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/information-age/index.html" rel="tag">information age</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/my_favorite_bash_tricks/">My favorite bash tricks</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/my_favorite_bash_tricks/" rel="bookmark">
					<time class="entry-date" datetime="2007-03-14 23:38:54 -0400 EDT">
						March 14, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Hello everyone.<br />

This post is about <a href="http://www.gnu.org/software/bash/">bash</a>, the shell providing so many users easy access to the underlying power of their system.<br />

(not <a href="http://www.bash.org/">bash</a> the quote database, although i really like that website too ;-) )<br />

Most people know the basics, but getting to know it better can really increase your productivity.  And when that happens, you might start loving bash as much as I do ;-)</p>

<p>I assume you have a basic knowledge of bash, the history mechanism, and  ~/.bash* files.<br />

So here they are, my favorite tricks, key combo's and some bonus stuff:</p>

<h3>Tricks</h3>

<ul>

<li>"cd -" takes you back to the previous directory, wherever that was.  Press again to cycle back.</li>

<li>putting arguments between braces {like,so} will execute the command multiple times, once for each "argument".  Bash will make the cartesian product when doing it multiple times in 1 expression.  Some less-obvious tricks with this method are mentioned <a href="http://www.bhaskarvk.info/technology/bash-tricks.html">here</a></li>

<li>HISTIGNORE : with this variable you have control over which things are being saved in your history.  <a href="http://www.talug.org/events/20030709/cmdline_history.html">Here</a> is a nice explication.  Especially the space trick is very useful imho.</li>

<li>CD_PATH : <a href="http://www.caliban.org/bash/">Here</a> is a great explanation ;-)</li>

<li>readline (library used by bash) trick:  put this in your ~/.inputrc (or /etc/inputrc) :<br />

<pre><![CDATA[

"\e[5~": history-search-backward

"\e[6~": history-search-forward

]]></pre><p>This way you can do *something*+pageup/pagedown to cycle through your history for commands starting with *something*<br />

You can use the up/down arrows too, their codes are "\e[A" and "\e[B"

</li>

<li>for more "natural" history saving behavior (when having several terminals open): put this in .bash_profile: <br/><br />

<pre><![CDATA[PROMPT_COMMAND='history -a']]></pre><p> (write each command separately in a new entry, instead of all at shell exit).<br />

And type </p>

<pre><![CDATA[shopt -s histappend]]></pre><p> to append instead of overwrite. (this might be default on some distro's.  I think it was on Gentoo)</li>

</ul>

<h3>Shortcuts/keycombos</h3>

<ul>

<li>ctrl+r : search through your history.  Repeatedly press ctrl+r to cycle through hits.</li>

<li>ctrl-u : cut everything on the current line before the cursor.</li>

<li>ctrl-y : paste text that was cut using ctrl-u. (starting at the cursor)</li>

<li>!$: equals the last word of the previous command. (great when performing several operations on the same file)</li>

</ul>

<h3>Bonus material</h3>

<ul>

<li><a href="http://www.caliban.org/bash/index.shtml#completion">Bash completion</a>, an add-on for bash which adds completion for arguments of your commands.  It's pretty smart and configurable.  (it's in portage, and probably in repos of all popular distros out there)</li>

<li><a href="http://n01se.net/agriffis/nopaste/">This script</a> provides you an interface to the <a href="http://rafb.net/paste/">rafb pastebin</a>!</li>

<li>Recursively delete all .svn folders in this folder, and in folders below. "find . -name .svn -print0 | xargs -0 rm -rf"</li>

<li>Recursively count number of files in a directory: "find -not -type d | wc -l"</li>

</ul>

<h3>Conclusion</h3>

<p>Those were all important tricks I'm currently using.  On the web you'll find lots more useful tips :-).<br />

If that still isn't enough, there is also <a href="http://www.gnu.org/software/bash/manual/bashref.html">man bash</a> :o</p>

<p>With aliases and scripts (and involving tools like sed or awk) the possibilities become pretty much endless.  But for that I refer to <a href="http://tldp.org/LDP/abs/html/">tldp.org</a> and your favorite web search engine.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/blogpost1_hello_world/">Hello world!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/blogpost1_hello_world/" rel="bookmark">
					<time class="entry-date" datetime="2007-03-04 14:45:36 -0400 -0400">
						March 4, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Finally, my own website...<br />

I already wanted to get this up for a long time.  My initial idea was writing (and styling) it all from scratch using the marvelous <a href="http://www.cakephp.org">CakePHP</a> framework along with an authentication system i wrote, <a href="http://bakery.cakephp.org/articles/view/147">dAuth</a>.<br />

However, due to my lack of time I decided to use the excellent <a href="http://www.drupal.org">drupal</a> platform, of which I'm quite sure will get the job done equally well, while drastically liberating my time, so I can invest it in other projects :-)<br />

<a href="http://buytaert.net/">Dries Buytaert</a>'s talk on <a href="http://www.fosdem.org/2007/">fosdem</a> this year really helped on making that decision ;-)</p>

<p>So, what will this site be about?</p>

<ul>

<li>me</li>

<li>my interests

<ul>

<li><a href="http://en.wikipedia.org/wiki/FOSS">Free &amp; Opensource software</a>, and the thoughts/ideals behind it</li>

<li>PHP scripting/programming (I like C(++), bash and j2se too but I'm not as good at it as I am at php)</li>

<li>Audio recording/mixing/production</li>

<li>Drumming, one of my greatest hobbies</li>

<li>Music, bands, movies,... I like</li>

<li>productivity (<a href="http://en.wikipedia.org/wiki/Test-driven_development">TDD</a>, automation scripts, shell/DE tweaks, ...)

<li>ethics and philosophy, these aspects are really important in my life</li>

<li><a href="http://www.jhsjatoo.org/">Jeugdhuis SjaTOo</a>, our local youth club</li>

</ul>

<p></li></p>

<p></ul></p>

<p>Now let's get started ;-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
                <a href="http://localhost:1313//tags/drupal/index.html" rel="tag">drupal</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
		</span>
	</footer>
</article> 

			
		
		</div>
	</div>
	<div id="secondary">

	

	<div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">

        

        

		<aside id="categories-3" class="widget widget_categories">


    
     


    <br/>
	<h1 class="widget-title">Popular tags</h1>

    <a href="http://localhost:1313/tags/monitoring">monitoring</a>
    24
    <br/>
    <a href="http://localhost:1313/tags/devops">devops</a>
    22
    <br/>
    <a href="http://localhost:1313/tags/golang">golang</a>
    8
    <br/>
    <br/>
    <br/>

	<h1 class="widget-title">Other tags</h1>

    
        
            <a href="http://localhost:1313/tags/arch">arch</a>
            19
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/bash">bash</a>
            15
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/cakephp">cakephp</a>
            8
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/conf">conf</a>
            9
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/dauth">dauth</a>
            1
            <br/>
        
    
        
        
    
        
            <a href="http://localhost:1313/tags/drums">drums</a>
            1
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/drupal">drupal</a>
            5
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/foss">foss</a>
            45
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/git">git</a>
            3
            <br/>
        
    
        
        
    
        
            <a href="http://localhost:1313/tags/information-age">information-age</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/life">life</a>
            32
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/linux">linux</a>
            20
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/lua">lua</a>
            1
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/mail">mail</a>
            1
            <br/>
        
    
        
        
    
        
            <a href="http://localhost:1313/tags/music">music</a>
            5
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/mysql">mysql</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/n900">n900</a>
            2
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/netlog">netlog</a>
            6
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/openstack">openstack</a>
            1
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/perf">perf</a>
            10
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/photos">photos</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/php">php</a>
            11
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/productivity">productivity</a>
            6
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/python">python</a>
            5
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/real-life">real-life</a>
            2
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/thesis">thesis</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/travel">travel</a>
            2
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/uzbl">uzbl</a>
            6
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/vimeo">vimeo</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/web2.0">web2.0</a>
            9
            <br/>
        
    
</aside>


	</div>

</div>

</div>

		</div>

		<footer id="colophon" class="site-footer" role="contentinfo">

			<div class="site-info">
				<a href="http://gohugo.io">Proudly powered by Hugo</a>
			</div>
		</footer>
	</div>

	<script type='text/javascript' src='http://localhost:1313//js/functions.js'></script>
<script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
