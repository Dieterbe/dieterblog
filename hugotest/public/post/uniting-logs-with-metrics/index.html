<!DOCTYPE html>

<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title> &middot; Dieter blog</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<!--[if lt IE 9]>
	<script src="http://localhost:1313//js/html5.js"></script>
	<![endif]-->
    
    <link href="http://localhost:1313//index.xml" rel="alternate" type="application/rss+xml" title="Dieter blog" />

    <link rel='stylesheet' id='twentyfourteen-lato-css'  href='//fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />

    <link rel='stylesheet' id='genericons-css' href='http://localhost:1313//genericons/genericons.css' type='text/css' media='all' />
	<link rel='stylesheet' id='twentyfourteen-style-css' href='http://localhost:1313//css/style.css' type='text/css' media='all' />
	
	<script type='text/javascript' src='http://localhost:1313//js/jquery/jquery.js'></script>
	<script type='text/javascript' src='http://localhost:1313//js/jquery/jquery-migrate.min.js'></script>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="home blog masthead-fixed list-view full-width grid">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<div class="header-main">
			<h1 class="site-title"><a href="http://localhost:1313//index.html" rel="home">Dieter blog</a></h1>

			<div class="search-toggle">
				<a href="#search-container" class="screen-reader-text">Search</a>
			</div>

			<nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
				<button class="menu-toggle">Primary Menu</button>
				<a class="screen-reader-text skip-link" href="#content">Skip to content</a>
				<div class="nav-menu">
					<ul>
						
						<li class="page_item"> 
							<a href="/about/">about</a>
						</li>
						
						<li class="page_item"> 
							<a href="/talks/">talks</a>
						</li>
						
						<li class="page_item"> 
							<a href="https://twitter.com/Dieter_be">tweets</a>
						</li>
						
						<li class="page_item"> 
							<a href="https://github.com/Dieterbe">Github</a>
						</li>
						
					</ul>
				</div>
			</nav>
		</div>

		<div id="search-container" class="search-box-wrapper hide">
			<div class="search-box">
                <script type="text/javascript">
    function site_search(obj) {
    	var host = window.location.host;
        obj.q.value = "site:" + host + " " + obj.ss_q.value;
    }
</script>

<aside id="search-3" class="widget widget_search">
	<form role="search" class="search-form" action="//www.google.com/search" method="get" onSubmit="site_search(this)">

	<input name="q" type="hidden" />
	    <label>
	        <span class="screen-reader-text">Search for:</span>
	        <input name="ss_q" type="text" placeholder="Search ..." class="search-field" />
	    </label>
	    <input type="submit" value="Search" class="search-submit" />
	</form>
</aside>
			</div>
		</div>
	</header>

	<div id="main" class="site-main">


<div id="main-content" class="main-content">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

			<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/uniting-logs-with-metrics/"></a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/uniting-logs-with-metrics/" rel="bookmark">
					<time class="entry-date" datetime="0001-01-01 00:00:00 &#43;0000 UTC">
						January 1, 0001
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		In this post, I would like to explore the conceptual differences between metrics (timeseries of numerical datapoints) and logs, and see how we can unite them.

A timeseries looks like:
$dateA, valA
$dateB, valB
$dateC, valC

where the dates may not be always necessarily be stored, they are commonly implicit through via a specificed  interval. (like a datapoint every minute)

we will typically associate a key to this timeseries, for example

stats.site_requests.vimeo_com

or in metrics 2.0 terms:

{unit=Req/s site=vimeo.com}

Note also that every datapoint is often a paraphrased piece of information.  If the value for a given dateB of stats.site_requests.vimeo_com is X, it means we captured Y occurences of a request to vimeo.com during the dateB-dataA interval so that X = Y/(dateB-dateA)

A log on the other hand,
 looks like
{type=Req, site=vimeo.com, date=dateX}
{type=Req, site=api.vimeo.com, date=dateY, api_ver=3}

notes: logs in the same stream can have different dimensions, as shown here
if they all have the same value for a key, than that might move up to log metadata.


there is absolutely no guarantee about time interval between logs, and we store every single occurence of an event.

We're at an interesting point in ops,
ES is a commonly used solution to analyze logs, and aggregate them into statistics and numbers over time, mainly via kibana
graphite gives powerfull aggregation and mathematical primitives to apply over numeric timeseries, and via metrics2.0 and graph-explorer mean you can now query metrics and enable those primitives based on tags in their metadata.
and then there's influxdb; it's not really clear yet where its values lie, but it looks like it's flexible and powerfull enough to deal with timeresies and logs at the same time.  basically because it stores explicitly, has variable columns, and different rows in the same "table" can have values for a different set of columns.

why can't you use kibana for metrics?
why can't i have 1 interface to query information, whether it's from logs or metrics?


metric:
store key/identifier/metadata once, datapoints N times.
possibly some different metada over time.

log:
{
unit=Req
site=vimeo.com
timestamp


repeat metadata always

same information, different format

logs are good when you want to collect "everything" and try to make sense of it later.  Every message has all dimensions explicitly, so you
can later do any kind of analysis on this (with higher resource overhead)
metrics are good when you know in advance which *combinations of values dimensions* you'll be interested in, though their value diminishes the more combinations you track, otherwise you could just use logs and know you always have all combinations.

in this sense, information in metrics is like a pre-paraphrased form of the information of logs.




in the app, generating a log or a metric is a quickly & easily made difference, but it has long lasting effects further down the pipeline.
metrics/logging systems use separate channels and separate channels. and although tools exist to convert e.g. logs into metrics (logstash), it'smanual labor to get it up and running.
wouldn't it be nice to have a dashboard that can query metrics and logs transparantly, you don't know which is which, and it can show both on graphs.





with metric: either intrinsic or extrinsic. if unclear, logs are better, you can do use case dependent analytics

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
		</span>
	</footer>
</article> 


			
		
		</div>

	</div>
	<div id="secondary">

	

	<div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">

        

		<aside id="recent-posts-3" class="widget widget_recent_entries">

	
</aside>

		<aside id="categories-3" class="widget widget_categories">

	<h1 class="widget-title">Tag cloud</h1>

    
     
    
    <a href="http://localhost:1313/tags/arch">arch</a>
    19
    <br/>
    
    <a href="http://localhost:1313/tags/bash">bash</a>
    14
    <br/>
    
    <a href="http://localhost:1313/tags/cakephp">cakephp</a>
    7
    <br/>
    
    <a href="http://localhost:1313/tags/conf">conf</a>
    9
    <br/>
    
    <a href="http://localhost:1313/tags/devops">devops</a>
    23
    <br/>
    
    <a href="http://localhost:1313/tags/drupal">drupal</a>
    5
    <br/>
    
    <a href="http://localhost:1313/tags/foss">foss</a>
    43
    <br/>
    
    <a href="http://localhost:1313/tags/git">git</a>
    3
    <br/>
    
    <a href="http://localhost:1313/tags/golang">golang</a>
    8
    <br/>
    
    <a href="http://localhost:1313/tags/information-age">information-age</a>
    3
    <br/>
    
    <a href="http://localhost:1313/tags/life">life</a>
    33
    <br/>
    
    <a href="http://localhost:1313/tags/linux">linux</a>
    20
    <br/>
    
    <a href="http://localhost:1313/tags/lua">lua</a>
    1
    <br/>
    
    <a href="http://localhost:1313/tags/mail">mail</a>
    1
    <br/>
    
    <a href="http://localhost:1313/tags/monitoring">monitoring</a>
    25
    <br/>
    
    <a href="http://localhost:1313/tags/music">music</a>
    5
    <br/>
    
    <a href="http://localhost:1313/tags/mysql">mysql</a>
    3
    <br/>
    
    <a href="http://localhost:1313/tags/n900">n900</a>
    2
    <br/>
    
    <a href="http://localhost:1313/tags/netlog">netlog</a>
    6
    <br/>
    
    <a href="http://localhost:1313/tags/openstack">openstack</a>
    1
    <br/>
    
    <a href="http://localhost:1313/tags/perf">perf</a>
    10
    <br/>
    
    <a href="http://localhost:1313/tags/photos">photos</a>
    3
    <br/>
    
    <a href="http://localhost:1313/tags/php">php</a>
    9
    <br/>
    
    <a href="http://localhost:1313/tags/productivity">productivity</a>
    6
    <br/>
    
    <a href="http://localhost:1313/tags/python">python</a>
    5
    <br/>
    
    <a href="http://localhost:1313/tags/thesis">thesis</a>
    2
    <br/>
    
    <a href="http://localhost:1313/tags/travel">travel</a>
    2
    <br/>
    
    <a href="http://localhost:1313/tags/uzbl">uzbl</a>
    6
    <br/>
    
    <a href="http://localhost:1313/tags/vimeo">vimeo</a>
    3
    <br/>
    
    <a href="http://localhost:1313/tags/web2.0">web2.0</a>
    8
    <br/>
    
</aside>


	</div>

</div>

</div>

		</div>

		<footer id="colophon" class="site-footer" role="contentinfo">

			<div class="site-info">
				<a href="http://gohugo.io">Proudly powered by Hugo</a>
			</div>
		</footer>
	</div>

	<script type='text/javascript' src='http://localhost:1313//js/functions.js'></script>
<script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>