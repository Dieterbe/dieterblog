<!DOCTYPE html>

<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Dieter&#39;s blog</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<!--[if lt IE 9]>
	<script src="http://localhost:1313//js/html5.js"></script>
	<![endif]-->
    
    <link href="http://localhost:1313//index.xml" rel="alternate" type="application/rss+xml" title="Dieter&#39;s blog" />

    <link rel='stylesheet' id='twentyfourteen-lato-css'  href='//fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />

    <link rel='stylesheet' id='genericons-css' href='http://localhost:1313//genericons/genericons.css' type='text/css' media='all' />
	<link rel='stylesheet' id='twentyfourteen-style-css' href='http://localhost:1313//css/style.css' type='text/css' media='all' />
	
	<script type='text/javascript' src='http://localhost:1313//js/jquery/jquery.js'></script>
	<script type='text/javascript' src='http://localhost:1313//js/jquery/jquery-migrate.min.js'></script>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="home blog masthead-fixed list-view full-width grid">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<div class="header-main">
			<h1 class="site-title"><a href="http://localhost:1313//index.html" rel="home">Dieter&#39;s blog</a></h1>

			<div class="search-toggle">
				<a href="#search-container" class="screen-reader-text">Search</a>
			</div>

			<nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
				<button class="menu-toggle">Primary Menu</button>
				<a class="screen-reader-text skip-link" href="#content">Skip to content</a>
				<div class="nav-menu">
					<ul>
						
						<li class="page_item"> 
							<a href="/">blog</a>
						</li>
						
						<li class="page_item"> 
							<a href="/about/">about</a>
						</li>
						
						<li class="page_item"> 
							<a href="/talks/">talks</a>
						</li>
						
						<li class="page_item"> 
							<a href="https://twitter.com/Dieter_be">tweets</a>
						</li>
						
						<li class="page_item"> 
							<a href="https://github.com/Dieterbe">Github</a>
						</li>
						
					</ul>
				</div>
			</nav>
		</div>

		<div id="search-container" class="search-box-wrapper hide">
			<div class="search-box">
                <script type="text/javascript">
    function site_search(obj) {
    	var host = window.location.host;
        obj.q.value = "site:" + host + " " + obj.ss_q.value;
    }
</script>

<aside id="search-3" class="widget widget_search">
	<form role="search" class="search-form" action="//www.google.com/search" method="get" onSubmit="site_search(this)">

	<input name="q" type="hidden" />
	    <label>
	        <span class="screen-reader-text">Search for:</span>
	        <input name="ss_q" type="text" placeholder="Search ..." class="search-field" />
	    </label>
	    <input type="submit" value="Search" class="search-submit" />
	</form>
</aside>
			</div>
		</div>
	</header>

	<div id="main" class="site-main">


<div id="main-content" class="main-content">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

			<header class="archive-header">
				<h1 class="archive-title">Content tagged "Bash"</h1>
			</header>

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/libui-sh_a_library_providing_ui_functions_for_shell_scripts/">Libui-sh: a library providing UI functions for shell scripts</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/libui-sh_a_library_providing_ui_functions_for_shell_scripts/" rel="bookmark">
					<time class="entry-date" datetime="2010-12-28 22:59:15 -0400 -0400">
						December 28, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<blockquote><p>

== A library providing UI functions for shell scripts ==</p>

<p>When you write bash/shell scripts, do you write your own error/debug/logging/abort functions?<br />

Logic that requests the user to input a boolean, string, password, selection out of a list,<br />

date/time, integer, ... ?</p>

<p>Libui-sh is written to take care of all that.<br />

libui-sh is meant to a be a general-purpose UI abstraction library for shell scripts.<br />

Low impact, easy to use, but still flexible.<br />

cli by default, can optionally use ncurses dialogs as well.<br />

</p>

<p>To start using it, you only need to source it and you can start calling its functions.<br />

To reconfigure it (i.e. to change UI type, debug settings, logfile location),<br />

just run the command libui_sh_init</p>

<p>example usage:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #008000">source</span> /usr/lib/libui.sh

ask_yesno <span style="color: #BA2121">&#39;do you want to continue?&#39;</span> <span style="color: #666666">||</span> <span style="color: #008000; font-weight: bold">return</span>

libui_sh_init cli /tmp /tmp/yourlogfile

log <span style="color: #BA2121">&#39;we just got hassle-free logging&#39;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>

The library is not strictly a UI library, it also contains a few useful functions like<br />

check_is_in (check if an element can be found in a set - usually an array) and<br />

seteditor (interactive $EDITOR selection)</p>

<p>Dependencies:<br />

- bash (for cli interface)<br />

- optionally: dialog (for ncurses interface)

</p></blockquote>

<p><a href="https://github.com/Dieterbe/libui-sh">https://github.com/Dieterbe/libui-sh</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/filesystem_code_in_aif/">Filesystem code in AIF</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/filesystem_code_in_aif/" rel="bookmark">
					<time class="entry-date" datetime="2010-12-08 12:24:03 -0400 -0400">
						December 8, 2010
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>In light of the work and discussions around supporting Nilfs2 and Btrfs on Arch Linux and its installer AIF,<br />

I've shared some <a href="http://mailman.archlinux.org/pipermail/arch-releng/2010-December/001310.html">AIF filesystem code design insights and experiences</a> on the arch-releng mailing list.<br />

This is some hard to understand code.  Partly because it's in bash (and I've needed to work around some limitations in bash),<br />

partly because there is some complex logic going on.</p>

<p>I think it's very useful material for those who are interested (it can also help understanding the user aspect),<br />

so I wanted to share an improved version here.<br />

On a related topic: I proposed to do a session at <a href="http://www.fosdem.org">Fosdem 2011/"distro miniconf"</a> about simple (console based) installers for Linux,<br />

and how multiple distributions could share efforts maintaining installation tools, because there are a lot of cross-distribution concerns<br />

which are not trivial to get right (mostly filesystems, but I also think about clock adjustments, bootloaders, etc).<br />

Already several distro's use the (or a fork of) the Arch installer, for example <a href="http://pentoo.blogspot.com/2010/10/pentoo-installation-made-easy.html">Pentoo</a>,<br />

but I think cooperation could be much better and more efficient.</p>

<p>Anyway:<br />

<br />

my acronyms for this text:</p>

<ul>

<li>LV = lvm2 Logical Volume</li>

<li>VG = lvm2 Volume Group</li>

<li>PV = lvm2 Physical Volume</li>

<li>DM = Device Mapper</li>

<li>BD = Block Device</li>

<li>FS = File System</li>

<li>DF = DeviceFile</li>

</ul>

<p>"Normal" FS'es ("do something on the BD represented by DF /dev/foo, so that you can then call `mount /dev/foo $somedir`") are <em>trivial</em> to add to aif.<br />

Basically you just need to tell aif the name of the filesystem, and which commands and arguments it needs to invoke to create it and add a label to it.<br />

Nilfs2 falls in this category.  So do ext2/3/4, xfs, jfs, reiserfs, etc.  (Nilfs is now supported and new <a href="http://build.archlinux.org/isos/">archiso testbuilds</a> are available)</p>

<p>"Complex" FS'es (which yield a new DF for a DM BD, which can span multiple underlying BD's, etc) are more difficult, and I'll explain why.<br />

Btrfs falls in this category.  So do LVM, dm_crypt and softraid.  In aif terminology anything you put on top of a BD is a FS.  This is not always technically correct, but it's not far-fetched and avoids needless complication.  For example softraid would be a FS you put on top of one or more BD's, and which itself yields a new BD on top of which you can put something else.<br />

In the same way I call a VG a FS being applied on top of a PV BD, which itself results in a new BD which can host multiple LV FS'es, which in return yield new BD's which can host other FS'es.  Currently AIF provides support for lvm and dm_crypt, but not softraid or Btrfs.</p>

<p>How aif works is this: it uses a "model" that represents how your DF/FS structure will look like.<br />

I personally usually configure my hard disk like this:<br />

a boot partition, and a partition on which i do dm_crypt, which results in a DM BD, which I make a PV, then put a VG on<br />

it, which contains multiple LV's, one for swap, and two containing<br />

some FS'es which get mounted as / and /home.</p>

<p>You can see that model on the bottom ($BLOCKDATA) of <a href="https://github.com/Dieterbe/aif/blob/master/examples/fancy-install-on-sda">the example file "fancy-install-on-sda" for automatic installations, included with aif</a>.</p>

<p>You might have noticed in the installer - if you do it interactively - how you first configure all<br />

your filesystems in the dialog interface, but only after confirming, it<br />

does all the required actions, step by step.  Actually the dialog-based configuration helper will just generate a textfile in the same format as $BLOCKDATA and the processing code is the same for interactive and automatic installs.<br />

Since in the config file for an automatic install you could define your FS's in abitrary order, aif<br />

figures out the dependencies and processes things in the right order.<br />

With the example given above aif will parse the text and will figure out the order of creation: first partition (obviously), then create the dm_crypt, then the PV, then the VG,<br />

then the LV's, then the FS'es on those LV's)<br />

then mount all mountpoints in the right order (first /, then /home and /boot)<br />

On rollback (when user changes his mind, an error occured - usually because of misconfiguration like a too big LV) everything I just explained happens in reverse.<br />

This allows users to tune their config (or try something completely different), without the installer breaking with errors like "This device is already marked as encrypted" or "VG already exists"</p>

<p>I choose this model-based approach initially because I wanted to get rid<br />

of the ugly, hacky original installer code, but still provide a lot of<br />

control through the nice dialog interfaces.  And interfaces that work fast (not causing you to wait between every step because it's creating the FS you just defined).<br />

Perhaps most importantly, since my main goal was automautic installs where you could just specify how you wanted your<br />

FS/BD structure to look like (not a series of commands), relatively little extra code was needed.  (this is also what separates AIF from FAI&amp;debian installer.  On Debian the interactive and automatic installers are different projects.  On Arch they are just different extensions for the same codebase)</p>

<p>Advantages:</p>

<ul>

<li>provides some abstraction, it's trivial to support for new (simple) filesystems.</li>

<li>makes dialog-based "configurator" easier, because we can share code with the automated installer</li>

<li>the descriptive style of the config makes it easier (although the actual format could be further improved).<br />

 definitely easier then running/writing a series of commands (resp. interactive, automatic install).<br />

 if we would make users run/write a series of commands, we also couldn't support automatic rollbacks in case of failures.</i>

</ul>

<p>Disadvantages:</p>

<ul>

<li>the more control you want to give users, the more you're just putting<br />

  effort in wrapping commandline arguments in fancy dialog interfaces<br />

  (although there is also a textbox where you can enter which ever<br />

  additional arguments you want, so this is a compromise)</li>

<li>pretty hard to implement fancier filesystems, you usually need to<br />

  take the common use cases. (see next point)</li>

<li>bash datastructures are very limited. it's not easy to translate this model in a<br />

  datastructure.  If in "FS on top of a BD" the FS is a child, and the BD a parent, it would be like a tree,<br />

  but each node could have multiple children and multiple parents, i.e. a graph.<br />

  For now I choose to ignore the "multiple parents" clause.<br />

  Currently the only implication in aif is that you cannot have a VG which consumes multiple PV's.<br />

  This is rare enough to justify this simplification, but still quite some code is needed to update and parse text files<br />

  to mimic the datastructure, although I do consider using a specific<br />

  optimized text format and an external tool to update/query the data. (yaml?)<br />

  (See <a href="https://bugs.archlinux.org/task/15640">FS 15640</a>).<br />

  Multiple children do need to be supported (a VG can have multiple LV's. line 34 in the example file)<br />

  Implementing Softraid in this model means I need to support multiple parents, i.e. work with a graph structure.<br />

  For Btrfs, the LVM-like restrictiction (no multiple physical volumes for the same FS) might be an acceptable compromise</li>

<li>users cannot do their own stuff outside aif and expect to see the<br />

  results inside aif.  If the installer would execute everything in realtime,<br />

  you could detect changes being made to the system (probably not easy though)</li>

<li>since changes don't happen in realtime, the model needs to update itself to represent how<br />

the actual state <em>would</em> look like.  For example: if you just added a dm_crypt FS on a BD, we must create<br />

a new entry /dev/mapper/$label in the model</li>

<li>for PV's, you need a way to differentiate in the menu between the<br />

  real BD (the one on which you say you want to put a PV FS) and the actual PV (on which you can put VG FS's),<br />

  so aif generates an entry with the same name as the DF, but with a '+' appended to the file.<br />

  (see the example file if unclear).  Although this problem is not specific to the actual model approach,<br />

  it's more caused by my desire to present a "global interface" to the user, and not a series of wizards and dialogs</li>

<li>Rollbacks are cool, but requires some hard to maintain code, and I doubt they are used often.<br />

(also this is not really specific about the model approach taken, but still worth mentioning)</li>

</ul>

<p>Because of all this, I have sweared quite a bit over the last few<br />

years, wondering if bash really was a good choice.  But using an external tool to work with a text-base graph/tree datastructure (where nodes can have some properties) will probably remove the big nuisance.  Also, Because bash v4 has associative arrays (finally), I can clean up a bunch of other code as well.</p>

<p>I've pondered whether we should just let users do everything on the commandline (like Gentoo), or provide a minimal layer of<br />

abstraction, like provide some scripts which they can modify that setup<br />

a system in a certain way. (for example, basically a series of mkfs; mount;pacman; calls)<br />

Another alternative would be to just make the user choose between a series of "common setups" and make them answer some questions for the choosen setup.<br />

This is how the old installer did it, and afaik archboot still does it, but it doesn't scale well with more and more possibilities.<br />

Actually, aif still contains the optional "autoprepare" method, which is in fact a simple wizard for a simple setup.</p>

<p>I guess it's a tradeoff between making it easy for users and not overloading the brain of people who want to hack on the installer.<br />

The approach which afaik has always been taken by Arch is to make the installer hold the hands of the user.<br />

When creating aif, I've choosen to stick to that concept.  And frankly I still like the idea.  It may be hard to maintain,<br />

but as a user you can finish all your installs and have a lot of options, but still use very minimal keystrokes (and mental energy).</p>

<p>Like mentioned earlier, softraid hasn't been implemented yet in aif, nor btrfs.<br />

I would need to know the most common/recommended use cases, and figure out the best way to implement them.<br />

Btrfs might be relatively easy, if i can implement it like i did lvm.  But it seems like a great FS and I don't want to provide only-half-assed support for it.<br />

Either way, refactoring the datastructure is something that will needs to be done at some point, especially for softraid.</p>

<p>I hope this article was a bit understandable.  And if you have any advice, please share :)<br />

The actual blockdevices-filesystems library of AIF is here:<br />

<a href="https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-blockdevices-filesystems.sh">https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-blockdevices-filesystems.sh</a><br />

And the menu's are here:<br />

<a href="https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-ui-interactive.sh">https://github.com/Dieterbe/aif/blob/2ee11ef334983fc68352364025ba5a97d795b95e/src/core/libs/lib-ui-interactive.sh"</a> (the most interesting functions are interactive_filesystems for the main FS menu, and interactive_filesystem which handles definition of a specific FS)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/arch/index.html" rel="tag">arch</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/a_script_that_pulls_photos_from_facebook/">A script that pulls photos from facebook</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/a_script_that_pulls_photos_from_facebook/" rel="bookmark">
					<time class="entry-date" datetime="2009-08-18 17:36:21 -0400 EDT">
						August 18, 2009
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><a href="http://fbcmd.dtompkins.com/">Fbcmd</a> is pretty cool.<br />

I quickly hacked this script together which pulls all photo albums from friends on facebook, so I have them available where I want.  (It should also pull your own albums, but I don't have any so I can't check that)<br />

Maybe there are better ways to do this.  I looked at <a href="http://nerd256.diggles.net/fbfs/">fbfs</a> but it looks a bit weird.  I have no idea what the corrupted images fuss is all about.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>



<span style="color: #19177C">dir</span><span style="color: #666666">=</span><span style="color: #19177C">$HOME</span>/fbphotos

<span style="color: #19177C">cache</span><span style="color: #666666">=</span><span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">XDG_CACHE_HOME</span><span style="color: #008000; font-weight: bold">:-</span><span style="color: #19177C">$HOME</span>/.cache<span style="color: #BB6688; font-weight: bold">}</span>

<span style="color: #666666">[</span> -d <span style="color: #19177C">$cache</span> <span style="color: #666666">]</span> <span style="color: #666666">||</span> mkdir <span style="color: #19177C">$cache</span>

<span style="color: #666666">[</span> -d <span style="color: #19177C">$cache</span> <span style="color: #666666">]</span> <span style="color: #666666">||</span> <span style="color: #008000">exit </span>2

<span style="color: #408080; font-style: italic">#fbcmd=`which fbcmd`</span>

<span style="color: #19177C">fbcmd</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;php /home/dieter/fbcmd/fbcmd.php&#39;</span>



<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Fetching info about friends and myself ..&quot;</span>

<span style="color: #19177C">$fbcmd</span> FRIENDS -csv | tail -n <span style="color: #BA2121">&#39;+2&#39;</span> &gt; <span style="color: #19177C">$cache</span>/fb-users <span style="color: #408080; font-style: italic"># ID NAME</span>

<span style="color: #19177C">$fbcmd</span> WHOAMI  -csv &gt;&gt; <span style="color: #19177C">$cache</span>/fb-users



<span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000">read </span>line

<span style="color: #008000; font-weight: bold">do</span>

        <span style="color: #19177C">uid</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>  cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">1</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

        <span style="color: #19177C">uname</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">2</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Fetching list of albums for user </span><span style="color: #19177C">$uname</span><span style="color: #BA2121"> ... &quot;</span>

        <span style="color: #19177C">$fbcmd</span> ALBUMS <span style="color: #19177C">$uid</span> -csv | tail -n <span style="color: #BA2121">&#39;+2&#39;</span> &gt; <span style="color: #19177C">$cache</span>/fb-<span style="color: #19177C">$uid</span>-albums <span style="color: #408080; font-style: italic">#OWNER_NAME AID NAME SIZE</span>

<span style="color: #008000; font-weight: bold">done</span> &lt; <span style="color: #19177C">$cache</span>/fb-users



<span style="color: #008000; font-weight: bold">for</span> i in <span style="color: #19177C">$cache</span>/fb-*-albums

<span style="color: #008000; font-weight: bold">do</span>

        <span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000">read </span>line

        <span style="color: #008000; font-weight: bold">do</span>

                <span style="color: #19177C">oname</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">1</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #19177C">aid</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>  cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">2</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #19177C">aname</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">3</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #19177C">asize</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>cut -d <span style="color: #BA2121">&#39;,&#39;</span> -f <span style="color: #666666">4</span> <span style="color: #666666">&lt;&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$line</span><span style="color: #BA2121">&quot;`</span>

                <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Fetching </span><span style="color: #19177C">$oname</span><span style="color: #BA2121"> album: </span><span style="color: #19177C">$aname</span><span style="color: #BA2121">&quot;</span>

                <span style="color: #19177C">$fbcmd</span> APICS <span style="color: #19177C">$aid</span> <span style="color: #19177C">$dir</span> -psize<span style="color: #666666">=1</span> -af<span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$oname</span><span style="color: #BA2121">-</span><span style="color: #19177C">$aname</span><span style="color: #BA2121">/[pid].jpg&quot;</span> -pic_skip_exists<span style="color: #666666">=</span>1

        <span style="color: #008000; font-weight: bold">done</span> &lt; <span style="color: #19177C">$i</span>

<span style="color: #008000; font-weight: bold">done</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>Here&rsquo;s a picture from <a href="http://www.countingcows.be">Counting cows</a> I grabbed from <a href="http://lievendekeyser.net/">Lievens</a> album.<br /></p>

<p><img src="/files/countingcows2009.jpg" /></p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/visual_feedback_of_the_exit_status_of_the_previous_command_in_bash/">Visual feedback of the exit status of the previous command in bash</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/visual_feedback_of_the_exit_status_of_the_previous_command_in_bash/" rel="bookmark">
					<time class="entry-date" datetime="2008-10-14 21:56:50 -0400 EDT">
						October 14, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Put this in your .bashrc, and the current directory in your PS1 will be printed green if the previous command had exit state 0, red otherwise.  No more typing 'echo $?', ' &amp;& echo ok', '|| echo failed' etc on the command line.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> <span style="color: #008000; font-weight: bold">$(</span>tput colors<span style="color: #008000; font-weight: bold">)</span> -gt <span style="color: #666666">0</span> <span style="color: #666666">]</span> ; <span style="color: #008000; font-weight: bold">then</span>

    <span style="color: #19177C">RED</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>tput setaf 1<span style="color: #008000; font-weight: bold">)</span>

    <span style="color: #19177C">GREEN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>tput setaf 2<span style="color: #008000; font-weight: bold">)</span>

    <span style="color: #19177C">RST</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>tput op<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #008000; font-weight: bold">fi</span>



bash_prompt_command<span style="color: #666666">()</span> <span style="color: #666666">{</span>

        <span style="color: #19177C">last_exit</span><span style="color: #666666">=</span><span style="color: #19177C">$?</span>

        <span style="color: #19177C">exit_to_color</span><span style="color: #666666">=</span><span style="color: #19177C">$RED</span>

        <span style="color: #666666">[</span> <span style="color: #19177C">$last_exit</span> <span style="color: #666666">==</span> <span style="color: #666666">0</span> <span style="color: #666666">]</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #19177C">exit_to_color</span><span style="color: #666666">=</span><span style="color: #19177C">$GREEN</span>

<span style="color: #666666">}</span>



<span style="color: #008000">export </span><span style="color: #19177C">PROMPT_COMMAND</span><span style="color: #666666">=</span>bash_prompt_command



<span style="color: #19177C">PS1</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;\u@\h \[\$exit_to_color\]\W\[</span><span style="color: #19177C">$RST</span><span style="color: #BA2121">\] \$&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>( Inspired by <a href="http://bbs.archlinux.org/viewtopic.php?pid=367626#p367626">this post</a> )</p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/ddm_v04_released/">DDM v0.4 released</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/ddm_v04_released/" rel="bookmark">
					<time class="entry-date" datetime="2008-09-23 16:21:27 -0400 EDT">
						September 23, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>DDM v0.4 has been released.<br />

Since the last release many, many things have been changed/fixed/added.<br />

<br />

Here is the Changelog:</p>

<p><pre></p>

<p>4.0 (23-9-2008)</p>

<ul>
<li><p>new dataset types (dataset types are now: blob, buffer, cache, copy, direct, extension, selection)</p></li>

<li><p>new (default) actions (default actions are now: backup, checkout, commit, flush, restore, update)</p></li>

<li><p>actions and callbacks are addable/customizable/disableable etc</p></li>

<li><p>some actions for certain dataset types are now implemented that weren&rsquo;t before (see manual)</p></li>

<li><p>better choosen commandline switches. especially needed for specifying (custom) actions.</p></li>

<li><p>ddm follows XDG basedir spec now (<a href="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html" title="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html">http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html</a>).</p></li>
</ul>

<p>This affects the location of ddmrc and plugins (read on)</p>

<ul>
<li>datasets can have arbitrary names now. (so it&rsquo;s also fully compatible with the XDG usedir spec now <a href="http://freedesktop.org/wiki/Software/xdg-user-dirs" title="http://freedesktop.org/wiki/Software/xdg-user-dirs">http://freedesktop.org/wiki/Software/xdg-user-dirs</a> )</li>
</ul>

<p>In some cases you do need to make up for this by specifying one or two vars in the .ddm file. See manual.</p>

<ul>
<li><p>possibility to create plugins.</p></li>

<li><p>2 plugins come by default now:</p>

<ul>
<li><p>slidewindow (old function pluginized now)</p></li>

<li><p>get_exaile (supposed to populate selection with favorite/most-played/&hellip; music according to the exaile</p></li>
</ul></li>
</ul>

<p>music player database). this plugin is still <em>work in progress</em></p>

<ul>
<li><p>slidewindow is more flexible now (configurable subpaths, regex grepstring, &hellip;) <em>api has changed</em></p></li>

<li><p>pretend mode</p></li>

<li><p>validators for actions, repositories and datasets</p></li>

<li><p>new, better and more generic wrappers for rsync, svn, rm, cd, mkdir and &lsquo;keep&rsquo;</p></li>

<li><p>refactored exit codes</p></li>

<li><p>better validation, error handling, help information</p></li>

<li><p>better documentation (MANUAL, examples, &hellip;) comes with sources now + can be seen online @ <a href="http://github.com/Dieterbe/ddm" title="http://github.com/Dieterbe/ddm">http://github.com/Dieterbe/ddm</a>)</p></li>

<li><p>lots of changes and fixes big and small</p></li>
</ul>

<p></pre><p></p>

<p>The <a href="http://github.com/Dieterbe/ddm">ddm project on github</a> has now 2 branches:</p></p>

<ul>

<li><a href="http://github.com/Dieterbe/ddm/tree/master" title="http://github.com/Dieterbe/ddm/tree/master">http://github.com/Dieterbe/ddm/tree/master</a> (bleeding edge development will happen here)</li>

<li><a href="http://github.com/Dieterbe/ddm/tree/v0.4" title="http://github.com/Dieterbe/ddm/tree/v0.4">http://github.com/Dieterbe/ddm/tree/v0.4</a> (0.4 'stable' patches will be pushed here)</li>

</ul>

<p>It now also comes with a <a href="http://github.com/Dieterbe/ddm/tree/v0.4/MANUAL">Manual</a> and some <a href="http://github.com/Dieterbe/ddm/tree/v0.4/Examples.textile">examples</a>.</p>

<p>Have fun...</p>

<p>Oh and btw: It's probably not bug free (especially the slidewindow code)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/a_fast_way_to_get_stuff_out_of_your_head_and_into_your_gtd_inbox/">A fast way to get stuff out of your head and into your GTD inbox</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/a_fast_way_to_get_stuff_out_of_your_head_and_into_your_gtd_inbox/" rel="bookmark">
					<time class="entry-date" datetime="2008-08-13 20:42:51 -0400 EDT">
						August 13, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Often while you're occupied with something, some thought pops into your head.  Something that you want to remember/do something about.<br />

One of the key factors of a successful <a href="http://en.wikipedia.org/wiki/Getting_Things_Done">GTD</a> implementation is having the tools in place to get that stuff out of your head and into something you can trust, so you can continue your work with the smallest interruption possible.  Many GTD tools I've checked out focus on the 'action management' part of GTD, leaving out the collection and processing phases (<a href="http://www.thinkingrock.com.au/">Thinkingrock</a> is a notable exception here) and often some other things (reference system etc).</p>

<p>This is not necessarily a bad thing:  The whole GTD system is built around so many different actions and systems that some stuff can be divided into separate programs.  The only thing that matters is the global workflow, whether inside 1 program or across multiple.</p>

<p>If you use a program that does not implement the collection/processing phases, one thing thing you should <strong>not</strong> do, is skip them. You should not try to make out what an idea is, how to implement it, how to file it, which context/project/tag to assign etc on the moment it pops into your head, because it makes you loose your focus, distracts you and generally makes you less efficient.</p>

<p>I'm now trying out the <a href="http://www.rousette.org.uk/projects">Tracks</a> gtd program, which does not implement collection/processing.  The official explanation is that they try to make tracks customizable and flexible to allow you to use it the way you want, but I don't see how I could use it effectively for this.  </p>

<p>What I did is write a simple shell script, one that I trigger via a quick keyboard shortcut (ctrl+i), it pops up a Gtk input dialog box - using <a href="http://live.gnome.org/Zenity">zenity</a>, which i <a href="/gtk_dialogs_for_shell_scripts_with_zenity_and_the_ask-pass_gui_tools_for_ssh-add">blogged about earlier.</a>.  When you sumbit the form (by pressing enter) it just appends your text to a textfile.  That's it !<br />

If something goes wrong (and only then!) it will show a popup with <a href="http://www.galago-project.org">libnotify</a> so if you see nothing after submitting, you can be assured that it saved fine.<br />

  <i>Less is more.</i></p>

<p>When you are ready for processing mode (eg the 'weekly review' in gtd speak) you can then process entry by entry and enter stuff into your GTD program as necessary.</p>

<p>Dependencies:</p>

<ul>

<li>bash</li>

<li>zenity</li>

<li>notify-send (package libnotify-bin on ubuntu)</li>

</ul>

<p>Here is the file, save it as gtdinbox.sh</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>



<span style="color: #408080; font-style: italic"># A very simple script to implement the Collecting part of GTD.</span>

<span style="color: #408080; font-style: italic"># The only thing this script does is getting something out of head as quickly as possible, into a file you can trust</span>

<span style="color: #408080; font-style: italic"># See http://dieter.plaetinck.be/a_fast_way_to_get_stuff_out_of_your_head_and_into_your_gtd_inbox</span>



<span style="color: #19177C">program</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>basename <span style="color: #19177C">$0</span> .sh<span style="color: #BA2121">`</span>

<span style="color: #19177C">datadir</span><span style="color: #666666">=</span><span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">XDG_DATA_HOME</span><span style="color: #008000; font-weight: bold">:-</span><span style="color: #19177C">$HOME</span>/.local/share<span style="color: #BB6688; font-weight: bold">}</span>/<span style="color: #19177C">$program</span>

<span style="color: #19177C">inboxfile</span><span style="color: #666666">=</span><span style="color: #19177C">$datadir</span>/inbox.txt



die_error <span style="color: #666666">()</span>

<span style="color: #666666">{</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$1</span><span style="color: #BA2121">&quot;</span> &gt;&amp;2

        notify-send <span style="color: #BA2121">&#39;Gtd Inbox&#39;</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$1</span><span style="color: #BA2121">&quot;</span> -i gtk-dialog-info -t <span style="color: #666666">5000</span> -u critical

        <span style="color: #008000">exit</span> <span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">2</span><span style="color: #008000; font-weight: bold">:-</span><span style="color: #19177C">2</span><span style="color: #BB6688; font-weight: bold">}</span>

<span style="color: #666666">}</span>



<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> ! -d <span style="color: #19177C">$datadir</span> <span style="color: #666666">]</span>

<span style="color: #008000; font-weight: bold">then</span>

        mkdir -p <span style="color: #19177C">$datadir</span> 2&gt; /dev/null <span style="color: #666666">&amp;&amp;</span> chmod <span style="color: #666666">700</span> <span style="color: #19177C">$datadir</span> 2&gt; /dev/null <span style="color: #666666">||</span> die_error <span style="color: #BA2121">&quot;Could not create/chmod </span><span style="color: #19177C">$datadir</span><span style="color: #BA2121">&quot;</span> 1

<span style="color: #008000; font-weight: bold">fi</span>



<span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">input</span><span style="color: #666666">=</span><span style="color: #BA2121">`</span>zenity --entry --title <span style="color: #BA2121">&quot;GTD Inbox&quot;</span> --text <span style="color: #BA2121">&quot;Enter text for gtd inbox&quot;`</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #666666">[</span> -n <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$input</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span>

<span style="color: #008000; font-weight: bold">then</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$input</span><span style="color: #BA2121">&quot;</span> &gt;&gt; <span style="color: #19177C">$inboxfile</span> <span style="color: #666666">&amp;&amp;</span> <span style="color: #666666">{</span>

                <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Entered </span><span style="color: #19177C">$input</span><span style="color: #BA2121"> into </span><span style="color: #19177C">$inboxfile</span><span style="color: #BA2121">&quot;</span>

                <span style="color: #008000">exit </span>0

        <span style="color: #666666">}</span>

        die_error <span style="color: #BA2121">&quot;Something failed while entering </span><span style="color: #19177C">$input</span><span style="color: #BA2121"> into </span><span style="color: #19177C">$inboxfile</span><span style="color: #BA2121">&quot;</span> 3

<span style="color: #008000; font-weight: bold">else</span>

        <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;Cancelled input into </span><span style="color: #19177C">$inboxfile</span><span style="color: #BA2121">&quot;</span>

<span style="color: #008000; font-weight: bold">fi</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/ddm_a_distributed_data_manager/">DDM : a Distributed Data Manager</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/ddm_a_distributed_data_manager/" rel="bookmark">
					<time class="entry-date" datetime="2008-03-29 20:28:16 -0400 EDT">
						March 29, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p><b>UPDATE: this information is outdated.  See <a href="http://github.com/Dieterbe/ddm/tree/master" title="http://github.com/Dieterbe/ddm/tree/master">http://github.com/Dieterbe/ddm/tree/master</a> for latest information.</b></p>

<h3>Introduction</h3>

<p>If you have multiple sets of data (e.g.: music, images, documents, movies, ...) and you use these on more then one system ( e.g. a laptop and a file server) then you probably also have some 'rules' on how you use these on your systems.  For example after capturing new images you maybe put them on your laptop first but you like to sync them to your file server frequently.  On the other hand you also want all your high-res images (stored on the server) available for editing on the laptop, and to make it more complicated you might have the same images in a smaller format on your server (for gallery programs etc.) and want these (or a select few albums of them) available on the road. </p>

<p>The more different types of data you have and the more you have specific work flows the harder it becomes to keep your data as up to date as possible and consistent on your boxes.  You could manually rsync/(s)cp your data but you end up in having a mess (at least that's how it turned out on my boxes). Putting everything under version control is great for text files and such, but it's not an option for bigger (binary) files.</p>

<p>I wanted to keep all my stuff neatly organised in my home directories and I want to create good work flows with as minimum hassle as possible, so I decided to write DDM: the Distributed Data Manager.</p>

<h3>Disclaimer</h3>

<p>The code is far from finished.  Some features are still missing and there will be bugs in it.  I'm even still thinking about the concepts themselves.   Don't blame me if ddm deletes the wrong files or causes your computer to blow up.</p>

<h3>Concepts</h3>

<p>DDM is a bash script that manages your data, distributed over multiple (*nix) systems.  You tell it how you want to work with your data and ddm will do the copying, deleting, syncing, committing, updating, ... for you.<br />

It uses simple things like cp, rsync and svn for this.<br />

Configuration is done through simple text files that will be sourced.</p>

<p>Ddm works with repositories: these are data stores on your server which should never be edited by hand.  A repository can be a svn repository or something as simple as a directory shared over the network ( through NFS, SMB, ... )</p>

<p>I highly recommend <a href="http://wiki.autofs.net/">autoFS</a> as auto mounter.  It is very easy, yet powerful and flexible.</p>

<h4>Vocabulary</h4>

<ul>

<li>repotype: the type of your repo.  currently this is either 'svn' (subversion) or 'vfs' ( any position in your VFS, the underlying technology is up to you. although autofs+nfs will be most useful)</li>

<li>dataset name: The name of your dataset. e.g. 'movies'</li>

<li>dataset type (see below)</li>

<li>action: commit, update, checkout</li>

</ul>

<h4>Dataset types</h4>

<ul>

<li>selection: a copy of a subset of the data in the repo (e.g. your favourite movies of all your movies)</li>

<li>buffer: temporary storage to be flushed to the repo regularly (e.g. new images or stuff you just downloaded)</li>

<li>copy: (default): a copy of all content in the repo (an svn working copy or a directory using rsync)</li>

<li>extension: contains unique content that you don't want on your server (e.g. temporary files)</li>

<li>direct: a (symlink to a) local mount point for a remote location. useful for big collections</li>

</ul>

<p>So basically you tell ddm to perform an action on a dataset of a specific type.<br />

Note that some actions wouldn't make sense for some dataset types ( e.g. commit on a selection or extension) and thus don't need to be implemented, while others perform really basic operations (an update of a vfs copy is just an rsync) or just wrap around something else (notably the svn actions just wrap around the svn tool)<br />

Keep in mind though that everything can be overridden through .ddm files in dataset directories.</p>

<h4>Configuration</h4>

<p>Ddm is configured through:</p>

<ul>

<li>a .ddm file in your home directory. (needed)</li>

<li>a .ddm file in your dataset directories (optional)</li>

<li>the directory name of your dataset (read on) (optional)</li>

</ul>

<p>To specify the dataset type, the easiest way is to add suffixes to your directories. eg video-selection.  This is not a must and can be specified in the .ddm file in the dataset directory. For the 'copy' dataset type you don't need to specify anything (it's default)<br />

Unless overridden, ddm will construct the repo path as follows:  </p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">$TYPE_BASE</span>/<span style="color: #19177C">$TYPE_PREFIX$DATASET_NAME$TYPE_SUFFIX</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>(if unclear, read on)</p></p>

<p>In the .ddm file in your dataset directory you can override defaults.</p>

<h5>~/.ddm</h5>

<p>This is how my file looks like.</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">ALLOWED_REPO_TYPES</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;svn vfs&#39;</span>

<span style="color: #19177C">DEFAULT_REPO_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;vfs&#39;</span>



<span style="color: #19177C">SVN_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;https://server/svn/repos/&#39;</span>

<span style="color: #19177C">SVN_PREFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;ddm-&#39;</span>

<span style="color: #19177C">VFS_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;/net/server/home/dieter/ddm-repo&#39;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>These are all the options you can specify:</p></p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">SVN_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">SVN_PREFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">SVN_SUFFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">VFS_BASE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>  

<span style="color: #19177C">VFS_PREFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">VFS_SUFFIX</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>



<span style="color: #19177C">DEFAULT_REPO_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;vfs&#39;</span>

<span style="color: #19177C">ALLOWED_REPO_TYPES</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;vfs&#39;</span>

<span style="color: #19177C">IGNORE_DATASET_REMOTE_SVN</span><span style="color: #666666">=0</span> <span style="color: #408080; font-style: italic">#nag if the repo url figured out is not the same as the one in &#39;svn info&#39;. you should leave this 0</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<h5>dataset/.ddm</h5></p>

<p>For an example see below.  Possible options are these:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #19177C">DATASET_LOCAL</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#path to dataset locally (including type suffix if any)</span>

<span style="color: #19177C">DATASET_REMOTE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#path to dataset remotely (or locally if network mount)</span>

<span style="color: #19177C">DATASET_PATH</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#just the path (until parent directory of dataset)</span>

<span style="color: #19177C">DATASET_DIR_NAME</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#like $DATASET_LOCAL but no path </span>

DATASET_DIR_NAME_REL  <span style="color: #408080; font-style: italic"># identifier to dataset, taken against pwd ( could be &#39;.&#39;,&#39;..&#39;, nothing at all, dirname, full path, ..)</span>

<span style="color: #19177C">DATASET_NAME</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span> <span style="color: #408080; font-style: italic">#like $DATASET_DIR_NAME but no type suffix</span>

<span style="color: #19177C">DATASET_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>

<span style="color: #19177C">REPO_TYPE</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>



<span style="color: #408080; font-style: italic">#you can override the following callbacks (example see below)</span>

precheckout

docheckout

postcheckout



precommit

docommit

postcommit



preupdate

doupdate

postupdate

<span style="color: #666666">]]</span>&gt;
</pre></div>
<h4>Invocation</h4></p>

<p><pre>&lt;![CDATA[</p>

<p>dieter@dieter-mbp:~$ ddm -h</p>

<p>usage: ddm options</p>

<p>OPTIONS:</p>

<p>-d                Dataset (name of directory)</p>

<p>-h                Show this message</p>

<p>-m                Message (used for commits in svn, ignored otherwise)</p>

<p>-u                Update</p>

<p>-c                Commit</p>

<p>-o                Checkout (default repo type)</p>

<p>-O <repo-type>    Checkout using specific repo type (one of: svn vfs)</p>

<p>-t <dataset-type> Specify dataset-type (selection,copy, &hellip;) (only honoured for checkouts)</p>

<p>-v                Verbose</p>

<p>]]&gt;</pre><h4>Examples</h4></p>

<h5>Update my video-selection.</h5>

<p>The directory is ~/video-selection.  It contains episodes that I'm watching<br />

The .ddm file looks like this</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

doupdate<span style="color: #666666">()</span>

<span style="color: #666666">{</span>

	slidewindow mplayer <span style="color: #666666">10</span> 1

<span style="color: #666666">}</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>This means that ddm will look in my bash history and look for the movie files in this directory I have played (using &ldquo;mplayer video-selection/<em>somefile</em>).<br /></p>

<p>It will then delete all the ones I&rsquo;ve already seen, except the latest one (parameter 3). It will also fetch the next 10 episodes (parameter 2)</p></p>

<p><pre>&lt;![CDATA[</p>

<p>dieter@dieter-mbp:~$ ddm -u -v -d video-selection/</p>

<p>Included /home/dieter/video-selection/.ddm</p>

<p>action update on dataset name video type selection</p>

<p>Deleting old files&hellip; (3 items).</p>

<ul>
<li><p>/home/dieter/video-selection/910 - The One With Christmas In Tulsa.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/911 - The One Where Rachel Goes Back To Work.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/912 - The One With Phoebes Rats.avi&hellip; success</p></li>
</ul>

<p>Keeping these files&hellip; (1 items).</p>

<ul>
<li>/home/dieter/video-selection/913 - The One Where Monica Sings.avi</li>
</ul>

<p>Copying new files&hellip; (10 items).</p>

<ul>
<li><p>/home/dieter/video-selection/914 - The One With The Blind Dates.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/915 - The One With the Mugging.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/916 - The One With The Boob Job.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/917 - The One With The Memorial Service.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/918 - The One With The Lottery.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/919 - The One With Rachels Dream.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/920 - The One With The Soap Opera Party.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/921 - The One With The Fertility Test.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/922 - The One With The Donor.avi&hellip; success</p></li>

<li><p>/home/dieter/video-selection/923 - 924 - The One In Barbados.avi&hellip; success</p></li>
</ul>

<p>finished</p>

<p>]]&gt;</pre><h4>Download</h4></p>

<p>The code is licensed under <a href="http://www.gnu.org/licenses/gpl-3.0.txt">Gpl v3</a><br />

You can dowload it <a href="/files/ddm" onClick="javascript:urchinTracker ('/files/ddm');">here</a></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/per_directory_bash_history/">Per-directory bash history</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/per_directory_bash_history/" rel="bookmark">
					<time class="entry-date" datetime="2008-01-30 21:37:31 -0400 -0400">
						January 30, 2008
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>I've been thinking about how a specific bash history for each directory could improve productivity, and unlike what I feared it was actually pretty easy to find a solution on the net.

<br />

Quote from an <a href="http://www.debian-administration.org/articles/543#comment_17">anonymous reply on debian-administration.org</a></p>

<p><br/></p>

<p><cite></p>

<p>So I use the following bash function:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic"># Usage: mycd &lt;path&gt;</span>

<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic">#  Replacement for builtin &#39;cd&#39;, which keeps a separate bash-history</span>

<span style="color: #408080; font-style: italic">#   for every directory.</span>

<span style="color: #008000; font-weight: bold">function</span> mycd<span style="color: #666666">()</span>

<span style="color: #666666">{</span>

   <span style="color: #008000">history</span> -w <span style="color: #408080; font-style: italic"># write current history file</span>

   <span style="color: #008000">builtin cd</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$@</span><span style="color: #BA2121">&quot;</span> <span style="color: #408080; font-style: italic"># do actual cd</span>

   <span style="color: #008000">local </span><span style="color: #19177C">HISTDIR</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HOME</span><span style="color: #BA2121">/.dir_bash_history</span><span style="color: #19177C">$PWD</span><span style="color: #BA2121">&quot;</span> <span style="color: #408080; font-style: italic"># use nested folders for history</span>

   <span style="color: #008000; font-weight: bold">if</span>  <span style="color: #666666">[</span> ! -d <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HISTDIR</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span>; <span style="color: #008000; font-weight: bold">then</span> <span style="color: #408080; font-style: italic"># create folder if needed</span>

      mkdir -p <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HISTDIR</span><span style="color: #BA2121">&quot;</span>

   <span style="color: #008000; font-weight: bold">fi</span>

   <span style="color: #008000">export </span><span style="color: #19177C">HISTFILE</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HISTDIR</span><span style="color: #BA2121">/bash_history.txt&quot;</span> <span style="color: #408080; font-style: italic"># set new history file</span>

   <span style="color: #008000">history</span> -c  <span style="color: #408080; font-style: italic"># clear memory</span>

   <span style="color: #008000">history</span> -r <span style="color: #408080; font-style: italic"># read from current histfile</span>

<span style="color: #666666">}</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
</p>

<p>and then set it up with the following in my bashrc:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #008000">shopt</span> -s histappend

<span style="color: #008000">alias cd</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;mycd&quot;</span>

<span style="color: #008000">export </span><span style="color: #19177C">HISTFILE</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$HOME</span><span style="color: #BA2121">/.dir_bash_history</span><span style="color: #19177C">$PWD</span><span style="color: #BA2121">/bash_history.txt&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
</cite></p>

<p>Great stuff.  It would be nice to be able to use both the global and the directory-specific history by combining with an extra modifier key .<br />

( eg arrowup/pageup/c^r for global and alt+arrowup/alt+pageup/alt+c^r for the directory-specific one )</p>

<p>If I ever come up with / find something to do this I'll let you know...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/gtk_dialogs_for_shell_scripts_with_zenity_and_the_ask-pass_gui_tools_for_ssh-add/">gtk dialogs for (shell)scripts with zenity and the ask-pass gui tools for ssh-add</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/gtk_dialogs_for_shell_scripts_with_zenity_and_the_ask-pass_gui_tools_for_ssh-add/" rel="bookmark">
					<time class="entry-date" datetime="2007-11-25 18:45:41 -0400 -0400">
						November 25, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Phew! where to start?  Probably at <a href ="http://www.chimeric.de/blog/2007/1107_mounting_external_truecrypt_volumes_interactively">this blogpost</a>.  It's about making it very easy to work with external encrypted volumes. I'm not going to talk about the article itself but about a great tool i discovered thanks to it: Zenity.  It's an LGPL-licensed program written in C by some guys from Gnome and Sun. You can call it from any script and present a user with a gtk widget such as a password-dialog, filechooser, calendar, ... It has <a href="http://www.linuxmanpages.com/man1/zenity.1.php">many possibilities</a>.<br />

This is great if you want to run scripts on the terminal or even without a terminal (scripts automatically started by your desktop environment) and need user input.</p>

<p>This immediately made me think of using this together with ssh-add, because i was getting a bit tired to open a console and add my key by typing the ssh-add command for every X session. (For the record: ssh-add without any arguments is enough for most users: it looks for keys with default names, but i have multiple keys with some speial names so...)<br />

(I can easily retrieve the right command by typing ssh-add*arrowup* but still it's cumbersome.. see <a href="/my_favorite_bash_tricks">this page for the bash-trick</a>)</p>

<p>Of course I realized I was probably not the only one with this idea so I googled a bit and looked in the <a href="http://www.hmug.org/man/1/ssh-add.php">ssh-add manpage</a>, and I found out some cool stuff!<br />

It turned out ssh-add has support for such scenarios and offers the $SSH_ASKPASS environment variable for this.  Since the system I'm currently using on my laptop (which i converted from Arch to xubuntu 7.10 but that's another story :-)) doesn't have this variable set by default I could of course set it myself, but it can be even easier then this...</p>

<p>When the $SSH_ASKPASS variable is not set, ssh-add will try to execute /usr/bin/ssh-askpass by default.  I figured this out by typing this in a console:<br />

ssh-add *mykey* < /dev/null<br />

This revealed that there are already some utilities specifically for this purpose!  Let's see...:</p>

<p><pre>&lt;![CDATA[</p>

<p>dieter@dieter-mbp:~$ aptitude search askpass</p>

<p>p   gtk-led-askpass                                                - GTK+ password dialog suitable for use with ssh-add</p>

<p>p   ssh-askpass                                                    - under X, asks user for a passphrase for ssh-add</p>

<p>p   ssh-askpass-fullscreen                                         - Under Gnome2, asks user for a passphrase for ssh-add</p>

<p>p   ssh-askpass-gnome                                              - interactive X program to prompt users for a passphrase for ssh-add</p>

<p>]]&gt;</pre><p>I decided to install ssh-askpass-gnome even though I use xfce.  And it works great :D</p></p>

<p>After installing this you can just put your ssh-add line in the settings panel called "autostarted Applications" from Xfce and for your next session it will show a nice gtk popup to ask for your password and it works like a charm :)<br />

However, since i use multiple keys, i used to use the globbing operator (*) but this doesnt work anymore with this method.  I guess that makes sense as the globbing operator is probably a bash built-in...</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/emulating_two-dimensional_%28or_even_multi-dimensional%29_arrays_in_bash/">Emulating two-dimensional (or even multi-dimensional) arrays in bash</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/emulating_two-dimensional_%28or_even_multi-dimensional%29_arrays_in_bash/" rel="bookmark">
					<time class="entry-date" datetime="2007-08-26 12:49:42 -0400 EDT">
						August 26, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Ever needed to use arrays of two or more dimensions but got stuck on Bash limited array support which provides only 1 dimension?</p>

<p>There is a trick that let's you dynamically create variable names.  Using this, you can emulate additional dimensions.<br />

</p>

<p>Here's a simple example for an array with 2 dimensions:</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#set the value of my_array[i][j] where i = 25 and j = 10 to &quot;value&quot;</span>



<span style="color: #19177C">var</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;my_array25-10&quot;</span>

<span style="color: #408080; font-style: italic">#or like this: I=25;J=10;var=&quot;my_array$I-$J&quot;</span>



<span style="color: #008000">declare</span> <span style="color: #19177C">$var</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;value&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#retrieve the value of my_array[i][j] where i = 5 and j = 10</span>

<span style="color: #19177C">var</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;my_array5-10&quot;</span>

<span style="color: #408080; font-style: italic">#or like this: I=5;J=10;var=&quot;my_array$I-$J&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BB6688; font-weight: bold">${</span>!var<span style="color: #BB6688; font-weight: bold">}</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p></p>

<p>Thanks to the guys from #bash on freenode for their help and their excellent <a href="http://wooledge.org/mywiki/BashFAQ">bash faq</a></p></p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/nagios_monitoring_in_your_desktop_panel_aka_xfce_genmon_panel_plugin_rules/">Nagios monitoring in your desktop panel aka Xfce Genmon panel plugin rules!</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/nagios_monitoring_in_your_desktop_panel_aka_xfce_genmon_panel_plugin_rules/" rel="bookmark">
					<time class="entry-date" datetime="2007-08-05 16:42:46 -0400 EDT">
						August 5, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>FOSS is written by users, for users, and what I've been doing/experiencing this afternoon is a perfect example of that.<br />

First of all take <a href="http://www.xfce.org">Xfce</a>: a lightweight but sleek and flexible Desktop Environment.  Then take a look at the <a href="http://goodies.xfce.org/">Xfce Goodies project</a>, more specifically the <a href="http://goodies.xfce.org/projects/panel-plugins/start">Panel Plugins</a> page.  There are plenty of panel plugins to make your life easier: they check your mail, you can control your media player, they can show how your pc performs, built-in dictionaries, translate tools or command lines, show weather forecasts and so on.</p>

<p>Now, for <a href="http://corporate.netlog.com">work</a> I need to keep an eye on <a href="http://www.nagios.org/">Nagios</a>, (Nagios is a great FOSS host/service monitoring web application) but I don't like periodically checking the same webpage over and over again:<br />

news should come to me, not the other way around.</p>

<p>Now, I had already found an excellent <a href="https://addons.mozilla.org/en-US/firefox/addon/3607">Nagios Checker Firefox extension</a> but then I would need to have Firefox open all the time, which I don't.<br />

So at first I wanted to write my own panel plugin that would let me allow seeing the most important Nagios status information but then I came across the coolest Xfce panel plugin of them all: the <a href="http://goodies.xfce.org/projects/panel-plugins/xfce4-genmon-plugin">Genmon plugin</a>.  This is a plugin which you can add as many times to your panel as you want, and for each instance you can configure a script that it should run, and the frequency of it.  Like this you can create your own simple scripts (in php, bash, perl, python,...) which generate content (eg: text and images to be shown on the panel, tooltip, on-click action etc) and the Genmon plugin takes care of the rest.</p>

<p>This is exactly what I've done and in less then an hour everything was working just like I wanted :-)<br />

Well, not exactly: apparently the on-click action is bound to the image you show.  I would rather show no image at all and just show text with an on-click action bound to it, but this seems not possible so I had to use an icon.  This made my panel a bit larger (as text is shown beneath the icon, you can't configure it to place it next to it) Also it would be neat if I could work with colors: red for hosts who are down, green for those who are up etc.  Some details I could achieve if I would make my hands dirty, but for now I don't have time to enhance the Genmon plugin or to write my own, so I just live with it ;-)</p>

<p>Anyways, enough talk.</p>

<p>Here is a screenshot:</p>

<p><img src="/files/xfce_genmon_nagios_script.png"/></p>

<p>The cursor is not on the screenshot but I was obviously hoovering over the panel plugin to show the tooltip.<br />

You can also see at the left the notes plugin and the mail checker plugin and at the right the volume control, trash applet, battery monitor, systray, clock and action button(s) panel plugins.</p>

<p>And here is the source code of my bash script</p>

<p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&lt;!<span style="color: #666666">[</span>CDATA<span style="color: #666666">[</span>

<span style="color: #408080; font-style: italic">#!/bin/bash</span>



<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic"># Written by Dieter Plaetinck</span>

<span style="color: #408080; font-style: italic"># Licensed under the GPL V3</span>

<span style="color: #408080; font-style: italic"># See gnu.org/licenses/gpl-3.0.html</span>

<span style="color: #408080; font-style: italic">#</span>

<span style="color: #408080; font-style: italic"># works for Nagios 2.x No idea about 3.x </span>





<span style="color: #19177C">URL</span><span style="color: #666666">=</span>https://&lt;yourhost&gt;/nagios/cgi-bin/tac.cgi

<span style="color: #19177C">USERNAME</span><span style="color: #666666">=</span>username

<span style="color: #19177C">PASSWORD</span><span style="color: #666666">=</span>password



<span style="color: #19177C">PAGE</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>curl -s -k -u <span style="color: #19177C">$USERNAME</span>:<span style="color: #19177C">$PASSWORD</span> <span style="color: #19177C">$URL</span><span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_DOWN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>           <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=4&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_UNREACHABLE</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>    <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=8&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_UP</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>             <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=2&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">HOSTS_PENDING</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>        <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;hoststatustypes=1&#39; class=&#39;hostHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 20-<span style="color: #008000; font-weight: bold">)</span>



<span style="color: #19177C">SERVICES_CRIT</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>        <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=16&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_WARN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>        <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=4&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_UNKNOWN</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>     <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=8&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_OK</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>          <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=2&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #19177C">SERVICES_PENDING</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>     <span style="color: #008000">echo</span> -e <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$PAGE</span><span style="color: #BA2121">&quot;</span> | grep <span style="color: #BA2121">&quot;servicestatustypes=1&#39; class=&#39;serviceHeader&#39;&quot;</span> | awk <span style="color: #BA2121">&#39;{print $5}&#39;</span> | cut -c 23-<span style="color: #008000; font-weight: bold">)</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;img&gt;scripts/nagios.gif&lt;/img&gt;&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;txt&gt;</span><span style="color: #19177C">$HOSTS_DOWN</span><span style="color: #BA2121">-</span><span style="color: #19177C">$SERVICES_CRIT</span><span style="color: #BA2121">/</span><span style="color: #19177C">$SERVICES_WARN</span><span style="color: #BA2121">&lt;/txt&gt;&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;tool&gt;Hosts: </span><span style="color: #19177C">$HOSTS_DOWN</span><span style="color: #BA2121"> down / </span><span style="color: #19177C">$HOSTS_UNREACHABLE</span><span style="color: #BA2121"> unreachable / </span><span style="color: #19177C">$HOSTS_UP</span><span style="color: #BA2121"> up / </span><span style="color: #19177C">$HOSTS_PENDING</span><span style="color: #BA2121"> pending</span>

<span style="color: #BA2121">Services: </span><span style="color: #19177C">$SERVICES_CRIT</span><span style="color: #BA2121"> crit / </span><span style="color: #19177C">$SERVICES_WARN</span><span style="color: #BA2121"> warn / </span><span style="color: #19177C">$SERVICES_UNKNOWN</span><span style="color: #BA2121"> unknown / </span><span style="color: #19177C">$SERVICES_OK</span><span style="color: #BA2121"> ok / </span><span style="color: #19177C">$SERVICES_PENDING</span><span style="color: #BA2121"> pending&lt;/tool&gt;&quot;</span>

<span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;&lt;click&gt;firefox https://&lt;yourhost&gt;/nagios&lt;/click&gt;&quot;</span>

<span style="color: #666666">]]</span>&gt;
</pre></div>
<p>At my company we use https, If you use http I don&rsquo;t know if the authentication method is the same. If not check the -d flag for curl.<br /></p>

<p>The icon is just one I took from the nagios page and resized it a bit.  The script will be running in your home directory (even though you can put it anywhere you want)</p></p>

<p>PS: does anyone know a good Apple Keychain- like daemon that I can query from other scripts to receive passwords? Preferably GTK ones that do not pull in Gnome deps.  So I don't have to store passwords in cleartext... (and I need this anyway for other purposes :p)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/netlog/index.html" rel="tag">netlog</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/phpdeliciousclient_a_php_cli_client_to_administer_delicious_accounts/">PhpDeliciousClient, a php cli client to administer del.icio.us accounts</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/phpdeliciousclient_a_php_cli_client_to_administer_delicious_accounts/" rel="bookmark">
					<time class="entry-date" datetime="2007-07-01 16:52:51 -0400 EDT">
						July 1, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>PhpDeliciousClient is a console based client for doing maintenance on Del.icio.us accounts.<br />

I wrote it because - to my knowledge - there currently is no good program (including the personalized del.icio.us web page itself) that lets you make changes to your del.icio.us data in a powerful, productive manner. (with data I primarily mean tags. Posts and bundles are considered less important).</p>

<p>You probably are familiar with the fact that a Delicious account (or any tag based meta data organizing system, for that matter) can soon become bloated:  It gets filled with way too many tags.  Among those tags several of them mean the same (fun, funny, humor, ...) or include the other (humor, jokes, ...)  You can group them in bundles but even then you need to add all the tags to a post if you want it to appear in the results for that tag.  Not very convenient. Also, if you have your del.icio.us bookmarks available in Firefox, you'd have a menu with several hundreds of entries (one for each tag), each menu containing usually just a few (or worse: just one) entry.</p>

<p>When I got in this situation I tried to fix it, but it was a hell of a task to do this on the Delicious webpage itself, and I although I found some other tools they were far to basic, outdated, dependent on other stuff or just not meant for this kind of task, so I decided to write my own.</p>

<p>The result is a php command line program called <a href="/php_delicious_client">PhpDeliciousClient</a> (as you can see, I added it to the menu on the left too), which uses the <a href="http://www.ejeliot.com/pages/php-delicious">PhpDelicious</a> library to access the Del.icio.us api.</p>

<p>The primary focus of the program is to help you to bring your tags in balance, in an as efficient way as possible.  Other stuff, which can be done just fine on the delicious page (editing single posts, changing your password, ...) is not implemented.  </p>

<p>It's a bit hacky, I don't give any guarantees but I can tell I used it to edit <a href="http://del.icio.us/Dieter_be">my own Del.icio.us page</a>, going from about 400 tags to about 80 without any problems.</p>

<p>That said, head over to <a href="/php_delicious_client">the PhpDeliciousClient project page</a> for some more information, and to download it ;-)</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/php_delicious_client/">PhpDeliciousClient</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/php_delicious_client/" rel="bookmark">
					<time class="entry-date" datetime="2007-06-29 13:52:21 -0400 EDT">
						June 29, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<h3>Introduction</h3>

<p>PhpDeliciousClient is a CLI program for administering your Delicous account.  When you invoke it from the command line you have some methods to administer your tags and your posts.</p>

<p>It's written in PHP and uses <a href="http://www.ejeliot.com/">Ed Eliot's</a> <a href="http://www.ejeliot.com/pages/php-delicious">PhpDelicous</a> class to contact the del.icio.us api. (included in download)<br />

PhpDeliciousClient is licensed under the GPL v2, while the PhpDelicious class is licensed under the BSD license.</p>

<h3>Why?</h3>

<p>The main reason I started developing it is because administering your account on the del.ico.us web interface can be cumbersome.<br />

This is especially true in the case of balancing your tags:<br />

After a while, your del.icio.us account can get unbalanced: this is when you have many tags, but most of them only contain a few posts (very often even just one! ).<br />

So you would want to balance them again, by deleting and renaming some very specific tags so that you get a collection consisting of less tags (who are more general) and contain about 10 ~ 30 posts each.  Maybe you even also want to delete or rename some general ones who have way to many associated posts.<br />

If you want to do this via the del.icio.us web interface you could either go to your personal page, click a tag, and delete the tag manually from each associated post.  Or you could go to the delete or rename tag pages.  On these pages you have a form where you can select an existing tag from a dropdown (which usually is huge) and choose to delete or rename it (depending on which page you are on).  Then you would need to go to the form again and do this again for each tag.</p>

<p>With this tool, you can get a list of tags with certain conditions.  Eg "show me all tags who have between 1 and 3 associated posts".  You can then loop through that list and for each tag the tool will present you the option to delete, rename or skip it.</p>

<p>Of course it can do more, but this was my focus: making balancing an account as pleasant as possible.  Other features, such as adding or editing single posts are considered less important as these things can be done just fine on the del.icio.us page.</p>

<h3>Current state</h3>

<p>Currently the tool seems to do what it is intended to (and pretty well, at least for me: I cleaned up my account from about 400 to 80 tags during development of this program).<br />

However I don't give any warranty, the tool is only moderately documented, performs little to no user input checking and isn't very well tested so don't expect any higher quality then that of the average Microsoft product.<br />

This program shouldn't empty your del.icio.us account or blow up your computer but if it does I cannot be held responsible.</p>

<h3>Supported features</h3>

<ul>

<li>[t] View Tag: Based on the name of tag you enter, you can see the associated posts and edit or rename the tag.</li>

<li>[ts]  View Tags: Shows you all tags based on certain criteria:

<ul>

<li>lowerlimit: the minimum amount of times a tag has to be associated to a post</li>

<li>upperlimit: the maximum amount of times a tag has to be associated to a post</li>

<li>hard limit: the maximum number of tags you wish to edit/view at once</li>

</ul>

<p>You can decide to view associated posts for each tag, and you can choose wether to only show the tags, or to present you a menu with options for each one.  I usually use the latter, along with associated posts viewing enabled.</li>

<li>[p] View Post: shows you the first hit based on a tag and url*</li>

<li>[ps] View Posts: shows you all posts based on a tag and url*</li>

<li>[lu] Date of last update: Shows you the time when the data (on the serverside) last changed</li>

</ul>

<p>*: url based searching is still buggy, I'm working on it.</p>

<h3>Plans for the future</h3>

<p>My goals for upcoming releases are (aside from bug fixing) to add features to let you do stuff that you currently can't do or at least not in a productive manner.  </p>

<h4>Known bugs to be fixed</h4>

<ul>

<li>URL-based post querying doesn't work</li>

<li>Timezone not taken into account or something like that, because the "last updated" date has a 2hrs offset for me</li>

<li>During list iteration tags that have been renamed/deleted already still appear in posts for other tags</li>

<li>Issue less load on the Del.icio.us webservice by using the updated date (gonna take a look at Ed's caching system for that)</li>

</ul>

<h4>Features I have on my mind</h4>

<ul>

<li>Try to hide password as it is typed in by user</li>

<li>When a tag has many associated posts, automatically show them more concisely</li>

<li>An "are you sure?" thing when you want to rename to a tag that already has many (say: 40) associated posts</li>

<li>A mode to only show tags that differ one letter, or differ several letters, as long as they have enough in common (say: 2/3, 1/2 or user configurable)</li>

<li>An improved commandline that allows commands/queries like "rm tag1 tag2 tag3"

</ul>

<h3>Prerequisites</h3>

<ul>

<li>A shell (such as bash)</li>

<li>PHP 4 or higher, with php-cli enabled (default)</li>

<li>A del.icio.us account, preferrably a very messy one</li>

</ul>

<h3>Download</h3>

<p><a href="http://users.edpnet.be/dieter/php_delicious_client_v05.zip" onClick="javascript:urchinTracker ('/files/php_delicious_client_v05.zip');">release v0.5 (1-7-2007)</a></p>

<h3>Installation</h3>

<p>Unpack the archive and put the directory somewhere on your system.  On Linux /usr/local/bin/ is usually a good choice.<br />

Make sure pdclient.php has the executable flag (x).  If the directory is in your $PATH, you can just type pdclient.php on your console, otherwise you need to type &lt;path to program&gt;/phpdeliciousclient/pdclient.php or edit your $PATH.</p>

<p>You could also create a symlink in a good directory: <em>ln -s &lt;path to program&gt;/phpdeliciousclient/pdclient.php /usr/local/bin/pdclient</em></p>

<h3>Usage</h3>

<p>I choose a mysql-like syntax for invoking the program.  Valid options are:</p>

<ol>

<li><em>pdclient.php</em></li>

<li><em>pdclient.php --help</em></li>

<li><em>pdclient.php --user &lt;delicious username&gt;</em></li>

<li><em>pdclient.php --user &lt;delicious username&gt; --password</em></li>

<li><em>pdclient.php --user &lt;delicious username&gt; --password &lt;delicious password&gt;</em></li>

</ol>

<p>With method #4, the program will ask your password upon execution.  With the other methods this doesn't happen.  You can always update your account information from the menu. (<em>account setup</em>)</p>

<p>In the program prompt you can always type 'h' to get help.  Aside from that, just try the options, you'll figure it out in no time.</p>

<h3>Bug reports &amp; feature requests</h3>

<p>You can report bugs or file feature requests through the comment system on this page. Choose an appropriate title and prefix it with "Bug: " or "Feature: "</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/fosdem_2007_review/">Fosdem 2007 review</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/fosdem_2007_review/" rel="bookmark">
					<time class="entry-date" datetime="2007-03-15 21:02:41 -0400 EDT">
						March 15, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Every year, during a special weekend in February, the <a href="http://www.ulb.ac.be/">University Libre of Brussels</a> suddenly becomes a little more geeky.<br />

It's that time of the year when many European (and some inter-continental) colleagues join us at<br />

<a href="http://www.fosdem.org">Fosdem: the Free and Open source Software Developers' European Meeting</a> (more info <a href="http://www.fosdem.org/about/fosdem">here</a>).</p>

<p><a href="http://www.fosdem.org/2007/">This years edition</a> took place in the weekend of 24 - 2 - 2007.  And I was there, for the first time.  Saturday and Sunday :-)</p>

<p>Like usual the <a href="http://www.fosdem.org/2007/schedule/days">schedule</a> was pretty full, with lots of things happening at the same time, and only one thing a human being is able to attend at the same time.  Luckily however the 2 biggest rooms (Janson and Chavanne) were videotaped and the <a href="http://www.fosdem.org/2007/media/video">videos</a> are always made available online afterwards.  So knowing that, I could safely follow other rooms if I found those more interesting.</p>

<h3>Saturday</h3>

<p>The first talk started at 10:00h, and it's about an hour drive, if you don't get lost.<br />

But I need my sleep, especially the sparse kind of sleep after Friday evenings.  (same goes for my buddy <a href="http://ghosty.be/">Geert</a> who I could ride along with).  We headed off at 11h, and arrived somewhere around 12:30.  (Let's blame Brussels' bad road signaling for that).  </p>

<p>Missed the opening talks, and the "status of software patents" and "liberating java" talks which I'm was really interested in, but hey they were taped so no problemo ;-). During lunch break I explored the stands a bit, talked with some guys and picked up some reading material.</p>

<p>At the <a href="http://www.gentoo.org/">Gentoo</a> stand there was no merchandise to be found.  I asked whether merch would arrive, but they said they were afraid not.  (and they were right).  No Gentoo merchandise, that was bummer.  I really wanted a t-shirt or something like that.  Gentoo is one of my favorite distros.</p>

<p>At the gnome stand they had made a panel were people could write their favorite things (or things they hate) about gnome on post-its.  There were things like "gnome should use QT" replied by "qt should use gtk" and all kinds of jokes.  Then there was this guy who was repositioning all the post-it's in the shape of letters of kde.  I use neither (I use <a href="http://www.xfce.org/">xfce</a>) but this sure was a cool place to hang out during breaks.  </p>

<p>After that I followed the <a href="http://www.fosdem.org/2007/schedule/events/xorg">X.org talk</a>, <a href="http://www.fosdem.org/2007/schedule/speakers/keith+packard">Keith</a> (the project leader) was a real-funpants and told us all about the developers involved with Xorg.  Where they live, their tasks, favorite beers, and so on.  More of a talk for the community then the developers.</p>

<p>Next was <a href="http://www.fosdem.org/2007/schedule/events/aiglx">the aiglx one</a>.  Actually I preferred attending <a href="http://www.fosdem.org/2007/schedule/events/linuxbios">linuxBIOS</a> which I just find more interesting.  Besides, thanks to my nvidia card i can run GLX_EXT_texture_from_pixmap without aiglx or xgl, but hey, I guess the other guys are less fortunate so I decided to stick with them.  I can always check linuxBIOS later :-).   This talk was pretty advanced.  A real developers-talk you could say.  I certainly couldn't follow ;-)</p>

<p>After that came a talk about the state of <a href="http://www.fosdem.org/2007/schedule/events/linux_kernel"> the Linux kernel</a>.  It was quite interesting, again, this was a talk aimed at developers, which I'm totally not, but I'm a bit familiar with the kernel (running <a href="http://www.gentoo.org/">Gentoo</a> and following <a href="http://kerneltrap.org/">kerneltrap</a> a bit has it advantages) so I could follow, more or less.</p>

<p>Next I followed <a href="http://www.fosdem.org/2007/schedule/events/donators_return">the donators return</a> thing where people who donated (like me) can <a href="http://fosdem.org/2007/support/donate">win prizes</a>.  I didn't win anything but hey, still I felt the money was well spent.  (and I also got a free t-shirt ;-) )  One of <a href="http://www.sun.com/desktop/workstation/ultra20/">these</a> would certainly fit in my room though ;-))</p>

<p>One thing I just had to attend was the Gentoo devroom.  like I said: Gentoo is one of my favorite distributions.  Also, it was our Belgian irc-friend <a href="http://www.fosdem.org/2007/schedule/speakers/dimitry+bradt">Dimitry (aka diox)</a> who gave his talk so I just couldn't miss <a href="http://www.fosdem.org/2007/schedule/events/gentoo_future_discussion">his talk about Gentoo's future</a>.  This was the first devroom I followed and it was totally different then any other talk: it was more of an interactive talk between the devs and the audience.  In the audience were some real devs, but also lot's of "normal" communitypeople.  Next to me there even was a guy who was very new to Gentoo.  I was happy to tell him all about paludis, overlays and other concepts and terms of Gentoo.</p>

<p>After that, there were no more talks to attend, so I went by some stands again (to check if Gentoo merchandise might have arised, among others), met Geert again and, although it was pretty hard to find our way back in the (now darkened) city of Brussels, we managed to drive back home.</p>

<h3>Sunday</h3>

<p>A new day, and wow, so many cool talks to attend: metasploit, drupal, security testing, mozilla, mono, gplv3, the list goes on.  Luckily many of them were in Janson/Chavanne so I could safely skip these and head for...</p>

<p>the Gentoo devroom.  (yeah, sorry, Gentoo here Gentoo there.  My other favorite distro <a href="http://www.archlinux.org/">Arch Linux</a> wasn't featured anywhere, so Gentoo got all the attention)<br />

I missed the "programing with paludis" one (ouch! I would have liked that one) but I was there to hear <a href="http://www.fosdem.org/2007/schedule/speakers/mike+frysinger">Mike</a> talk about <a href="http://www.fosdem.org/2007/schedule/events/gentoo_council">Gentoo's inner workings</a>.  He told us all about Gentoo's history and how (by who) the project is managed.  That Daniel (the founder of Gentoo) left and came back (I found it remarkable he didn't mention <em>why</em> he left (to work at Microsoft).    Guess that wasn't important enough for the community)</p>

<p>After that <a href="http://www.fosdem.org/2007/schedule/speakers/chris+gianelloni">Chris</a> talked about <a href="http://www.fosdem.org/2007/schedule/events/gentoo_tinderbox_testing">the process that happens for making releases</a>.  I was impressed.</p>

<p>To fill the gap between 13h and 14h I wanted to follow <a href="http://www.fosdem.org/2007/schedule/events/jabber_oneteam">this</a> talk.  I have no idea what oneteam is, but I like jabber.  The room was stuffed with people though, and when opening the door you literally felt warm air coming out, so I decided to let the jabber guys in their oven :-)</p>

<p>After that some more Gentoo talks: <a href="http://www.fosdem.org/2007/schedule/events/gentoo_community_distro">"what makes Gentoo a community based distribution"</a> by <a href="http://www.fosdem.org/2007/schedule/speakers/christel+dahlksjaer">Christel</a> didn't make me believe Gentoo is any more community based then most other open source Linux distributions, but hey Christel was quite a joker and the community vibe in the room was nice.</p>

<p>After that <a href="http://www.fosdem.org/2007/schedule/speakers/marius+mauch">Marius</a> did a <em>great</em> job explaining the ins and outs of portage -especially the new ones- in his talk <a href="http://www.fosdem.org/2007/schedule/events/gentoo_portage">Portage: a look under the surface</a>.</p>

<p>After that <a href="http://www.fosdem.org/2007/schedule/speakers/alexander+faeroey">Alexander</a> did a talk called <a href="http://www.fosdem.org/2007/schedule/events/gentoo_bugday">future of the bugday project</a>.  This was pretty much the kind of information you get by reading the forums/newsletters.  Nothing new, but I don't think the talk intended to make groundbreaking revelations either ;-)</p>

<p>17 'o clock.  Damn.. time went fast.. Fosdem pretty much coming to end, luckily there was another nice topic I was really interested in: <a href="http://www.fosdem.org/2007/schedule/events/embedded_security_devices">Linux on embedded security devices</a>.  This talk wasn't very good though:   No kernel revelations.  No open source code.  No in-depth explanations.<br />

Basically a company showing it's product: an embedded device running Linux, running customized code and a presentation showing a scheme showing where they used technologies like SSL, dns or dhcp.  Boring...  And a little demo.<br />

Nice to see, but nothing more then that.</p>

<p>I think it must have been after this talk I went back to the stands to find <a href="http://christophe.vandeplas.com/">Christophe (aka chri)</a>, who I hadn't met yet but I had helped him a bit getting <a href="http://code.google.com/p/weids/">weids, the "Webbased Information Display System"</a> (which was created for fosdem) to work.<br />

After talking some time with chri the <a href="http://www.fsfeurope.org/">Free Software Foundation: Europe</a> got my attention, and I couldn't resist buying one of their lovely t-shirts.  I can't remember how much it cost me, but it was pretty expensive.  No problem though, as I know the money is in very good hands.</p>

<p>After that me and Geert drunk a beer, and then drove home again.</p>

<p>Fosdem was good.</p>

<h2>Did you know...?</h2>

<ul>

<li>I invited the <a href="http://www.cakephp.org/">CakePHP</a> guys to come?  Unfortunately none of them came, but maybe I can convince them next year!</li>

<li>The catering was allright and very, very cheap (and also run by volunteers)</li>

<li>Fosdem is mentioned in this <a href="http://www.gentoo.org/news/en/gwn/20070305-newsletter.xml">Gentoo newsletter</a>.  Including a picture of all the devs, shot by SeJo (sunday afternoon iirc)</li>

<li>You'll find many pictures <a href="http://www.fosdem.org/2007/media/pictures">here</a></li>

</ul>

<h2>Conclusion</h2>

<p>Most of the talks are aimed at developers, and developers certainly are the guys that should come.  Fosdem is the perfect place to meet, discuss (with both developers of your own team, as with devs of other projects that you depend on), learn and hack some code together.</p>

<p>For the community it's another story.  Many of the talks are too hard to follow, and those talks that are aimed at the community usually don't offer more information then what you would find on the websites, forums/mailinglists or newsletters.<br />

The fact that you can download lots of video material is great.  If you stay home you can still make up for it by watching the movies.<br />

It's cool to meet people though.  And if you want to visit stands of different projects (for example to buy merchandise).  That's imho the best reason for non-developers to come to fosdem.  But that's personal of course.</p>

<p>So who's coming with me to fosdem 2008? :-).</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/life/index.html" rel="tag">life</a>
            
                <a href="http://localhost:1313//tags/php/index.html" rel="tag">php</a>
            
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/information-age/index.html" rel="tag">information age</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/cakephp/index.html" rel="tag">cakephp</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/web2.0/index.html" rel="tag">web2.0</a>
            
                <a href="http://localhost:1313//tags/conf/index.html" rel="tag">conf</a>
            
		</span>
	</footer>
</article> 

			
				<article class="post type-post status-publish format-standard hentry">

	
	<header class="entry-header">

	

		<div class="entry-meta">
			<span class="cat-links">
                
			</span>
		</div>

        <h1 class="entry-title"><a href="http://localhost:1313/post/my_favorite_bash_tricks/">My favorite bash tricks</a></h1>

		<div class="entry-meta">
			<span class="entry-date">
				<a href="http://localhost:1313/post/my_favorite_bash_tricks/" rel="bookmark">
					<time class="entry-date" datetime="2007-03-14 23:38:54 -0400 EDT">
						March 14, 2007
					</time>
				</a>
			</span>
		</div>

	</header>
	
	<div class="entry-content">
		<p>Hello everyone.<br />

This post is about <a href="http://www.gnu.org/software/bash/">bash</a>, the shell providing so many users easy access to the underlying power of their system.<br />

(not <a href="http://www.bash.org/">bash</a> the quote database, although i really like that website too ;-) )<br />

Most people know the basics, but getting to know it better can really increase your productivity.  And when that happens, you might start loving bash as much as I do ;-)</p>

<p>I assume you have a basic knowledge of bash, the history mechanism, and  ~/.bash* files.<br />

So here they are, my favorite tricks, key combo's and some bonus stuff:</p>

<h3>Tricks</h3>

<ul>

<li>"cd -" takes you back to the previous directory, wherever that was.  Press again to cycle back.</li>

<li>putting arguments between braces {like,so} will execute the command multiple times, once for each "argument".  Bash will make the cartesian product when doing it multiple times in 1 expression.  Some less-obvious tricks with this method are mentioned <a href="http://www.bhaskarvk.info/technology/bash-tricks.html">here</a></li>

<li>HISTIGNORE : with this variable you have control over which things are being saved in your history.  <a href="http://www.talug.org/events/20030709/cmdline_history.html">Here</a> is a nice explication.  Especially the space trick is very useful imho.</li>

<li>CD_PATH : <a href="http://www.caliban.org/bash/">Here</a> is a great explanation ;-)</li>

<li>readline (library used by bash) trick:  put this in your ~/.inputrc (or /etc/inputrc) :<br />

<pre><![CDATA[

"\e[5~": history-search-backward

"\e[6~": history-search-forward

]]></pre><p>This way you can do *something*+pageup/pagedown to cycle through your history for commands starting with *something*<br />

You can use the up/down arrows too, their codes are "\e[A" and "\e[B"

</li>

<li>for more "natural" history saving behavior (when having several terminals open): put this in .bash_profile: <br/><br />

<pre><![CDATA[PROMPT_COMMAND='history -a']]></pre><p> (write each command separately in a new entry, instead of all at shell exit).<br />

And type </p>

<pre><![CDATA[shopt -s histappend]]></pre><p> to append instead of overwrite. (this might be default on some distro's.  I think it was on Gentoo)</li>

</ul>

<h3>Shortcuts/keycombos</h3>

<ul>

<li>ctrl+r : search through your history.  Repeatedly press ctrl+r to cycle through hits.</li>

<li>ctrl-u : cut everything on the current line before the cursor.</li>

<li>ctrl-y : paste text that was cut using ctrl-u. (starting at the cursor)</li>

<li>!$: equals the last word of the previous command. (great when performing several operations on the same file)</li>

</ul>

<h3>Bonus material</h3>

<ul>

<li><a href="http://www.caliban.org/bash/index.shtml#completion">Bash completion</a>, an add-on for bash which adds completion for arguments of your commands.  It's pretty smart and configurable.  (it's in portage, and probably in repos of all popular distros out there)</li>

<li><a href="http://n01se.net/agriffis/nopaste/">This script</a> provides you an interface to the <a href="http://rafb.net/paste/">rafb pastebin</a>!</li>

<li>Recursively delete all .svn folders in this folder, and in folders below. "find . -name .svn -print0 | xargs -0 rm -rf"</li>

<li>Recursively count number of files in a directory: "find -not -type d | wc -l"</li>

</ul>

<h3>Conclusion</h3>

<p>Those were all important tricks I'm currently using.  On the web you'll find lots more useful tips :-).<br />

If that still isn't enough, there is also <a href="http://www.gnu.org/software/bash/manual/bashref.html">man bash</a> :o</p>

<p>With aliases and scripts (and involving tools like sed or awk) the possibilities become pretty much endless.  But for that I refer to <a href="http://tldp.org/LDP/abs/html/">tldp.org</a> and your favorite web search engine.</p>

	</div>

	<footer class="entry-meta">
		<span class="tag-links">		
			
                <a href="http://localhost:1313//tags/linux/index.html" rel="tag">linux</a>
            
                <a href="http://localhost:1313//tags/foss/index.html" rel="tag">foss</a>
            
                <a href="http://localhost:1313//tags/bash/index.html" rel="tag">bash</a>
            
                <a href="http://localhost:1313//tags/productivity/index.html" rel="tag">productivity</a>
            
		</span>
	</footer>
</article> 

			
		
		</div>
	</div>
	<div id="secondary">

	

	<div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">

        

        

		<aside id="categories-3" class="widget widget_categories">


    
     


    <br/>
	<h1 class="widget-title">Popular tags</h1>

    <a href="http://localhost:1313/tags/monitoring">monitoring</a>
    24
    <br/>
    <a href="http://localhost:1313/tags/devops">devops</a>
    22
    <br/>
    <a href="http://localhost:1313/tags/golang">golang</a>
    8
    <br/>
    <br/>
    <br/>

	<h1 class="widget-title">Other tags</h1>

    
        
            <a href="http://localhost:1313/tags/arch">arch</a>
            19
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/bash">bash</a>
            15
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/cakephp">cakephp</a>
            8
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/conf">conf</a>
            9
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/dauth">dauth</a>
            1
            <br/>
        
    
        
        
    
        
            <a href="http://localhost:1313/tags/drums">drums</a>
            1
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/drupal">drupal</a>
            5
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/foss">foss</a>
            45
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/git">git</a>
            3
            <br/>
        
    
        
        
    
        
            <a href="http://localhost:1313/tags/information-age">information-age</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/life">life</a>
            32
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/linux">linux</a>
            20
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/lua">lua</a>
            1
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/mail">mail</a>
            1
            <br/>
        
    
        
        
    
        
            <a href="http://localhost:1313/tags/music">music</a>
            5
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/mysql">mysql</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/n900">n900</a>
            2
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/netlog">netlog</a>
            6
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/openstack">openstack</a>
            1
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/perf">perf</a>
            10
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/photos">photos</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/php">php</a>
            11
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/productivity">productivity</a>
            6
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/python">python</a>
            5
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/real-life">real-life</a>
            2
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/thesis">thesis</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/travel">travel</a>
            2
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/uzbl">uzbl</a>
            6
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/vimeo">vimeo</a>
            3
            <br/>
        
    
        
            <a href="http://localhost:1313/tags/web2.0">web2.0</a>
            9
            <br/>
        
    
</aside>


	</div>

</div>

</div>

		</div>

		<footer id="colophon" class="site-footer" role="contentinfo">

			<div class="site-info">
				<a href="http://gohugo.io">Proudly powered by Hugo</a>
			</div>
		</footer>
	</div>

	<script type='text/javascript' src='http://localhost:1313//js/functions.js'></script>
<script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
